!function(e,i){function n(e){return function(i){return{}.toString.call(i)=="[object "+e+"]"}}function h(){return o++}function g(e){return e.match(_)[0]}function f(e){for(e=e.replace(v,"/");e.match(p);)e=e.replace(p,"/");return e=e.replace(b,"$1/")}function w(e){var i=e.length-1,t=e.charAt(i);return"#"===t?e.substring(0,i):".js"===e.substring(i-2)||e.indexOf("?")>0||".css"===e.substring(i-3)||"/"===t?e:e+".js"}function $(e){var i=a.alias;return i&&r(i[e])?i[e]:e}function x(e){var t,i=a.paths;return i&&(t=e.match(y))&&r(i[t[1]])&&(e=i[t[1]]+t[2]),e}function k(e){var i=a.vars;return i&&e.indexOf("{")>-1&&(e=e.replace(T,function(e,t){return r(i[t])?i[t]:e})),e}function j(e){var i=a.map,t=e;if(i)for(var n=0,s=i.length;s>n;n++){var r=i[n];if(t=c(r)?r(e)||e:e.replace(r[0],r[1]),t!==e)break}return t}function C(e,i){var t,n=e.charAt(0);if(S.test(e))t=e;else if("."===n)t=f((i?g(i):a.cwd)+e);else if("/"===n){var s=a.cwd.match(E);t=s?s[0]+e.substring(1):e}else t=a.base+e;return 0===t.indexOf("//")&&(t=location.protocol+t),t}function q(e,i){if(!e)return"";e=$(e),e=x(e),e=k(e),e=w(e);var t=C(e,i);return t=j(t)}function M(e){return e.hasAttribute?e.src:e.getAttribute("src",4)}function V(e,i,t,a){var n=P.test(e),s=D.createElement(n?"link":"script");t&&(s.charset=t),d(a)||s.setAttribute("crossorigin",a),z(s,i,n,e),n?(s.rel="stylesheet",s.href=e):(s.async=!0,s.src=e),H=s,U?L.insertBefore(s,U):L.appendChild(s),H=null}function z(e,i,t,n){function r(){e.onload=e.onerror=e.onreadystatechange=null,t||a.debug||L.removeChild(e),e=null,i()}var s="onload"in e;return!t||!G&&s?void(s?(e.onload=r,e.onerror=function(){u("error",{uri:n,node:e}),r()}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&r()}):void setTimeout(function(){F(e,i)},1)}function F(e,i){var a,t=e.sheet;if(G)t&&(a=!0);else if(t)try{t.cssRules&&(a=!0)}catch(n){"NS_ERROR_DOM_SECURITY_ERR"===n.name&&(a=!0)}setTimeout(function(){a?i():F(e,i)},20)}function X(){if(H)return H;if(R&&"interactive"===R.readyState)return R;for(var e=L.getElementsByTagName("script"),i=e.length-1;i>=0;i--){var t=e[i];if("interactive"===t.readyState)return R=t}}function Y(e){var i=[];return e.replace(B,"").replace(J,function(e,t,a){a&&i.push(a)}),i}function te(e,i){this.uri=e,this.dependencies=i||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}if(!e.seajs){var t=e.seajs={version:"2.2.3"},a=t.data={},s=n("Object"),r=n("String"),l=Array.isArray||n("Array"),c=n("Function"),d=n("Undefined"),o=0,m=a.events={};t.on=function(e,i){var a=m[e]||(m[e]=[]);return a.push(i),t},t.off=function(e,i){if(!e&&!i)return m=a.events={},t;var n=m[e];if(n)if(i)for(var s=n.length-1;s>=0;s--)n[s]===i&&n.splice(s,1);else delete m[e];return t};var u=t.emit=function(e,i){var n,a=m[e];if(a)for(a=a.slice();n=a.shift();)n(i);return t},_=/[^?#]*\//,v=/\/\.\//g,p=/\/[^/]+\/\.\.\//,b=/([^:/])\/\//g,y=/^([^/:]+)(\/.+)$/,T=/{([^{]+)}/g,S=/^\/\/.|:\//,E=/^.*?\/\/.*?\//,D=document,N=g(D.URL),I=D.scripts,A=D.getElementById("seajsnode")||I[I.length-1],O=g(M(A)||N);t.resolve=q;var H,R,L=D.head||D.getElementsByTagName("head")[0]||D.documentElement,U=L.getElementsByTagName("base")[0],P=/\.css(?:\?|$)/i,G=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;t.request=V;var W,J=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,B=/\\\\/g,K=t.cache={},Q={},Z={},ee={},ie=te.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};te.prototype.resolve=function(){for(var e=this,i=e.dependencies,t=[],a=0,n=i.length;n>a;a++)t[a]=te.resolve(i[a],e.uri);return t},te.prototype.load=function(){var e=this;if(!(e.status>=ie.LOADING)){e.status=ie.LOADING;var i=e.resolve();u("load",i);for(var a,t=e._remain=i.length,n=0;t>n;n++)a=te.get(i[n]),a.status<ie.LOADED?a._waitings[e.uri]=(a._waitings[e.uri]||0)+1:e._remain--;if(0===e._remain)return void e.onload();var s={};for(n=0;t>n;n++)a=K[i[n]],a.status<ie.FETCHING?a.fetch(s):a.status===ie.SAVED&&a.load();for(var r in s)s.hasOwnProperty(r)&&s[r]()}},te.prototype.onload=function(){var e=this;e.status=ie.LOADED,e.callback&&e.callback();var t,a,i=e._waitings;for(t in i)i.hasOwnProperty(t)&&(a=K[t],a._remain-=i[t],0===a._remain&&a.onload());delete e._waitings,delete e._remain},te.prototype.fetch=function(e){function l(){t.request(s.requestUri,s.onRequest,s.charset,s.crossorigin)}function d(){delete Q[r],Z[r]=!0,W&&(te.save(n,W),W=null);var e,i=ee[r];for(delete ee[r];e=i.shift();)e.load()}var i=this,n=i.uri;i.status=ie.FETCHING;var s={uri:n};u("fetch",s);var r=s.requestUri||n;return!r||Z[r]?void i.load():Q[r]?void ee[r].push(i):(Q[r]=!0,ee[r]=[i],u("request",s={uri:n,requestUri:r,onRequest:d,charset:c(a.charset)?a.charset(r):a.charset,crossorigin:c(a.crossorigin)?a.crossorigin(r):a.crossorigin}),void(s.requested||(e?e[s.requestUri]=l:l())))},te.prototype.exec=function(){function a(e){return te.get(a.resolve(e)).exec()}var e=this;if(e.status>=ie.EXECUTING)return e.exports;e.status=ie.EXECUTING;var t=e.uri;a.resolve=function(e){return te.resolve(e,t)},a.async=function(e,i){return te.use(e,i,t+"_async_"+h()),a};var n=e.factory,s=c(n)?n(a,e.exports={},e):n;return s===i&&(s=e.exports),delete e.factory,e.exports=s,e.status=ie.EXECUTED,u("exec",e),s},te.resolve=function(e,i){var a={id:e,refUri:i};return u("resolve",a),a.uri||t.resolve(a.id,i)},te.define=function(e,t,a){var n=arguments.length;1===n?(a=e,e=i):2===n&&(a=t,l(e)?(t=e,e=i):t=i),!l(t)&&c(a)&&(t=Y(a.toString()));var s={id:e,uri:te.resolve(e),deps:t,factory:a};if(!s.uri&&D.attachEvent){var r=X();r&&(s.uri=r.src.replace(/\?.*/g,""))}u("define",s),s.uri?te.save(s.uri,s):W=s},te.save=function(e,i){var t=te.get(e);t.status<ie.SAVED&&(t.id=i.id||e,t.dependencies=i.deps||[],t.factory=i.factory,t.status=ie.SAVED)},te.get=function(e,i){return K[e]||(K[e]=new te(e,i))},te.use=function(i,t,a){var n=te.get(a,l(i)?i:[i]);n.callback=function(){for(var i=[],a=n.resolve(),s=0,r=a.length;r>s;s++)i[s]=K[a[s]].exec();t&&t.apply(e,i),delete n.callback},n.load()},te.preload=function(e){var i=a.preload,t=i.length;t?te.use(i,function(){i.splice(0,t),te.preload(e)},a.cwd+"_preload_"+h()):e()},t.use=function(e,i){return te.preload(function(){te.use(e,i,a.cwd+"_use_"+h())}),t},te.define.cmd={},e.define=te.define,t.Module=te,a.fetchedList=Z,a.cid=h,t.require=function(e){var i=te.get(te.resolve(e));return i.status<ie.EXECUTING&&(i.onload(),i.exec()),i.exports};var ae=/^(.+?\/)(\?\?)?(seajs\/)+/;a.base=(O.match(ae)||["",O])[1],a.dir=O,a.cwd=N,a.charset="utf-8",a.preload=function(){var e=[],i=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2");return i+=" "+D.cookie,i.replace(/(seajs-\w+)=1/g,function(i,t){e.push(t)}),e}(),t.config=function(e){for(var i in e){var n=e[i],r=a[i];if(r&&s(r))for(var c in n)r[c]=n[c];else l(r)?n=r.concat(n):"base"===i&&("/"!==n.slice(-1)&&(n+="/"),n=C(n)),a[i]=n}return u("config",e),t}}}(this);var Zepto=function(){function O(e){return null==e?String(e):T[$.call(e)]||"object"}function A(e){return"function"==O(e)}function D(e){return null!=e&&e==e.window}function P(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function q(e){return"object"==O(e)}function L(e){return q(e)&&!D(e)&&Object.getPrototypeOf(e)==Object.prototype}function I(e){return"number"==typeof e.length}function M(e){return s.call(e,function(e){return null!=e})}function R(e){return e.length>0?n.fn.concat.apply([],e):e}function z(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function U(e){return e in c?c[e]:c[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function H(e,t){return"number"!=typeof t||d[z(e)]?t:t+"px"}function Z(e){var t,n;return l[e]||(t=o.createElement(e),o.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),l[e]=n),l[e]}function F(e){return"children"in e?r.call(e.children):n.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function V(n,i,a){for(t in i)a&&(L(i[t])||k(i[t]))?(L(i[t])&&!L(n[t])&&(n[t]={}),k(i[t])&&!k(n[t])&&(n[t]=[]),V(n[t],i[t],a)):i[t]!==e&&(n[t]=i[t])}function X(e,t){return null==t?n(e):n(e).filter(t)}function B(e,t,n,i){return A(t)?t.call(e,n,i):t}function G(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function J(t,n){var i=t.className,a=i&&i.baseVal!==e;return n===e?a?i.baseVal:i:void(a?i.baseVal=n:t.className=n)}function W(e){var t;try{return e?"true"==e||("false"==e?!1:"null"==e?null:/^0/.test(e)||isNaN(t=Number(e))?/^[\[\{]/.test(e)?n.parseJSON(e):e:t):e}catch(i){return e}}function Y(e,t){t(e);for(var n in e.childNodes)Y(e.childNodes[n],t)}var e,t,n,i,E,S,a=[],r=a.slice,s=a.filter,o=window.document,l={},c={},d={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},u=/^\s*<(\w+|!)[^>]*>/,h=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,f=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,m=/^(?:body|html)$/i,p=/([A-Z])/g,v=["val","css","html","text","data","width","height","offset"],g=["after","prepend","before","append"],_=o.createElement("table"),b=o.createElement("tr"),y={tr:o.createElement("tbody"),tbody:_,thead:_,tfoot:_,td:b,th:b,"*":o.createElement("div")},w=/complete|loaded|interactive/,x=/^[\w-]*$/,T={},$=T.toString,j={},C=o.createElement("div"),N={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},k=Array.isArray||function(e){return e instanceof Array};return j.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,a=e.parentNode,r=!a;return r&&(a=C).appendChild(e),i=~j.qsa(a,t).indexOf(e),r&&C.removeChild(e),i},E=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},S=function(e){return s.call(e,function(t,n){return e.indexOf(t)==n})},j.fragment=function(t,i,a){var s,l,c;return h.test(t)&&(s=n(o.createElement(RegExp.$1))),s||(t.replace&&(t=t.replace(f,"<$1></$2>")),i===e&&(i=u.test(t)&&RegExp.$1),i in y||(i="*"),c=y[i],c.innerHTML=""+t,s=n.each(r.call(c.childNodes),function(){c.removeChild(this)})),L(a)&&(l=n(s),n.each(a,function(e,t){v.indexOf(e)>-1?l[e](t):l.attr(e,t)})),s},j.Z=function(e,t){return e=e||[],e.__proto__=n.fn,e.selector=t||"",e},j.isZ=function(e){return e instanceof j.Z},j.init=function(t,i){var a;if(!t)return j.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&u.test(t))a=j.fragment(t,RegExp.$1,i),t=null;else{if(i!==e)return n(i).find(t);a=j.qsa(o,t)}else{if(A(t))return n(o).ready(t);if(j.isZ(t))return t;if(k(t))a=M(t);else if(q(t))a=[t],t=null;else if(u.test(t))a=j.fragment(t.trim(),RegExp.$1,i),t=null;else{if(i!==e)return n(i).find(t);a=j.qsa(o,t)}}return j.Z(a,t)},n=function(e,t){return j.init(e,t)},n.extend=function(e){var t,n=r.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){V(e,n,t)}),e},j.qsa=function(e,t){var n,i="#"==t[0],a=!i&&"."==t[0],s=i||a?t.slice(1):t,o=x.test(s);return P(e)&&o&&i?(n=e.getElementById(s))?[n]:[]:1!==e.nodeType&&9!==e.nodeType?[]:r.call(o&&!i?a?e.getElementsByClassName(s):e.getElementsByTagName(t):e.querySelectorAll(t))},n.contains=function(e,t){return e!==t&&e.contains(t)},n.type=O,n.isFunction=A,n.isWindow=D,n.isArray=k,n.isPlainObject=L,n.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},n.inArray=function(e,t,n){return a.indexOf.call(t,e,n)},n.camelCase=E,n.trim=function(e){return null==e?"":String.prototype.trim.call(e)},n.uuid=0,n.support={},n.expr={},n.map=function(e,t){var n,a,r,i=[];if(I(e))for(a=0;a<e.length;a++)n=t(e[a],a),null!=n&&i.push(n);else for(r in e)n=t(e[r],r),null!=n&&i.push(n);return R(i)},n.each=function(e,t){var n,i;if(I(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(i in e)if(t.call(e[i],i,e[i])===!1)return e;return e},n.grep=function(e,t){return s.call(e,t)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){T["[object "+t+"]"]=t.toLowerCase()}),n.fn={forEach:a.forEach,reduce:a.reduce,push:a.push,sort:a.sort,indexOf:a.indexOf,concat:a.concat,map:function(e){return n(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return n(r.apply(this,arguments))},ready:function(e){return w.test(o.readyState)&&o.body?e(n):o.addEventListener("DOMContentLoaded",function(){e(n)},!1),this},get:function(t){return t===e?r.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return a.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return A(e)?this.not(this.not(e)):n(s.call(this,function(t){return j.matches(t,e)}))},add:function(e,t){return n(S(this.concat(n(e,t))))},is:function(e){return this.length>0&&j.matches(this[0],e)},not:function(t){var i=[];if(A(t)&&t.call!==e)this.each(function(e){t.call(this,e)||i.push(this)});else{var a="string"==typeof t?this.filter(t):I(t)&&A(t.item)?r.call(t):n(t);this.forEach(function(e){a.indexOf(e)<0&&i.push(e)})}return n(i)},has:function(e){return this.filter(function(){return q(e)?n.contains(this,e):n(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!q(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!q(e)?e:n(e)},find:function(e){var t,i=this;return t="object"==typeof e?n(e).filter(function(){var e=this;return a.some.call(i,function(t){return n.contains(t,e)})}):1==this.length?n(j.qsa(this[0],e)):this.map(function(){return j.qsa(this,e)})},closest:function(e,t){var i=this[0],a=!1;for("object"==typeof e&&(a=n(e));i&&!(a?a.indexOf(i)>=0:j.matches(i,e));)i=i!==t&&!P(i)&&i.parentNode;return n(i)},parents:function(e){for(var t=[],i=this;i.length>0;)i=n.map(i,function(e){return(e=e.parentNode)&&!P(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return X(t,e)},parent:function(e){return X(S(this.pluck("parentNode")),e)},children:function(e){return X(this.map(function(){return F(this)}),e)},contents:function(){return this.map(function(){return r.call(this.childNodes)})},siblings:function(e){return X(this.map(function(e,t){return s.call(F(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return n.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=Z(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=A(e);if(this[0]&&!t)var i=n(e).get(0),a=i.parentNode||this.length>1;return this.each(function(r){n(this).wrapAll(t?e.call(this,r):a?i.cloneNode(!0):i)})},wrapAll:function(e){if(this[0]){n(this[0]).before(e=n(e));for(var t;(t=e.children()).length;)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=A(e);return this.each(function(i){var a=n(this),r=a.contents(),s=t?e.call(this,i):e;r.length?r.wrapAll(s):a.append(s)})},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var i=n(this);(t===e?"none"==i.css("display"):t)?i.show():i.hide()})},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(t){var i=this.innerHTML;n(this).empty().append(B(this,e,t,i))})},text:function(t){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t===e?"":""+t})},attr:function(n,i){var a;return"string"==typeof n&&i===e?0==this.length||1!==this[0].nodeType?e:"value"==n&&"INPUT"==this[0].nodeName?this.val():!(a=this[0].getAttribute(n))&&n in this[0]?this[0][n]:a:this.each(function(e){if(1===this.nodeType)if(q(n))for(t in n)G(this,t,n[t]);else G(this,n,B(this,i,e,this.getAttribute(n)))})},removeAttr:function(e){return this.each(function(){1===this.nodeType&&G(this,e)})},prop:function(t,n){return t=N[t]||t,n===e?this[0]&&this[0][t]:this.each(function(e){this[t]=B(this,n,e,this[t])})},data:function(t,n){var i=this.attr("data-"+t.replace(p,"-$1").toLowerCase(),n);return null!==i?W(i):e},val:function(e){return 0===arguments.length?this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(t){this.value=B(this,e,t,this.value)})},offset:function(e){if(e)return this.each(function(t){var i=n(this),a=B(this,e,t,i.offset()),r=i.offsetParent().offset(),s={top:a.top-r.top,left:a.left-r.left};"static"==i.css("position")&&(s.position="relative"),i.css(s)});if(0==this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,i){if(arguments.length<2){var a=this[0],r=getComputedStyle(a,"");if(!a)return;if("string"==typeof e)return a.style[E(e)]||r.getPropertyValue(e);if(k(e)){var s={};return n.each(k(e)?e:[e],function(e,t){s[t]=a.style[E(t)]||r.getPropertyValue(t)}),s}}var o="";if("string"==O(e))i||0===i?o=z(e)+":"+H(e,i):this.each(function(){this.style.removeProperty(z(e))});else for(t in e)e[t]||0===e[t]?o+=z(t)+":"+H(t,e[t])+";":this.each(function(){this.style.removeProperty(z(t))});return this.each(function(){this.style.cssText+=";"+o})},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?a.some.call(this,function(e){return this.test(J(e))},U(e)):!1},addClass:function(e){return e?this.each(function(t){i=[];var a=J(this),r=B(this,e,t,a);r.split(/\s+/g).forEach(function(e){n(this).hasClass(e)||i.push(e)},this),i.length&&J(this,a+(a?" ":"")+i.join(" "))}):this},removeClass:function(t){return this.each(function(n){return t===e?J(this,""):(i=J(this),B(this,t,n,i).split(/\s+/g).forEach(function(e){i=i.replace(U(e)," ")}),void J(this,i.trim()))})},toggleClass:function(t,i){return t?this.each(function(a){var r=n(this),s=B(this,t,a,J(this));s.split(/\s+/g).forEach(function(t){(i===e?!r.hasClass(t):i)?r.addClass(t):r.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),i=this.offset(),a=m.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(n(e).css("margin-top"))||0,i.left-=parseFloat(n(e).css("margin-left"))||0,a.top+=parseFloat(n(t[0]).css("border-top-width"))||0,a.left+=parseFloat(n(t[0]).css("border-left-width"))||0,{top:i.top-a.top,left:i.left-a.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||o.body;e&&!m.test(e.nodeName)&&"static"==n(e).css("position");)e=e.offsetParent;return e})}},n.fn.detach=n.fn.remove,["width","height"].forEach(function(t){var i=t.replace(/./,function(e){return e[0].toUpperCase()});n.fn[t]=function(a){var r,s=this[0];return a===e?D(s)?s["inner"+i]:P(s)?s.documentElement["scroll"+i]:(r=this.offset())&&r[t]:this.each(function(e){s=n(this),s.css(t,B(this,a,e,s[t]()))})}}),g.forEach(function(e,t){var i=t%2;n.fn[e]=function(){var e,r,a=n.map(arguments,function(t){return e=O(t),"object"==e||"array"==e||null==t?t:j.fragment(t)}),s=this.length>1;return a.length<1?this:this.each(function(e,o){r=i?o:o.parentNode,o=0==t?o.nextSibling:1==t?o.firstChild:2==t?o:null,a.forEach(function(e){if(s)e=e.cloneNode(!0);else if(!r)return n(e).remove();Y(r.insertBefore(e,o),function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},n.fn[i?e+"To":"insert"+(t?"Before":"After")]=function(t){return n(t)[e](this),this}}),j.Z.prototype=n.fn,j.uniq=S,j.deserializeValue=W,n.zepto=j,n}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(e){function u(e){return e._zid||(e._zid=t++)}function h(e,t,n,i){if(t=f(t),t.ns)var a=m(t.ns);return(s[u(e)]||[]).filter(function(e){return!(!e||t.e&&e.e!=t.e||t.ns&&!a.test(e.ns)||n&&u(e.fn)!==u(n)||i&&e.sel!=i)})}function f(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function m(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function p(e,t){return e.del&&!l&&e.e in c||!!t}function v(e){return d[e]||l&&c[e]||e}function g(t,i,a,r,o,l,c){var h=u(t),m=s[h]||(s[h]=[]);i.split(/\s/).forEach(function(i){if("ready"==i)return e(document).ready(a);var s=f(i);s.fn=a,s.sel=o,s.e in d&&(a=function(t){var n=t.relatedTarget;return!n||n!==this&&!e.contains(this,n)?s.fn.apply(this,arguments):void 0}),s.del=l;var u=l||a;s.proxy=function(e){if(e=T(e),!e.isImmediatePropagationStopped()){e.data=r;var i=u.apply(t,e._args==n?[e]:[e].concat(e._args));return i===!1&&(e.preventDefault(),e.stopPropagation()),i}},s.i=m.length,m.push(s),"addEventListener"in t&&t.addEventListener(v(s.e),s.proxy,p(s,c))})}function _(e,t,n,i,a){var r=u(e);(t||"").split(/\s/).forEach(function(t){h(e,t,n,i).forEach(function(t){delete s[r][t.i],"removeEventListener"in e&&e.removeEventListener(v(t.e),t.proxy,p(t,a))})})}function T(t,i){return(i||!t.isDefaultPrevented)&&(i||(i=t),e.each(x,function(e,n){var a=i[e];t[e]=function(){return this[n]=b,a&&a.apply(i,arguments)},t[n]=y}),(i.defaultPrevented!==n?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(t.isDefaultPrevented=b)),t}function $(e){var t,i={originalEvent:e};for(t in e)w.test(t)||e[t]===n||(i[t]=e[t]);return T(i,e)}var n,t=1,i=Array.prototype.slice,a=e.isFunction,r=function(e){return"string"==typeof e},s={},o={},l="onfocusin"in window,c={focus:"focusin",blur:"focusout"},d={mouseenter:"mouseover",mouseleave:"mouseout"};o.click=o.mousedown=o.mouseup=o.mousemove="MouseEvents",e.event={add:g,remove:_},e.proxy=function(t,n){if(a(t)){var i=function(){return t.apply(n,arguments)};return i._zid=u(t),i}if(r(n))return e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var b=function(){return!0},y=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$)/,x={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,s,o,l,c){var d,u,h=this;return t&&!r(t)?(e.each(t,function(e,t){h.on(e,s,o,t,c)}),h):(r(s)||a(l)||l===!1||(l=o,o=s,s=n),(a(o)||o===!1)&&(l=o,o=n),l===!1&&(l=y),h.each(function(n,a){c&&(d=function(e){return _(a,e.type,l),l.apply(this,arguments)}),s&&(u=function(t){var n,r=e(t.target).closest(s,a).get(0);return r&&r!==a?(n=e.extend($(t),{currentTarget:r,liveFired:a}),(d||l).apply(r,[n].concat(i.call(arguments,1)))):void 0}),g(a,t,l,o,s,u||d)}))},e.fn.off=function(t,i,s){var o=this;return t&&!r(t)?(e.each(t,function(e,t){o.off(e,i,t)}),o):(r(i)||a(s)||s===!1||(s=i,i=n),s===!1&&(s=y),o.each(function(){_(this,t,s,i)}))},e.fn.trigger=function(t,n){return t=r(t)||e.isPlainObject(t)?e.Event(t):T(t),t._args=n,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,n){var i,a;return this.each(function(s,o){i=$(r(t)?e.Event(t):t),i._args=n,i.target=o,e.each(h(o,t.type||t),function(e,t){return a=t.proxy(i),i.isImmediatePropagationStopped()?!1:void 0})}),a},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),e.Event=function(e,t){r(e)||(t=e,e=t.type);var n=document.createEvent(o[e]||"Events"),i=!0;if(t)for(var a in t)"bubbles"==a?i=!!t[a]:n[a]=t[a];return n.initEvent(e,i,!0),T(n)}}(Zepto),function(e){function u(t,n,i){var a=e.Event(n);return e(t).trigger(a,i),!a.isDefaultPrevented()}function h(e,t,i,a){return e.global?u(t||n,i,a):void 0}function f(t){t.global&&0===e.active++&&h(t,null,"ajaxStart")}function m(t){t.global&&!--e.active&&h(t,null,"ajaxStop")}function p(e,t){var n=t.context;return t.beforeSend.call(n,e,t)===!1||h(t,n,"ajaxBeforeSend",[e,t])===!1?!1:void h(t,n,"ajaxSend",[e,t])}function v(e,t,n,i){var a=n.context,r="success";n.success.call(a,e,r,t),i&&i.resolveWith(a,[e,r,t]),h(n,a,"ajaxSuccess",[t,n,e]),_(r,t,n)}function g(e,t,n,i,a){var r=i.context;i.error.call(r,n,t,e),a&&a.rejectWith(r,[n,t,e]),h(i,r,"ajaxError",[n,i,e||t]),_(t,n,i)}function _(e,t,n){var i=n.context;n.complete.call(i,t,e),h(n,i,"ajaxComplete",[t,n]),m(n)}function b(){}function y(e){return e&&(e=e.split(";",2)[0]),e&&(e==c?"html":e==l?"json":s.test(e)?"script":o.test(e)&&"xml")||"text"}function w(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function x(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=w(t.url,t.data),t.data=void 0)}function T(t,n,i,a){return e.isFunction(n)&&(a=i,i=n,n=void 0),e.isFunction(i)||(a=i,i=void 0),{url:t,data:n,success:i,dataType:a}}function j(t,n,i,a){var r,s=e.isArray(n),o=e.isPlainObject(n);e.each(n,function(n,l){r=e.type(l),a&&(n=i?a:a+"["+(o||"object"==r||"array"==r?n:"")+"]"),!a&&s?t.add(l.name,l.value):"array"==r||!i&&"object"==r?j(t,l,i,n):t.add(n,l)})}var i,a,t=0,n=window.document,r=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=/^(?:text|application)\/javascript/i,o=/^(?:text|application)\/xml/i,l="application/json",c="text/html",d=/^\s*$/;e.active=0,e.ajaxJSONP=function(i,a){if(!("type"in i))return e.ajax(i);var c,h,r=i.jsonpCallback,s=(e.isFunction(r)?r():r)||"jsonp"+ ++t,o=n.createElement("script"),l=window[s],d=function(t){e(o).triggerHandler("error",t||"abort")},u={abort:d};return a&&a.promise(u),e(o).on("load error",function(t,n){clearTimeout(h),e(o).off().remove(),"error"!=t.type&&c?v(c[0],u,i,a):g(null,n||"error",u,i,a),window[s]=l,c&&e.isFunction(l)&&l(c[0]),l=c=void 0}),p(u,i)===!1?(d("abort"),u):(window[s]=function(){c=arguments},o.src=i.url.replace(/\?(.+)=\?/,"?$1="+s),n.head.appendChild(o),i.timeout>0&&(h=setTimeout(function(){d("timeout")},i.timeout)),u)},e.ajaxSettings={type:"GET",beforeSend:b,success:b,error:b,complete:b,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:l,xml:"application/xml, text/xml",html:c,text:"text/plain"},crossDomain:!0,timeout:0,processData:!0,cache:!0},e.ajax=function(t){var n=e.extend({},t||{}),r=e.Deferred&&e.Deferred();for(i in e.ajaxSettings)void 0===n[i]&&(n[i]=e.ajaxSettings[i]);f(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),x(n),n.cache===!1&&(n.url=w(n.url,"_="+Date.now()));var s=n.dataType,o=/\?.+=\?/.test(n.url);if("jsonp"==s||o)return o||(n.url=w(n.url,n.jsonp?n.jsonp+"=?":n.jsonp===!1?"":"callback=?")),e.ajaxJSONP(n,r);var T,l=n.accepts[s],c={},u=function(e,t){c[e.toLowerCase()]=[e,t]},h=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,m=n.xhr(),_=m.setRequestHeader;if(r&&r.promise(m),n.crossDomain||u("X-Requested-With","XMLHttpRequest"),u("Accept",l||"*/*"),(l=n.mimeType||l)&&(l.indexOf(",")>-1&&(l=l.split(",",2)[0]),m.overrideMimeType&&m.overrideMimeType(l)),(n.contentType||n.contentType!==!1&&n.data&&"GET"!=n.type.toUpperCase())&&u("Content-Type",n.contentType||"application/x-www-form-urlencoded"),n.headers)for(a in n.headers)u(a,n.headers[a]);if(m.setRequestHeader=u,m.onreadystatechange=function(){if(4==m.readyState){m.onreadystatechange=b,clearTimeout(T);var t,i=!1;if(m.status>=200&&m.status<300||304==m.status||0==m.status&&"file:"==h){s=s||y(n.mimeType||m.getResponseHeader("content-type")),t=m.responseText;try{"script"==s?(1,eval)(t):"xml"==s?t=m.responseXML:"json"==s&&(t=d.test(t)?null:e.parseJSON(t))}catch(a){i=a}i?g(i,"parsererror",m,n,r):v(t,m,n,r)}else g(m.statusText||null,m.status?"error":"abort",m,n,r)}},p(m,n)===!1)return m.abort(),g(null,"abort",m,n,r),m;if(n.xhrFields)for(a in n.xhrFields)m[a]=n.xhrFields[a];var $="async"in n?n.async:!0;m.open(n.type,n.url,$,n.username,n.password);for(a in c)_.apply(m,c[a]);return n.timeout>0&&(T=setTimeout(function(){m.onreadystatechange=b,m.abort(),g(null,"timeout",m,n,r)},n.timeout)),m.send(n.data?n.data:null),m},e.get=function(){return e.ajax(T.apply(null,arguments))},e.post=function(){var t=T.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=T.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,i){if(!this.length)return this;var o,a=this,s=t.split(/\s/),l=T(t,n,i),c=l.success;return s.length>1&&(l.url=s[0],o=s[1]),l.success=function(t){a.html(o?e("<div>").html(t.replace(r,"")).find(o):t),c&&c.apply(a,arguments)},e.ajax(l),this};var $=encodeURIComponent;e.param=function(e,t){var n=[];return n.add=function(e,t){this.push($(e)+"="+$(t))},j(n,e,t),n.join("&").replace(/%20/g,"+")}}(Zepto),function(e){e.fn.serializeArray=function(){var n,t=[];return e([].slice.call(this.get(0).elements)).each(function(){n=e(this);var i=n.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&t.push({name:n.attr("name"),value:n.val()})}),t},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(t,n){return t=t||[],e.extend(t,e.fn),t.selector=n||"",t.__Z=!0,t},isZ:function(t){return"array"===e.type(t)&&"__Z"in t}});try{getComputedStyle(void 0)}catch(t){var n=getComputedStyle;window.getComputedStyle=function(e){try{return n(e)}catch(t){return null}}}}(Zepto),define&&define("zepto",[],function(){return Zepto});!function(e){function l(e,t,n,i){return Math.abs(e-t)>=Math.abs(n-i)?e-t>0?"Left":"Right":n-i>0?"Up":"Down"}function c(){if(r=null,t.last){var n=e.Event("longTap");n.cancelTouch=d,t.el.trigger(n)}}function u(){r&&clearTimeout(r),r=null}function d(){n&&clearTimeout(n),i&&clearTimeout(i),a&&clearTimeout(a),r&&clearTimeout(r),n=i=a=r=null,t={}}function h(e,t){return e.type=="mouse"+t}var n,i,a,r,t={},s=750;e(document).ready(function(){var i,o,p,f=0,m=0,v="ontouchstart"in document?["touchstart","touchmove","touchend","touchcancel"]:["mousedown","mousemove","mouseup","mouseleave"];e(document).on(v[0],function(a){f=m=0,p=h(a,"down")?a:a.touches[0],a.touches&&1===a.touches.length&&t.x2&&(t.x2=void 0,t.y2=void 0),i=Date.now(),o=i-(t.last||i),t.el=e("tagName"in p.target?p.target:p.target.parentNode),n&&clearTimeout(n),t.x1=p.pageX,t.y1=p.pageY,o>0&&250>=o&&(t.isDoubleTap=!0),t.last=i,r=setTimeout(c,s)}).on(v[1],function(e){("mousemove"!=e.type||"last"in t)&&(p="mousemove"==e.type?e:e.touches[0],u(),t.x2=p.pageX,t.y2=p.pageY,f+=Math.abs(t.x1-t.x2),m+=Math.abs(t.y1-t.y2))}).on(v[2],function(i){if(u(),t.x2&&Math.abs(t.x1-t.x2)>30||t.y2&&Math.abs(t.y1-t.y2)>30)a=setTimeout(function(){t.el.trigger("swipe"),t.el.trigger("swipe"+l(t.x1,t.x2,t.y1,t.y2)),t={}},0);else if("last"in t)if(30>f&&30>m&&!i.cancelTap){var r=e.Event("tap");r.cancelTouch=d,t.el.trigger(r),t.isDoubleTap?(t.el&&t.el.trigger("doubleTap"),t={}):n=setTimeout(function(){n=null,t.el&&t.el.trigger("singleTap"),t={}},250)}else t={};f=m=0}).on(v[3],d),e(window).on("scroll",d)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})}(Zepto);!function(e,t){function y(e){return e.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function w(e){return i?i+e:e.toLowerCase()}var i,u,d,h,f,m,p,v,g,b,n="",s={Webkit:"webkit",Moz:"",O:"o"},o=window.document,l=o.createElement("div"),c=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,_={};e.each(s,function(e,a){return l.style[e+"TransitionProperty"]!==t?(n="-"+e.toLowerCase()+"-",i=a,!1):void 0}),u=n+"transform",_[d=n+"transition-property"]=_[h=n+"transition-duration"]=_[m=n+"transition-delay"]=_[f=n+"transition-timing-function"]=_[p=n+"animation-name"]=_[v=n+"animation-duration"]=_[b=n+"animation-delay"]=_[g=n+"animation-timing-function"]="",e.fx={off:i===t&&l.style.transitionProperty===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:n,transitionEnd:w("TransitionEnd"),animationEnd:w("AnimationEnd")},e.fn.animate=function(n,i,a,r,s){return e.isFunction(i)&&(r=i,a=t,i=t),e.isFunction(a)&&(r=a,a=t),e.isPlainObject(i)&&(a=i.easing,r=i.complete,s=i.delay,i=i.duration),i&&(i=("number"==typeof i?i:e.fx.speeds[i]||e.fx.speeds._default)/1e3),s&&(s=parseFloat(s)/1e3),this.anim(n,i,a,r,s)},e.fn.anim=function(n,i,a,r,s){var o,w,E,l={},x="",T=this,$=e.fx.transitionEnd,j=!1;if(i===t&&(i=e.fx.speeds._default/1e3),s===t&&(s=0),e.fx.off&&(i=0),"string"==typeof n)l[p]=n,l[v]=i+"s",l[b]=s+"s",l[g]=a||"linear",$=e.fx.animationEnd;else{w=[];for(o in n)c.test(o)?x+=o+"("+n[o]+") ":(l[o]=n[o],w.push(y(o)));x&&(l[u]=x,w.push(u)),i>0&&"object"==typeof n&&(l[d]=w.join(", "),l[h]=i+"s",l[m]=s+"s",l[f]=a||"linear")}return E=function(t){if("undefined"!=typeof t){if(t.target!==t.currentTarget)return;e(t.target).unbind($,E)}else e(this).unbind($,E);j=!0,e(this).css(_),r&&r.call(this)},i>0&&(this.bind($,E),setTimeout(function(){j||E.call(T)},1e3*i+25)),this.size()&&this.get(0).clientLeft,this.css(l),0>=i&&setTimeout(function(){T.each(function(){E.call(this)})},0),this},l=null}(Zepto);!function(e,t){e.matchMedia=function(){var t=0,n="sl-media-detect",i=e.fx.transitionEnd,a=e.fx.cssPrefix,r=e("<style></style>").append("."+n+"{"+a+"transition: width 0.001ms; width: 0; position: absolute; clip: rect(1px, 1px, 1px, 1px);}\n").appendTo("head");return function(a){var o,l,s=n+t++,c=[],u=1,d=[],h=0,f=function(e,t){-1==d.indexOf(e)&&(d.push(e),r.append("@media "+e+" { #"+s+" { width: "+u+"px; } }\n"),u++,("undefined"==typeof t||t)&&h++)};return f(a,!1),o=e('<div class="'+n+'" id="'+s+'"></div>').appendTo("body").on(i,function(){return h>0?void h--:(l.matches=1===o.width(),void e.each(c,function(t,n){e.isFunction(n)&&n.call(l,l)}))}),l={append:f,matches:1===o.width(),media:a,addListener:function(e){return c.push(e),this},removeListener:function(e){var t=c.indexOf(e);return~t&&c.splice(t,1),this}}}}()}(Zepto);!function(e,t){e.mediaQuery={ortchange:"screen and (width: "+window.innerWidth+"px)"},e(function(){e.matchMedia(e.mediaQuery.ortchange).addListener(function(){e(window).trigger("ortchange")}),e.matchMedia("screen and (height: "+window.innerHeight+"px)").addListener(function(){this.append("screen and (height: "+window.innerHeight+"px)"),e(window).trigger("heightchange")})})}(Zepto);define("util",function(){var l,e=Array.prototype,t=e.slice,n=e.concat,i=navigator.userAgent,a=i.match(/(iPhone|iPad|iPod).*OS\s([\d_]+)/i),r=i.match(/MSIE (\d+)/i),s=i.match(/(Android);?[\s\/]+([\d.]+)?/),o=!!s,c=0;a?l=a[2].split("_"):s?l=s[2].split("."):r&&(l=r[1].split("."));var u={ios:!!a,ie:!!r,android:o,osVersion:l?parseFloat(l[0]+"."+l[1]):0,guid:function(){return++c},extend:function(e){var t=this,n=function(){t.apply(this,arguments)},i=function(){this.constructor=n};i.prototype=t.prototype,n.prototype=new i;for(var a in e)n.prototype[a]=e[a];for(var a in t)n[a]=t[a];return n},random:function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},log:function(e){this.$log||(this.$log=$('<div style="height:40px;position:fixed;top:0;left:0;right:0;z-index:100000;background:#fff;"></div>').appendTo("body")),this.$log.html(e+"|"+this.$log.html())},indexOf:function(e,t){for(var n="function"==typeof t,i=e.length,a=0;i>a;a++)if(n?t(e[a],a):e[a]==t)return a;return-1},lastIndexOf:function(e,t){for(var n="function"==typeof t,i=e.length-1;i>=0;i--)if(n?t(e[i],i):e[i]==t)return i;return-1},first:function(e,t){for(var n,i=0,a=e.length;a>i;i++)if(n=e[i],t(n,i))return n;return null},find:function(e,t){for(var i,n=[],a=0,r=e.length;r>a;a++)i=e[a],t(i,a)&&n.push(i);return n},select:function(e,t){for(var n=[],i=e.length,a=0;i>a;a++)n.push(t(e[a],a));return n},pick:function(e,i){var r,a={};if(null==e)return a;if("function"==typeof i)for(r in e){var s=e[r];i(s,r,e)&&(a[r]=s)}else for(var o=n.apply([],t.call(arguments,1)),c=0,l=o.length;l>c;c++)r=o[c],r in e&&(a[r]=e[r]);return a},pad:function(e,t){var n="0000000000000000"+e;return n.substr(n.length-(t||2))},formatDate:function(e,t){"string"==typeof e&&/^\/Date\(\d+\)\/$/.test(e)?e=new Function("return new "+e.replace(/\//g,""))():"number"==typeof e&&(e=new Date(e));var n=e.getFullYear()+"",i=e.getMonth()+1,a=e.getDate(),r=e.getHours(),s=e.getMinutes(),o=e.getSeconds(),c=e.getMilliseconds()+"0000",l=this.pad;return(t||"yyyy-MM-dd HH:mm:ss").replace(/\y{4}/,n).replace(/y{2}/,n.substr(2,2)).replace(/M{2}/,l(i)).replace(/M/,i).replace(/d{2,}/,l(a)).replace(/d/,e).replace(/H{2,}/i,l(r)).replace(/H/i,r).replace(/m{2,}/,l(s)).replace(/m/,s).replace(/s{2,}/,l(o)).replace(/s/,o).replace(/f+/,function(e){return c.substr(0,e.length)})},style:function(e){var t=document,n=t.getElementsByTagName("head")[0],i=t.createElement("style");i.type="text/css";try{i.appendChild(t.createTextNode(e))}catch(a){i.styleSheet.cssText=e}return n.appendChild(i),i},template:function(e,t){var n="var __p=[];var $data=obj||{};with($data){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(e,t){return"',"+t.replace(/\\'/,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(e,t){return"');"+t.replace(/\\'/,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+'\');}return __p.join("");',i=new Function("obj",n);return t?i(t):i},encodeHTML:function(e){return(""+e).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#34;").split("'").join("&#39;")},getPath:function(e){return e.replace(/^http\:\/\/[^\/]+|\?.*$/g,"").toLowerCase()},cookie:function(e,t,n,i){if("undefined"==typeof t){var a=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=a?unescape(a[2]):null}if(null===typeof t){if(t=this.cookie(name),null==t)return;n=-1}if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),n=";expires="+r.toGMTString()}document.cookie=e+"="+escape(t)+(n||"")+";path="+(i||"/")},store:window.localStorage?function(e,t){return"undefined"==typeof t?JSON.parse(localStorage.getItem(e)):void(null===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t)))}:function(){return"undefined"==typeof value?JSON.parse(this.cookie(key)):void(null===value?this.cookie(key,null):this.cookie(key,JSON.stringify(value)))},noop:function(){},validateEmail:function(e){return/^[-_a-zA-Z0-9\.]+@([-_a-zA-Z0-9]+\.)+[a-zA-Z0-9]{2,3}$/.test(e)},validateMobile:function(e){return/^1[0-9]{10}$/.test(e)}};return u});define("bridge",function(e,t,n){var i=e("$"),a=e("util"),r=navigator.userAgent,s=a.ios,o=a.android,u=(Array.prototype.slice,i(window)),d=i('meta[name="api-base-url"]').attr("content");window.hybridFunctions={},window.complete=function(){s&&0!=h.length&&(h.shift(),0!=h.length&&(location.href=h.shift()))},window.trigger=window.app_trigger=function(){i.fn.trigger.apply(u,arguments)};var h=[],f=0,p=function(e,t,n){var a,i={method:e};if(n="function"==typeof t?t:n,t="function"==typeof t?null:t,i.params=t,"function"==typeof n&&(a="hybridCallback"+ ++f,i.callback=a,hybridFunctions[a]=function(){n.apply(null,arguments),delete hybridFunctions[a]}),m.isDevelopment)switch(i.method){case"exitLauncher":hybridFunctions[a]()}else s?alert(JSON.stringify(i)):o&&prompt(JSON.stringify(i))},m={isInApp:/SLApp$/.test(r),isAndroid:o,android:o,ios:s,versionName:"1.0",exec:p,exitLauncher:function(e){p("exitLauncher",function(){e&&e()})},tip:function(e){p("tip",e+"")},pickImage:function(e){p("pickImage",e)},takePhoto:function(e){setTimeout(function(){p("takePhoto",e)},0)},queryThumbnailList:function(e){p("queryThumbnailList",e)},pickColor:function(e){p("pickColor",e)},pay:function(e,t){p("pay",e,t)},share:function(){p("share")},isDevelopment:"Win32"==navigator.platform||"Win64"==navigator.platform,url:function(e){return/^http\:\/\//.test(e)?e:d+e},post:function(e,t,n,i){i="function"==typeof n?n:i,n="function"==typeof n?null:n,p("post",{url:this.url(e),files:n,data:t},i)},exit:function(){p("exit")},update:function(e,t,n){p("updateApp",{downloadUrl:e,versionName:t},n)}},v=!1;return u.on("back",function(){var e=location.hash;""==e||"#"===e||"/"===e||"#/"===e?v?m.exit():(v=!0,setTimeout(function(){v=!1},2e3),m.tip("再按一次退出程序")):history.back()}),m});define("graphics/matrix2d",function(){function t(t,e,n,i,a,r){this.setValues(t,e,n,i,a,r)}var e=t.prototype;return t.DEG_TO_RAD=Math.PI/180,t.identity=null,e.setValues=function(t,e,n,i,a,r){return this.a=null==t?1:t,this.b=e||0,this.c=n||0,this.d=null==i?1:i,this.tx=a||0,this.ty=r||0,this},e.append=function(t,e,n,i,a,r){var s=this.a,o=this.b,c=this.c,l=this.d;return(1!=t||0!=e||0!=n||1!=i)&&(this.a=s*t+c*e,this.b=o*t+l*e,this.c=s*n+c*i,this.d=o*n+l*i),this.tx=s*a+c*r+this.tx,this.ty=o*a+l*r+this.ty,this},e.prepend=function(t,e,n,i,a,r){var s=this.a,o=this.c,c=this.tx;return this.a=t*s+n*this.b,this.b=e*s+i*this.b,this.c=t*o+n*this.d,this.d=e*o+i*this.d,this.tx=t*c+n*this.ty+a,this.ty=e*c+i*this.ty+r,this},e.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.appendTransform=function(e,n,i,a,r,s,o,c,l){if(r%360)var u=r*t.DEG_TO_RAD,d=Math.cos(u),h=Math.sin(u);else d=1,h=0;return s||o?(s*=t.DEG_TO_RAD,o*=t.DEG_TO_RAD,this.append(Math.cos(o),Math.sin(o),-Math.sin(s),Math.cos(s),e,n),this.append(d*i,h*i,-h*a,d*a,0,0)):this.append(d*i,h*i,-h*a,d*a,e,n),(c||l)&&(this.tx-=c*this.a+l*this.c,this.ty-=c*this.b+l*this.d),this},e.prependTransform=function(e,n,i,a,r,s,o,c,l){if(r%360)var u=r*t.DEG_TO_RAD,d=Math.cos(u),h=Math.sin(u);else d=1,h=0;return(c||l)&&(this.tx-=c,this.ty-=l),s||o?(s*=t.DEG_TO_RAD,o*=t.DEG_TO_RAD,this.prepend(d*i,h*i,-h*a,d*a,0,0),this.prepend(Math.cos(o),Math.sin(o),-Math.sin(s),Math.cos(s),e,n)):this.prepend(d*i,h*i,-h*a,d*a,e,n),this},e.rotate=function(e){e*=t.DEG_TO_RAD;var n=Math.cos(e),i=Math.sin(e),a=this.a,r=this.b;return this.a=a*n+this.c*i,this.b=r*n+this.d*i,this.c=-a*i+this.c*n,this.d=-r*i+this.d*n,this},e.skew=function(e,n){return e*=t.DEG_TO_RAD,n*=t.DEG_TO_RAD,this.append(Math.cos(n),Math.sin(n),-Math.sin(e),Math.cos(e),0,0),this},e.scale=function(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this},e.translate=function(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this},e.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},e.invert=function(){var t=this.a,e=this.b,n=this.c,i=this.d,a=this.tx,r=t*i-e*n;return this.a=i/r,this.b=-e/r,this.c=-n/r,this.d=t/r,this.tx=(n*this.ty-i*a)/r,this.ty=-(t*this.ty-e*a)/r,this},e.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},e.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},e.transformPoint=function(t,e,n){return n=n||{},n.x=t*this.a+e*this.c+this.tx,n.y=t*this.b+e*this.d+this.ty,n},e.decompose=function(e){null==e&&(e={}),e.x=this.tx,e.y=this.ty,e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var n=Math.atan2(-this.c,this.d),i=Math.atan2(this.b,this.a),a=Math.abs(1-n/i);return 1e-5>a?(e.rotation=i/t.DEG_TO_RAD,this.a<0&&this.d>=0&&(e.rotation+=e.rotation<=0?180:-180),e.skewX=e.skewY=0):(e.skewX=n/t.DEG_TO_RAD,e.skewY=i/t.DEG_TO_RAD),e},e.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)},e.toString=function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty+")"},t});define("graphics/tween",function(t,e,n){n.exports={linear:function(t,e,n,i){return n*t/i+e},ease:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeIn:function(t,e,n,i){return n*(t/=i)*t+e},easeOut:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutCubic:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,i){return n*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},easeOutQuint:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},easeOutSine:function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},easeInOutSine:function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},easeInExpo:function(t,e,n,i){return 0==t?e:n*Math.pow(2,10*(t/i-1))+e},easeOutExpo:function(t,e,n,i){return t==i?e+n:n*(-Math.pow(2,-10*t/i)+1)+e},easeInOutExpo:function(t,e,n,i){return 0==t?e:t==i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOutCirc:function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOutCirc:function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,i,a,r){if(0==t)return e;if(1==(t/=i))return e+n;if(r||(r=.3*i),!a||a<Math.abs(n)){a=n;var s=r/4}else var s=r/(2*Math.PI)*Math.asin(n/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-s)*Math.PI/r))+e},easeOutElastic:function(t,e,n,i,a,r){if(0==t)return e;if(1==(t/=i))return e+n;if(r||(r=.3*i),!a||a<Math.abs(n)){a=n;var s=r/4}else var s=r/(2*Math.PI)*Math.asin(n/a);return a*Math.pow(2,-10*t)*Math.sin(2*(t*i-s)*Math.PI/r)+n+e},easeInOutElastic:function(t,e,n,i,a,r){if(0==t)return e;if(2==(t/=i/2))return e+n;if(r||(r=.3*i*1.5),!a||a<Math.abs(n)){a=n;var s=r/4}else var s=r/(2*Math.PI)*Math.asin(n/a);return 1>t?-.5*a*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-s)*Math.PI/r)+e:a*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*i-s)*Math.PI/r)*.5+n+e},easeInBack:function(t,e,n,i,a){return void 0==a&&(a=1.70158),n*(t/=i)*t*((a+1)*t-a)+e},easeOutBack:function(t,e,n,i,a){return void 0==a&&(a=1.70158),n*((t=t/i-1)*t*((a+1)*t+a)+1)+e},easeInOutBack:function(t,e,n,i,a){return void 0==a&&(a=1.70158),(t/=i/2)<1?n/2*t*t*(((a*=1.525)+1)*t-a)+e:n/2*((t-=2)*t*(((a*=1.525)+1)*t+a)+2)+e},easeInBounce:function(t,e,n,i){return n-Tween.Bounce.easeOut(i-t,0,n,i)+e},easeOutBounce:function(t,e,n,i){return(t/=i)<1/2.75?7.5625*n*t*t+e:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,i){return i/2>t?.5*Tween.easeInOutBounce(2*t,0,n,i)+e:.5*Tween.easeInOutBounce(2*t-i,0,n,i)+.5*n+e}}});define("core/base",function(t,e,n){Object.create||(Object.create=function(t){var e=function(){};return e.prototype=t,new e}),Date.now||(Date.now=function(){return+new Date});var i=function(){var t=this,e=Array.prototype.slice.call(arguments),n=e.shift();if(n)for(var i in n)t.options[i]=n[i];t.initialize.apply(t,e),t.options.initialize&&t.options.initialize.apply(t,e)};i.prototype={options:{},initialize:function(){}},i.extend=function(t,e){var a,n=this;"function"!=typeof t&&(e=t,t=function(){n.apply(this,arguments)});var r=function(){this.constructor=t};if(r.prototype=n.prototype,t.prototype=new r,a=e.options,"undefined"!=typeof a){for(var s in a)t.prototype.options[s]=a[s];delete e.options}for(var s in e)t.prototype[s]=e[s];return t.__super__=n.prototype,t.extend=i.extend,t},window.sl=window.slan={},n.exports=i});define("core/promise",["./linklist"],function(t,e,n){var i=t("./linklist"),a=Array.prototype.slice,r=/^\$(\d+)$/,s=function(t,e,n){for(var o,i=[],a=0,s=t.length;s>a;a++)o=t[a],i.push("string"==typeof o?r.test(o)?e[parseInt(o.match(r)[1])]:o.replace(/^\$\$/,"$"):o);return i.push(n),i},o=function(t,e,n){if(!(this instanceof o))return new o(t,e,n);var a=this;this.queue=new i,this.state=2,this.resolveSelf=function(){a.resolve.apply(a,arguments)},t&&(this.state=0,this.then(t,e,n))};o.prototype={reject:function(t){this.resolve(t||"unknow error",null)},resolve:function(){var i,r,s,t=this,e=a.call(arguments),n=t.queue.shift();if(n)if(t.state=1,i=n[0],r=n[1],i instanceof o)i.then(t.resolveSelf);else if("function"==typeof i)s=i.apply(r,e),s instanceof o?s!==t&&s.then(t.resolveSelf):t.resolve(null,s);else if(i instanceof Array)for(var c=[],l=[],u=0,d=0,h=i.length;h>d;d++)!function(n,i,a){"function"==typeof n&&(n=n.apply(r,e)),n instanceof o?n.then(function(e,n){e&&(c[i]=e),u++,l[i]=n,u>=a&&t.resolve(c,l)}):(u++,l[i]=n,u>=a&&t.resolve(null,l))}(i[d],d,h);else t.resolve(null,e);else t.state=0;return t},when:function(t,e){return t instanceof Array||(t=[t]),this.queue.append([t,e||this]),1!=this.state&&this.resolve(),this},map:function(t,e,n){var i=this,a=function(){var n=arguments;return i._count=t.length,i.result=[],i.errors=[],t.forEach(function(t,a){t instanceof Array||(t=[t]),e.apply(this,s(t,n,function(t,e){i.next(a,t,e)}))}),i};return i.queue.append([a,n||this]),i},each:function(t,e,n){var i=this,a=function(){return i._count=t.length,i.result=[],i.errors=[],t.forEach(function(t,n){e.apply(this,[n,t])}),i};return i.queue.append([a,n||this]),i},next:function(t,e,n){this._count--,e&&(this.errors[t]=e),this.result[t]=n,this._count<=0&&this.resolve(this.errors.length?this.errors:null,this.result)},bind:function(t){var e=this;return function(){e.then(a.call(arguments),t,this)}},then:function(t,e,n){var a,i=this;return t instanceof Array?(a=e,e=function(){return a.apply(this,s(t,arguments,i.resolveSelf)),i}):(n=e,e=t,t=null),i.queue.append([e,n||this]),i.state||i.resolve(),i}},o.resolve=function(){return(new o).resolve()},n.exports=o});define("core/linklist",function(t,e,n){var i=function(){this._idlePrev=this,this._idleNext=this},r=function(t){return t._idlePrev==t?null:t._idlePrev},a=function(t){t._idleNext&&(t._idleNext._idlePrev=t._idlePrev),t._idlePrev&&(t._idlePrev._idleNext=t._idleNext),t._idleNext=null,t._idlePrev=null};i.prototype={length:0,init:function(t){t={data:t},this.list=t,this.length=1,t._idleNext=t,t._idlePrev=t},get:function(t){var e=null;return this.each(function(n){return t(n)===!0?(e=n,!1):void 0}),e},find:function(t){var e=[];return this.each(function(n){t(n)===!0&&e.push(n)}),e},first:function(){return this._idlePrev!=this?this._idlePrev.data:null},peek:function(){return this._idlePrev==this?null:this._idlePrev},each:function(t){for(var n,e=this._idlePrev;e!=this&&(n=e._idlePrev,t.call(e,e.data)!==!1);)e=n},next:r,append:function(t,e){return e||(t={data:t}),t._idleNext=this._idleNext,this._idleNext._idlePrev=t,t._idlePrev=this,this._idleNext=t,this.length++,t},contains:function(t){var e=!1;return this.each(function(n){return t===n?(e=!0,!1):void 0}),e},shift:function(){var t=this._idlePrev;return t!=this?(this._remove(t),t.data):null},_remove:function(t){0!=this.length&&(this.length--,a(t))},remove:function(t){var e=this;e.each(function(n){return n===t?(e._remove(this),!1):void 0})},isEmpty:function(){return this._idlePrev==this}},n.exports=i});define("core/event",function(t,e,n){function l(t,e,n){(t||"").split(s).forEach(function(t){n(t,e)})}function u(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function d(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function h(t,e,n,i){var r,a;return a=d(e),a.ns&&(r=u(a.ns)),t.filter(function(t){return!(!t||a.e&&t.e!==a.e||a.ns&&!r.test(t.ns)||n&&t.cb!==n&&t.cb._cb!==n||i&&t.ctx!==i)})}function f(t,e){return this instanceof f?(e&&i.extend(this,e),this.type=t,this):new f(t,e)}var i=t("$"),r=t("./base"),a=[].slice,s=/\s+/,o=function(){return!1},c=function(){return!0};return f.prototype={isDefaultPrevented:o,isPropagationStopped:o,preventDefault:function(){this.isDefaultPrevented=c},stopPropagation:function(){this.isPropagationStopped=c}},r.event={createEvent:f,on:function(t,e,n){var r,i=this;return e?(r=this._events||(this._events=[]),l(t,e,function(t,e){var a=d(t);a.cb=e,a.ctx=n,a.ctx2=n||i,a.id=r.length,r.push(a)}),this):this},one:function(t,e,n){var i=this;return e?(l(t,e,function(t,e){var r=function(){return i.off(t,r),e.apply(n||i,arguments)};r._cb=e,i.on(t,r,n)}),this):this},off:function(t,e,n){var i=this._events;return i?t||e||n?(l(t,e,function(t,e){h(i,t,e,n).forEach(function(t){delete i[t.id]})}),this):(this._events=[],this):this},trigger:function(t){var n,i,r,s,o,e=-1;if(!this._events||!t)return this;if("string"==typeof t&&(t=new f(t)),n=a.call(arguments,1),t.args=n,n.unshift(t),i=h(this._events,t.type))for(s=i.length;++e<s;)if((r=t.isPropagationStopped())||!1===(o=i[e]).cb.apply(o.ctx2,n)){r||(t.stopPropagation(),t.preventDefault());break}return this}},r.Event=f,r.event});define("core/view",function(t,e,n){var i=t("$"),r=t("util"),a=t("./base"),s=t("./event"),o=Array.prototype.slice,c=function(){var e,t=this,n=o.call(arguments),a=n.shift();t._bindListenTo=[],i.isPlainObject(a)?(e=a,a=null):e=n.shift(),t.options=i.extend({},t.options,e),t.options.className&&(t.className=t.options.className),t.options.el&&(t.el=t.options.el),t.cid=r.guid(),t.setElement(a||t.el),t.initialize.apply(t,n),t.options.initialize&&t.options.initialize.apply(t,n),t.on("Destroy",t.onDestroy)};c.prototype={options:{},initialize:r.noop,setElement:function(t,e){return t&&(this.$el&&this.undelegateEvents(),this.$el=i(t),this.el=this.$el[0],this.className&&this.$el.addClass(this.className),e!==!1&&this.delegateEvents()),this},on:s.on,one:s.one,off:s.off,trigger:s.trigger,undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},delegateEvents:function(){return this.listen(this.events),this.listen(this.options.events),this},listen:function(t,e){var n=this;if(e){var a=t.split(" "),s=a.shift().replace(/,/g,".delegateEvents"+n.cid+" ");e=i.proxy(i.isFunction(e)?e:n[e],n),a.length>0&&""!==a[0]?n.$el.on(s,a.join(" "),e):n.$el.on(s,e)}else for(var r in t)n.listen(r,t[r]);return n},listenTo:function(t){var e=o.apply(arguments),n=e[e.length-1];return"function"!=typeof t.on&&(t=i(t)),e[0]=t,e[e.length-1]=i.proxy(n,this),this._bindListenTo.push(o.apply(e)),e.shift().on.apply(t,e),this},$:function(t){return this.$el.find(t)},onDestroy:r.noop,destroy:function(){var n,e=(this.$el,this);i.each(this._bindListenTo,function(t,e){n=e.shift(),n.off.apply(n,e)}),e.undelegateEvents(),e.$el.remove(),e.trigger("Destroy")}},c.extend=function(){var r,t=this,e=o.call(arguments),n=e[0];return"function"!=typeof n?(n=null,e.unshift({})):e[0]={},r=i.extend.apply(i,e),n=a.extend.apply(t,n?[n,r]:[r]),n.prototype.events=i.extend({},n.__super__.events,n.prototype.events),n.extend=arguments.callee,n},n.exports=c});define("core/model",function(t,e,n){var i=t("$"),r=t("util"),a=(t("./base"),t("./event")),o=Array.prototype.slice,c=function(t,e,n,r,s,a){"function"==typeof n&&(a=s,s=r,r=n,n=null),i.ajax({url:t,type:e,data:n,dataType:"json",success:function(t){r.call(a,t)},error:function(t){s.call(a,t)}})};i.extend(c,{get:function(t,e){c(this.url,"GET",function(e){var n;this.model?this.set(e):(n=i(this.template.html(e)),this.generate(n,e)),t.call(this,e,n)},e,this)},post:function(t,e){var n=this.toJSON();c(this.url,"POST",n,function(e){this.parent&&this.parent instanceof w&&this.parent.add(n),t.call(this,e,n)},e,this)},put:function(t,e){c(this.url,"PUT",this.toJSON(),t,e,this)},"delete":function(t,e){c(this.url,"DELETE",data,function(e){this.parent&&this.parent instanceof w&&this.parent.remove(data),t.call(this,e,data)},e,this)}});var l={date:r.formatDate,json:function(t){return JSON.stringify(t instanceof _||t instanceof w?t.data:t)},join:function(t,e){return t instanceof w?t.data.join(e):t.join(e)},lowercase:function(t){return t.toLowerCase()},uppercase:function(t){return t.toUpperCase()},concat:function(){return o.call(arguments).join("")},round:function(t){return Math.round(t)},format:function(t){var e=o.call(arguments),n=e[1];return e.splice(1,1),n.replace(/\{(\d+)\}/g,function(t,n){return e[n]})},_addListener:function(t,e,n,i,r,s,a){var c,o=!1;if(i&&"number"==typeof i&&(c="_bind_filter"+r.prop+i+"_"+a,e[c]?(c="_bind_filter"+r.prop+"_"+a,i[c]||(i[c]=o=!0)):e[c]=o=!0,o)){s=s.split(".");var u=s.pop();(s.length<=0?t:t.get(s)).on("change"+(u?":"+u:""),function(){e._setProp(i,r.prop,r.filter(l,e,e.data[n]))})}}},u=/\s*\|\s*([a-zA-Z_1-9]+)((?:\s*\:\s*([a-zA-Z_1-9\.]+|\'[^\']+?\'))*)/g,h=/\s*\:\s*([a-zA-Z_1-9\.]+|\'[^\']+?\')/g,d=function(t,e){var i="var self=this;",r="",s=0;return t.replace(u,function(t,n,a){i+="value=Filter."+n+"(value",a.replace(h,function(t,n){if("'"==n[0])i+=","+n;else if(e)if(n==e.alias)i+=",model.data",r+="if(el)Filter._addListener(model.parent,model,key,el,this,model._key,"+s++ +");";else{var a=e.alias;if(0==n.indexOf(a+"."))i+=",model.data"+n.substr(a.length),r+='if(el)Filter._addListener(model,model,key,el,this,"'+n.substr(a.length+1)+'",'+s++ +");";else{var o=n.split(".");a=e.modelAlias[o[0]],a?(o.shift(),n=o.join("."),i+=',(function(){parent=model.parent.parent;while(parent){if( parent.key=="'+a+'^child"){  if(el)Filter._addListener(parent,model,key,el,self,"'+n+'",'+s++ +"); return parent.data."+n+"; } parent=parent.parent.parent; } })()"):(i+=",model.root.data."+n,r+='if(el)Filter._addListener(model.root,model,key,el,this,"'+n+'",'+s++ +");")}}else i+=",model.root.data."+n,r+='if(el)Filter._addListener(model.root,model,key,el,this,"'+n+'",'+s++ +");"}),i+=");"}),i+="return value;",new Function("Filter","model","value","key","el",r+i)},f=/([a-zA-Z_1-9]+)\s+in\s+([a-zA-Z_1-9]+(?:\.[a-zA-Z_1-9]+){0,})(?:\s*\|\s*filter\s*\:\s*([a-zA-Z_1-9\.]+)(?:\s*\:\s*([a-zA-Z_1-9\.]+)){0,1}){0,1}(?:\s*\|\s*orderBy\s*\:\s*([a-zA-Z_1-9\.]+)(?:\s*\:\s*([a-zA-Z_1-9\.]+)){0,1}){0,1}/g,p=/\b([a-zA-Z_1-9-]+)\s*\:\s*([a-zA-Z_1-9]+)((?:\.[a-zA-Z_1-9]+)*)((?:\s*\|\s*[a-zA-Z_1-9]+(?:\s*\:\s*(?:[a-zA-Z_1-9\.]+|'[^']+'))*)*)(\s|,|$)/g,m=function(t,e){return t.filter(e).add(t.find(e))},v=function(t){{var a,o,n=this.repeats={},r=this.bindings={},c=(this.models={},0);m(t,"[sn-repeat]").each(function(){o=i(this);var t=this,e=this.getAttribute("sn-repeat"),r=o.parents("[sn-repeat-alias]"),s={};r.each(function(){s[this.getAttribute("sn-repeat-alias")]=this.getAttribute("sn-repeat-name")}),e.replace(f,function(e,i,r,o,c,l,u){var f,p,h=r.split("."),d=h.length;1!==d&&(f=h[0],p=s[f],p&&(h[0]=p+"^child",r=h.join("."))),t.setAttribute("sn-repeat-alias",i),t.setAttribute("sn-repeat-name",r);var m=document.createElement("script");m.setAttribute("type","text/placeholder");var v,g={orderBy:l,reverse:u,filterName:o,comparator:c,collectionName:r,alias:i,modelAlias:s,template:t};1==d&&(g.placeHolder=m),a=n[r],a?v=r+"_"+a.push(g):(n[r]=[g],v=r+"_1"),g.placeHolderName=v,m.setAttribute("sn-placeholder",v),t.parentNode.insertBefore(m,t)})}).remove()}for(var u in n)for(var v,h=n[u],g=0,_=h.length;_>g;g++){v=h[g],o=i(v.template);var b;m(o,"[sn-binding],[sn-model]").each(function(){var i,s,t=this,e=this.getAttribute("sn-binding"),n=this.getAttribute("sn-model");t.setAttribute("sn-id",++c),n&&(i=n.split("."),s=i.shift(),s==v.alias?(this.setAttribute("sn-collection",u),this.setAttribute("sn-model",i.join("."))):(b=v.modelAlias[s],b&&(this.setAttribute("sn-collection",b),this.setAttribute("sn-model",i.join("."))))),e&&e.replace(p,function(t,e,n,i,s){n==v.alias?n=u+"^child"+i:(b=v.modelAlias[n],b&&(n=b+"^child"+i)),s&&(e={prop:e,filter:d(s,v)});var a=r[n];a||(a=r[n]=[]),a.push({el:c,prop:e})})})}m(t,"[sn-binding]").each(function(){var n,t=this.getAttribute("sn-binding"),e=this;t.replace(p,function(t,i,s,a,o){s+=a,o&&(i={prop:i,filter:d(o)}),n=r[s],n||(n=r[s]=[]),n.push({el:e,prop:i})})})},g=function(t,e,n){switch(e){case"text":t.innerHTML=r.encodeHTML(n);break;case"html":t.innerHTML=n;break;case"display":t.style.display=n?"":"none";break;default:t.setAttribute(e,n)}},_=function(t,e,n,r){if(t&&!this.created){var s={};this.$el=r,this.model=s,this._key=e,this.key=e,this.root=this,this.data=i.isArray(t)?{$data:t}:t,n instanceof _?(this.parent=n,n.key&&(this.key=n.key+"."+this.key),this.root=n.root):n instanceof w&&(this.parent=n,this.key=n.key+"^child",this.root=n.root),this.set(t),this.created=!0}};_.prototype={constructor:_,one:a.one,on:a.on,off:a.off,trigger:a.trigger,_syncView:function(t,e){var i,r,s,t,n=this.root.finder.bindings[t&&this.key?this.key+"."+t:this.key||t];if(n)for(var a=0,o=n.length;o>a;a++)i=n[a],r=i.el,s=i.prop,"string"!=typeof s&&(e=s.filter(l,this,e,t,r),s=s.prop),this._setProp(r,s,e);return this},_syncOwnView:function(){return this.root!=this&&(this._syncView("",this.data),this.created&&this.parent instanceof _&&this.parent.trigger("change:"+this._key,this.data),this.parent.needUpdateView&&this.parent._syncOwnView()),this},_setProp:function(t,e,n){"number"==typeof t?m(this.$el,'[sn-id="'+t+'"]').each(function(){g(this,e,n)}):g(t,e,n)},get:function(t){if("string"!=typeof t){for(var e=this.model[t[0]],n=1,i=t.length;i>n;n++)e=(e.models||e.model)[t[n]];return e}return this.model[t]},set:function(t,e){var r,s,a,n=this,o=this.model;if(n.needUpdateView=!1,i.isPlainObject(t))a=t;else{if("undefined"==typeof e)return e=t,t="",this.parent&&(this.parent.data[this.parent.models.indexOf(this)]=e),this.data=e,void this._syncOwnView();var c=t.split(".");if(c.length>1)return t=c.pop(),void this.get(c).set(t,e);(a={})[t]=e}var u,h,l=[],s=!1;for(var d in a)if(r=o[d],h=a[d],r!==h){if(r instanceof _)r.set(h);else if(r instanceof w){if(!i.isArray(h))throw new Error("[Array to "+typeof h+" error]不可改变"+d+"的数据类型");r.set(h)}else this.data[d]=h,i.isPlainObject(h)?o[d]=new _(h,d,this,this.$el):i.isArray(h)?(o[d]=new w,l.push(d)):(o[d]=h,this._syncView(d,h),this.created&&this.trigger("change:"+d,h));s||(s=!0)}for(var f=0,p=l.length;p>f;f++)t=l[f],u=o[t],o[t].constructor(this.data[t],t,this);return s&&this.root!=this&&this._syncOwnView(),n.needUpdateView=!0,this},toJSON:function(){return i.extend(!0,{},this.data)}};var b=function(t,e){"string"==typeof e&&(e=e.split("."));for(var n=0,i=e.length;i>n;n++)t=t[e[n]];return t},y=function(t,e){this.list=[],this.collection=e,i.extend(this,t),!this.placeHolder&&e.parent.$el&&(this.placeHolder=e.parent.$el.find('[sn-placeholder="'+this.placeHolderName+'"]')[0])};y.prototype={filter:function(t){var e=this.filterName,n=this.comparator,i=!0;if(e){if(e=this.getValue(e),!e)return!0;switch("true"==n&&(n=!0),typeof e){case"function":i=e(t);break;case"object":var r;for(var s in t)r=t[s];break;case"string":break;default:i=t}}return i},sort:function(t,e){e!=this.reverse},getValue:function(t){var e=t.split("."),n=this.modelAlias[e[0]];return n?void 0:b(this.collection.root.data,t)},add:function(t,e,n){var a=(this.list,this.orderBy,this.reverse,{model:t,el:e});this.list.push(a),this.filter(t.data)&&(this.fragment?this.fragment.appendChild(e):this.placeHolder.parentNode.insertBefore(e,this.placeHolder))},remove:function(t){for(var e=this.list.length-1;e>=0;e--)if(this.list[e].model==t){this.list.splice(e,1);break}}};var w=function(t,e,n){if(t){this.models=[],this.data=[],this.key=e,this._key=e,this.repeats=[],this.parent=n,n.key&&(this.key=n.key+"."+this.key),this.root=n.root;var s,i=this.root.finder.repeats[this.key];if(i)for(var a=0,o=i.length;o>a;a++)s=new y(i[a],this),this.repeats.push(s);n.data[e]=this.data,this.set(t)}};w.prototype={constructor:w,model:_,forEach:function(t){for(var e,n=0,i=this.models.length;i>n;n++)e=this.models[n],t(e,n)},append:function(t){this.fragment(function(){for(var e=0,n=t.length;n>e;e++)this.add(t[e],!0)})},add:function(t,e){this.needUpdateView=!1;var n,r=new this.model;if(this.models.push(r),this.data.push(t),this.repeats)for(var s,a=0,o=this.repeats.length;o>a;a++){s=this.repeats[a];var c=s.template.cloneNode(!0),l=i(c);c.snModel=r,s.add(r,c),n=n?n.add(l):l}return r.constructor(t,this.key,this,n),e||this._syncOwnView(),this.needUpdateView=!0,r},_syncOwnView:function(){return this.parent._syncView(this._key,this.data),this.created&&this.parent.trigger("change:"+this._key,this.data),this.parent.needUpdateView&&this.parent._syncOwnView(),this},fragment:function(t){for(var e=0,n=this.repeats.length;n>e;e++)this.repeats[e].fragment=document.createDocumentFragment();t.call(this);for(var i,e=0,n=this.repeats.length;n>e;e++)i=this.repeats[e],i.placeHolder.parentNode.insertBefore(i.fragment,i.placeHolder),i.fragment=null;this._syncOwnView()},set:function(t){this.needUpdateView=!1,this.fragment(function(){var e,n=t.length,i=this.models.length;if(i>n)for(var r=i-1;r>=n;r--)this.remove(r,!0);for(var r=0;n>r;r++)e=t[r],i>r?this.models[r].set(e):this.add(e,!0)}),this.needUpdateView=!0},get:function(t){return this.models[t]},remove:function(t,e){var n,i;if("number"!=typeof t&&(t=this.models.indexOf(t)),this.repeats){for(var r=0,s=this.repeats.length;s>r;r++)n=this.repeats[r],i=n.list[t].el,i.parentNode.removeChild(i),n.list.splice(t,1);this.models.splice(t,1),this.data.splice(t,1),e||this._syncOwnView()}}};var x=function(t,e){this.created||(this.root=this,this.data={},this.model={},this.key="",this.load(t),e&&this.set(e),this.created=!0)};x.prototype=Object.create(_.prototype),i.extend(x.prototype,{constructor:x,load:function(t){return this.finder=new v(t),this.$el=t.on("input change","[sn-model]",i.proxy(this._inputChange,this)),this},_inputChange:function(t){var e=t.currentTarget,n=e.getAttribute("sn-model"),r=e.getAttribute("sn-collection");r?i(e).closest('[sn-repeat-name="'+r+'"]')[0].snModel.set(n,e.value):this.set(n,e.value)},destory:function(){this.$el.off("input change","[sn-model]",this._inputChange)}}),x.extend=_.extend=w.extend=r.extend,e.ViewModel=x,e.filter=e.Filter=l,e.http=c});define("core/page",function(t,e,n){t("../widget/tip");var i=t("$"),r=t("util"),a=(t("./base"),t("./view")),o=t("./promise"),l=(t("../widget/dialog"),r.noop),h=(r.indexOf,Array.prototype.slice),d=r.getPath,f=a.extend({options:{route:null},application:null,el:'<div class="view"></div>',_setRoute:function(t){this.route=t,this.hash=t.hash,this.url=t.url,this.path=t.path,this._queries=this.queries,this.queries=i.extend({},t.queries)},queryString:function(t,e){if("undefined"==typeof e)return this.route.queries[t];null===e||e===!1||""===e?delete this.route.queries[t]:this.route.queries[t]=e||"";var n=i.param(this.route.queries);this.application.to(this.route.path+(n?"?"+n:""))},loadTemplate:function(){var t=this,e=1,n=function(){e--,0==e&&(t.$el.html(t.razor.html(t.model)).appendTo(t.application.$el),t.trigger("Create"),t.promise.resolve())};return t.route.api&&(e++,i.ajax({url:t.route.api,type:"GET",dataType:"json",success:function(e){t.model=e,n(e)},error:function(t){n({success:!1,content:t.responseText})}})),seajs.use(t.route.template,function(e){t.razor=e,n()}),t.promise},initialize:function(){var t=this,e=o.resolve();t.promise=e,t.className=t.el.className,t._setRoute(t.options.route),t.application=t.options.application,t.on("Start",t.onStart),t.on("Resume",t.onResume),t.on("Show",t.onShow),t.on("Pause",t.onPause),t.on("QueryChange",t.onQueryChange),t.on("QueryChange",t.checkQuery),t.$el.data("path")||(t.$el.data("url",t.url).data("path",t.path),e.then(t.loadTemplate,t)),e.then(t.onCreate,t).then(function(){t.trigger("Start"),t.checkQuery()})},onCreate:l,onStart:l,onResume:l,onShow:l,onStop:l,onRestart:l,onPause:l,onQueryChange:l,then:function(t){return this.promise.then(t,this),this},_queryActions:{},checkQuery:function(){var s,t=this,e=t.queries,n=t._queries,r=t._queryActions;r&&i.each(r,function(t,i){if(s=e[t]||"",s&&!n||n&&s!=n[t]){var r=i.cls[i.map[s]].__query_action;r.apply(i.cls,r.__arguments),r.__arguments=void 0}})},bindQueryAction:function(t,e,n){var a,s=this;return i.each(n,function(n,i){a=function(){var i=h.apply(arguments),r=arguments.callee.__query_action;s.queryString(t)==n?r.apply(e,i):(r.__arguments=i,s.queryString(t,n))},a.__query_action=e[i],e[i]=a}),this._queryActions[t]={cls:e,map:n},this},onActivityResult:function(t,e){this.listenTo(this.application,t,e)},setResult:function(){this.application.trigger.apply(this.application,arguments)},compareUrl:function(t){return d(t)===this.route.path.toLowerCase()}});sl.Page=f,n.exports=f});define("core/route",function(t,e,n){var i=function(t){return(t.replace(/^#+|\/$/,"")||"/").toLowerCase()},r=function(t,e){var i,r,s,a,o,l,n=[];for(var c in t){if(i=t[c],r=[],l="^(?:/{0,1})"+c.replace(/(\/|^|\?)\{((?:.+?\{[^\}]+\}){0,}[^\}]*)\}/g,function(t,e,n){return o=n.split(":"),o.length>1&&(r.push(o.shift()),n=o.join(":")),e+"("+n+")"})+"$","string"==typeof i)throw new Error("Route options error");s=i.root||"/",a="/"!=s?s.replace(/^\//,"")+"/":"",n.push({regex:new RegExp(l),parts:r,template:a+i.template,view:a+i.controller,api:i.api,root:s})}this.isDebug=e!==!1,this.routes=n};r.prototype.match=function(t){var a,l,c,e=null,n={},r=t=i(t),s=t.indexOf("?"),o=this.routes;-1!=s?(a=t.substr(s+1),t=t.substr(0,s),a.replace(/(?:^|&)([^=&]+)=([^&]*)/g,function(t,e,i){return n[e]=decodeURIComponent(i),""})):a="";for(var u=0,h=o.length;h>u;u++)if(l=o[u],c=l.regex?t.match(l.regex):null){e={path:c[0],url:r,hash:"#"+r,root:l.root,template:l.template,"package":this.isDebug?!1:"/"==l.root?"controller":l.root.replace(/^\//,"")+"/controller",view:l.view,data:{},queryString:a,queries:n};for(var d=0,f=l.parts.length;f>d;d++)e.data[l.parts[d]]=c[d+1];l.api&&(e.api=l.api.replace(/\{([^\}]+?)\}/g,function(t,n){return e.data[n]}));break}return e},r.standardizeHash=i,n.exports=r});define("core/animation",function(t,e){for(var n=t("$"),i=t("./linklist"),r=t("graphics/matrix2d"),s=t("graphics/tween"),a=["webkit"],o=0;o<a.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[a[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[o]+"CancelAnimationFrame"]||window[a[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(function(){t(currTime+timeToCall)},16.7)},window.cancelAnimationFrame=function(t){clearTimeout(t)});var l=new i,c=!0,u=n.fx.cssPrefix+"transform",h={opacity:1},f=/(\d+\.\d+|\d+)\%/g,p=/translate\((\-{0,1}\d+(?:\.\d+){0,1}(?:\%|px){0,1})\s*\,\s*(\-{0,1}\d+(?:\.\d+){0,1}(?:\%|px){0,1})\)/,m=/matrix\((\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\)/,v=/(translate|skew|rotate|scale|matrix)\(([^\)]+)\)/g,g=/matrix\([^\)]+\)\s*$/,_=function(t){if(t){t instanceof Array||(t=[t]);for(var e=0,n=t.length;n>e;e++)"string"==typeof t[e]&&(t[e]=s[t[e].replace(/\-([a-z])/g,function(t,e){return e.toUpperCase()})])}else t=[s.easeOut];return t},b=function(t){var e=[];return n.each(t,function(t,n){e.push(isNaN(parseFloat(n))?0:parseFloat(n))}),e},y=function(t,e,n){return parseFloat(t)+(parseFloat(e)-parseFloat(t))*n},w=function(t){var e=new r;return t.replace(v,function(t,n,i){e["matrix"==n?"append":n].apply(e,b(i.split(",")))}),e},x=function(t){var i,s,e={};return n.each(t,function(t,n){/matrix|translate|skew|rotate|scale|invert/.test(t)?("translate"===t?n=(e[u]||"")+" "+t+"("+n+")":(s||(s=new r),i=e[u]||"",n=s["matrix"==t?"append":t].apply(s,b(n.split(","))).toString(),n=g.test(i)?i.replace(g,n):i+" "+n),t=u):"transform"===t&&(t=u,s=null),e[t]=n}),{css:e,matrix:s}};n.fn.transform=function(t){return this.css(x(t).css),this},n.fn.matrix=function(t){return t instanceof r?(this.css(u,t.toString()),this):w(getComputedStyle(this[0],null)[u])};var T=function(){if(l.length){c=!1;for(var t,e,n,a,s=(+new Date,l._idlePrev);s!=l;){if(a=s._idlePrev,first=s.data,t=Date.now()-first.startTime,n=[],e=first.ease,t<=first.duration){for(var o=0,u=e.length;u>o;o++)n.push(e[o](t,first.from,first.to-first.from,first.duration)/100);first.step.apply(first,n)}else{for(var h=first.to/100,o=0,u=e.length;u>o;o++)n.push(h);first.step.apply(first,n),l._remove(s),first.finish&&first.finish(h)}s=a}requestAnimationFrame(T)}else c=!0},E=function(t){return t.startTime=Date.now(),t.ease=_(t.ease),t.stop=function(){l.remove(t)},void 0===t.from&&(t.from=0),void 0===t.to&&(t.to=100),t.duration||(t.duration=300),t},$=function(t){for(var e=0,n=t.length;n>e;e++)l.append(E(t[e]));c&&T()},k=function(t){var e,i,r,s,a;this.el.each(function(){if(e=this._animationStyle,i=this._originStyle,0==t)a=i;else if(1>t){a={};for(var o in e)if(s=e[o],r=i[o],o==u){var l=r.match(m)||["",1,0,0,1,0,0],d=w(s);d.a=y(l[1],d.a,t),d.b=y(l[2],d.b,t),d.c=y(l[3],d.c,t),d.d=y(l[4],d.d,t),d.tx=y(l[5],d.tx,t),d.ty=y(l[6],d.ty,t),a[o]=d.toString()}else isNaN(parseFloat(s))?a[o]=s:(r=isNaN(parseFloat(r))?h[o]||0:parseFloat(r),a[o]=y(r,s,t))}else a=e;n(this).css(a)}),this._step&&this._step(t)},A=function(t){1==t&&this.el.css(this.css),this._finish&&this._finish(t)},S=function(t){for(var e,i,s,l=0,c=t.length;c>l;l++)e=t[l],e.css&&(s=x(e.css),e.matrix=s.matrix,e.css=s.css,i=e.el=n(e.el),"object"==typeof e.start&&i.transform(e.start),i.each(function(){var t=this,i={},r={},s=getComputedStyle(t,null);n.each(e.css,function(e,n){"string"==typeof n&&(e==u?n=n.replace(p,function(e,n,i){return"translate("+(-1!==n.indexOf("%")?t.offsetWidth*parseFloat(n)/100:parseFloat(n))+"px,"+(-1!==i.indexOf("%")?t.offsetHeight*parseFloat(i)/100:parseFloat(i))+"px)"}):/^(top|margin(-t|T)op)$/.test(e)?n=n.replace(f,function(e){return t.parentNode.offsetHeight*parseFloat(e)/100+"px"}):/^(left|margin(-l|L)eft|padding(-l|L)eft|padding(-t|T)op)$/.test(e)&&(n=n.replace(f,function(e){return t.parentNode.offsetWidth*parseFloat(e)/100+"px"}))),r[e]=s[e],i[e]=n}),t._animationStyle=i,t._originStyle=r}),e._step=e.step,e.step=k,e._finish=e.finish,e.finish=A);return t},O=function(t){n.isArray(t)||(t=[t]),S(t),this.list=t};O.prototype.step=function(t){for(var e,n=this.list,i=0,r=n.length;r>i;i++)e=n[i],e.from=t,e.step(t/100);return this},O.prototype.animate=function(t,e,n){for(var i,r=this.list,s=0,a=r.length;a>s;s++)i=r[s],i.duration=t,i.to=e,i.finish=i.start=void 0;return i.finish=n,$(r),this},e.Animation=O,e.parallel=function(t){$(S(t))},e.animate=function(){var t=Array.prototype.slice.call(arguments),e={},n=0,i=t[n++];return"function"==typeof i?e.step=i:(e.el=i,e.css=t[n++]),e.duration=t[n++],e.ease=t[n++],e.finish=t[n],$([e]),e};var j={step:function(t){for(var i,e=0,n=this.momentums.length;n>e;e++)i=this.momentums[e],i.current=i.start+(i.result-i.start)*t;this.momentumStep.apply(this.ctx,this.momentums)},finish:function(){this.bounce()},bounce:function(){for(var e,n,s,t=0,i=0,r=this.momentums.length;r>i;i++)s=this.momentums[i],n=s.current<s.min?s.min:s.current>s.max?s.max:s.current,n!=s.current?(s.start=s.current,s.result=n,t++):s.divisor&&n%s.divisor!=0&&(e=s.divisor,s.start=s.current,s.result=e/2>n%e?n-n%e:n-n%e+e,t++);0==t?this.end.call(this.ctx):(this.duration=400,$([this]))}},M=function(t,e,n,i,r,s,a){var m,v,o=e-t,l=r-e,c=e-i,u=6e-4,h=Math.abs(o)/n,d=h*h/(2*u),f=0,p=0;return s=a||s,o>0&&d>l?(p=s/(6/(d/h*u))/2,l+=p,h=h*l/d,d=l):0>o&&d>c&&(p=s/(6/(d/h*u))/2,c+=p,h=h*c/d,d=c),d*=0>o?-1:1,p*=0>o?-1:1,f=h/u,v=e+d,0!=p&&(m=.15/(p/d),m>1&&(d-=p,p/=m,d+=p,v=e+d)),i>e&&i>v||e>r&&v>r?(d=0,f=0,outside=0,v=e):(a&&0==p&&(v=v%a==0?v:a/2>v%a?v-v%a:v-v%a+a,v=v>r?r:i>v?i:v,300>f&&(f=300),d=v-e),a&&f>400&&(f=400)),{dist:d,time:Math.round(f),outside:p,result:v,current:e,start:e,max:r,min:i,divisor:a}};e.momentum=function(t,e,i,r,s,a){var o=[],l={},c=0;if("number"==typeof t[0])t=[t];else if(!t.length)return void s.call(a);for(var d,u=0,h=t.length;h>u;u++)d=M.apply(this,t[u]),0!=d.dist&&(c=Math.max(c,d.time)),o.push(d);for(var d,u=0,h=o.length;h>u;u++)d=o[u],0!=d.outside&&(d.result=d.result-d.outside+400*d.outside/c);return n.extend(l,j,{ctx:a||l,momentums:o,momentumStep:i,duration:c,ease:r,end:s}),0!=c?(e&&l.duration>e&&(l.duration=e),$([l])):l.bounce(),l}});define("core/master",function(t,e,n){var r=(t("$"),t("util")),s=t("./route"),a=r.getPath,o={checkQueryString:function(t,e){t.route.url!=e.url&&(t._setRoute(e),t.trigger("QueryChange"))},mapRoute:function(t,e){return this.route=new s(t,e),this},skip:0,_currentActivity:null,_activities:{},set:function(t,e){this._activities[a(t)]=e},get:function(t,e){var n=this,i="string"==typeof t?n.route.match(t):t;if(i){var r=a(i.path),s=this._activities[r];null==s?seajs.use(i["package"]||i.view,function(t){var o,a={application:n,route:i};i["package"]&&(t=seajs.require(i.view)),null!=t?(o=n.$el.find('[data-path="'+i.path+'"]'),o.length&&(a.el=o),s=new t(a),n.set(r,s),s.then(function(){e.call(n,s,i)})):(n.skip++,location.hash=n._currentActivity.url)}):e.call(n,s,i)}},remove:function(t){this._activities[a(t)]=void 0}};n.exports=o});define("core/app",function(t,e,i){var n=t("$"),r=t("util"),o=(t("bridge"),t("./base"),t("./view")),c=t("./master"),l=t("./animation"),u=t("./linklist"),h=t("./promise"),d=t("./touch"),f=t("./route"),v=(t("./activity"),r.noop,r.lastIndexOf),y=(Array.prototype.slice,r.getPath,f.standardizeHash),b=c.checkQueryString,w={openEnterAnimationFrom:{translate:"100%,0"},openEnterAnimationTo:{translate:"0,0"},openExitAnimationFrom:{translate:"0,0"},openExitAnimationTo:{translate:"-50%,0"},closeEnterAnimationTo:{translate:"0,0"},closeEnterAnimationFrom:{translate:"-50%,0"},closeExitAnimationFrom:{translate:"0,0"},closeExitAnimationTo:{translate:"100%,0"}},x=function(e,i,n,r){r||(r=(e?n:i).animationName);var s=t("anim/"+r)||w,a=e?"open":"close",o="ease-out",c=Object.create(s[a+"EnterAnimationFrom"]),l=Object.create(s[a+"ExitAnimationFrom"]);return c.zIndex=e?2:1,c.display="block",l.zIndex=e?1:3,[{el:n.$el,start:c,css:s[a+"EnterAnimationTo"],ease:o},{el:i.$el,start:l,css:s[a+"ExitAnimationTo"],ease:o}]},T=function(t,e){t.prepareExitAnimation(),t.$el.siblings(':not([data-path="'+e.path+'"])').hide(),null===e.el.parentNode&&e.$el.appendTo(t.application.el)},k=o.extend(c,{events:{"tap,click a[href]:not(.js-link-default)":function(t){var e=this,i=n(t.currentTarget);if(/http\:|javascript\:|mailto\:/.test(i.attr("href")))i.addClass("js-link-default");else if(t.preventDefault(),"tap"==t.type){var r=i.attr("href");/^#/.test(r)||(r="#"+r),null!=i.attr("forward")?e.forward(r):null!=i.attr("back")?e.back(r):e.to(r)}return!1},"tap [data-href]":function(t){var e=this,i=n(t.currentTarget);/http\:|javascript\:|mailto\:/.test(i.attr("data-href"))||e.to(i.attr("data-href"))},"tap [data-back]":function(t){this.back(n(t.currentTarget).attr("data-back"))},"tap [data-forward]":function(t){this.forward(n(t.currentTarget).attr("data-forward"))},"focus input":function(t){this.activeInput=t.target}},_touchStart:function(){var e,i,n,r,t=this,s=t.touch.dx;return t.touch.isDirectionY||t.swiperPromise?void t.touch.stop():(t.width=window.innerWidth,e=t._currentActivity,n=t.isSwipeLeft=s>0,t.swiper=null,i=n?e.swipeLeftForwardAction?(r=!0,e.swipeLeftForwardAction):(r=!1,e.swipeLeftBackAction):e.swipeRightForwardAction?(r=!0,e.swipeRightForwardAction):(r=!1,e.swipeRightBackAction),i||(n&&"Left"==e.referrerDir?i=e.referrer:n||"Left"==e.referrerDir||(i=e.referrer),r=!1),void(i?(t.swiperPromise=new h,t.mask.show(),t.get(i,function(i){T(e,i),t.isSwipeOpen=r,t.swiper=new l.Animation(x(r,e,i)),t.swipeActivity=i,t.swiperPromise.resolve()})):t.swiperPromise=null))},_touchMove:function(t){var i,e=this,n=e.touch.dx;e.swiperPromise&&e.swiperPromise.then(function(){return e.isSwipeLeft&&0>n||!e.isSwipeLeft&&n>0?void e.swiper.step(0):(i=100*Math.abs(n)/e.width,void e.swiper.step(i))},e)},_swiperAnimEnd:function(){var t=this,e=t.swipeActivity,i=t._currentActivity;t.isCancelSwipe?(i.isPrepareExitAnimation=!1,e.$el.remove(),t.mask.hide()):(t._currentActivity=t.swipeActivity,t.navigate(e.url),e.finishEnterAnimation(),t.isSwipeOpen?(e.referrer=i.url,e.referrerDir=t.isSwipeLeft?"Right":"Left",i.trigger("Pause")):i.destroy()),t.turning()},_touchEnd:function(){var t=this;t.isCancelSwipe=t.touch.isMoveLeft!==t.isSwipeLeft,t.swiperPromise&&t.swiperPromise.then(function(){t.queue([200,t.isCancelSwipe?0:100,t._swiperAnimEnd.bind(t)],t.swiper.animate,t.swiper),t.swiperPromise=null})},_history:[],_historyCursor:-1,el:'<div class="screen" style="position:fixed;top:0px;bottom:0px;right:0px;width:100%;background:rgba(0,0,0,0);z-index:2000;display:none"></div><div class="viewport"></div><canvas class="imagecanvas"></canvas>',initialize:function(){var t=this,e="tap click touchend touchmove touchstart";t._queue=new u,t.mask=n(t.$el[0]).off(e).on(e,!1),t.el=t.$el[1],t.canvas=t.$el[2],t.touch=new d(t.el,{start:t._touchStart,move:t._touchMove,stop:t._touchEnd},t)},start:function(){n(window).on("load",n.proxy(this._start,this))},_start:function(){var e,t=this,i=n(window);sl.app=this,t.$el.appendTo(document.body),t.$el=n(t.el),location.hash||(location.hash="/"),t.hash=e=y(location.hash),t.queue([e,function(n){n.$el.appendTo(t.el),t._currentActivity=n,t._history.push(n.url),t._historyCursor++,n.$el.transform(w.openEnterAnimationTo),n.then(function(){n.trigger("Resume"),n.trigger("Show"),t.trigger("start"),t.turning()}),i.on("hashchange",function(){e=t.hash=y(location.hash);var i=v(t._history,e),n=(t._skipRecordHistory||-1==i)&&!t.isHistoryBack;t._skipRecordHistory!==!0?-1==i?t.isHistoryBack?t._history.splice(t._historyCursor,0,e):(t._history.push(e),t._historyCursor++):(t._history.length=i+1,t._historyCursor=i):t._skipRecordHistory=!1,0==t.skip?t[n?"forward":"back"](e):t.skip>0?t.skip--:t.skip=0,t.isHistoryBack=!1})}],t.get,t)},_queue:null,queue:function(t,e,i){var n=this._queue;n.append({context:i,fn:e,args:t}),1==n.length&&e.apply(i,t)},turning:function(){var t=this._queue;t.length&&(t.shift(),t.length&&(t=t.first(),t.fn.apply(t.context,t.args)))},_animationTo:function(t,e,i,n,r){var o,s=this,a=s._currentActivity;if(e||(e=400),"string"==typeof t?(o=s.route.match(t),t=y(t)):(o=t,t=o.url),t!=y(location.hash)&&1==s._queue.length){var c=s._queue.first().args;c&&("string"==typeof c[0]?c[0]:c[0].url)===t&&s.navigate(t)}return a.path==o.path?(b(a,o),void s.turning()):void s.get(o,function(c){if(c.path==a.path)return b(c,o),void s.turning();s._currentActivity=c,T(a,c),c.then(function(){c.trigger("Resume")});var f,u="open"==n,h="ease-out",d=x(u,a,c,i);u&&(c.referrer=a.url,c.referrerDir=a.swipeRightForwardAction==t?"Left":"Right");for(var p=0,m=d.length;m>p;p++)f=d[p],f.ease=h,f.duration=e;f.finish=function(){r&&r(c),c.finishEnterAnimation(),s.turning()},l.parallel(d)})},_to:function(t){this._navigate(t),this.turning()},to:function(t){this.queue([t],this._to,this)},_navigate:function(t,e){t=y(t);var i=this,n=v(i._history,t);e===!0&&i.skip++,-1==n?(i._history.splice(i._historyCursor+1,0,t),i._history.length=i._historyCursor+2,i._historyCursor++,i._skipRecordHistory=!0,location.hash=t):(n!=i._historyCursor&&history.go(n-i._historyCursor),e===!0&&(i._history.length=n+1,i._historyCursor=n))},navigate:function(t){this._navigate(t,!0)},_forward:function(t,e,i){var n=this._currentActivity;this._animationTo(t,e,i,"open",function(){n.trigger("Pause")})},forward:function(t,e,i){var n=this.route.match(t);n&&this.queue([n,e,i],this._forward,this)},isHistoryBack:!1,_back:function(t,e,i){var n=this,r=n._currentActivity;t&&t.url?("string"==typeof e&&(i=e,e=null),n._animationTo(t,e,i,"close",function(){r.destroy()})):(r.prepareExitAnimation(),n.isHistoryBack=!0,history.back(),n.turning())},back:function(t,e,i){var n=this.route.match(t);n&&this.queue([n,e,i],this._back,this)}});return sl.Application=k,k});define("core/activity",function(t,e,i){var n=t("./page"),r=t("../widget/scroll"),a=(Array.prototype.slice,n.extend({animationName:"def",viewPath:"",onHtmlLoad:function(){var t=this;if(!t.swipeRightBackAction){var e=t.$("header [data-back]");e.length&&(t.swipeRightBackAction=e.attr("data-back")||"/")}t._scrolls=r.bind(t.$(".scrollview"))},initialize:function(){this.on("Create",this.onHtmlLoad),this.on("Destroy",this._onDestroy),n.prototype.initialize.apply(this,arguments)},_onDestroy:function(){this._scrolls&&$.each(this._scrolls,function(t,e){e.destory()}),this.application.remove(this.url)},isPrepareExitAnimation:!1,prepareExitAnimation:function(){var t=this;if(!t.isPrepareExitAnimation){var e=t.application;t.isPrepareExitAnimation=!0,e.activeInput&&(e.activeInput.blur(),e.activeInput=null),e.mask.show()}},finishEnterAnimation:function(){var t=this;t.application.mask.hide(),t.isPrepareExitAnimation=!1,t.then(function(){t.$el.addClass("active"),t.trigger("Show")})},redirect:function(t){var e=this,i=e.application;i.get(t,function(t,n){t.el.className=t.className+" active",i.$el.append(t.$el),i._currentActivity=t,e.$el.remove(),e.trigger("Pause"),t.then(function(){t.trigger("Resume"),t.trigger("Show")})})},prompt:function(t,e,i,n){n="function"!=typeof i?i:n,i="function"==typeof e?e:i,e="function"==typeof e?"":e,!this._prompt&&(this._prompt=this.createDialog({content:'<input type="text" class="prompt-text" />',buttons:[{text:"取消",click:function(){this.hide()}},{text:"确认",click:function(){this.hide(),this.ok&&this.ok(this.$(".prompt-text").val())}}]}));var r=this._prompt;r.title(t||"请输入").show(n),r.$(".prompt-text").val(e).focus(),r.ok=$.proxy(i,this)},createDialog:function(t){var e=this,i=new Dialog(t);return e.bindQueryAction("dialog",i,{show:"show","":"hide"}),i},forward:function(){this.application.forward.apply(this.application,arguments)},back:function(){this.application.back.apply(this.application,arguments)}}));return sl.Activity=a,a});define("core/touch",function(t,e,i){var n=t("$"),s=(t("util"),t("animation")),a=t("./event"),c=(Array.prototype.slice,function(t,e,i){var r=this,s=n(t);r.$el=s,r.el=s[0],r.options=e||{},r.ctx=i||r,s.on("touchstart",n.proxy(r._start,r)).on("touchmove",n.proxy(r._move,r)).on("touchend",n.proxy(r._end,r)),r.options.stop&&r.on("stop",r.options.stop,r.ctx)});return c.prototype={minDelta:0,on:a.on,trigger:a.trigger,_stopMomentum:function(){return this.momentum?(this.momentum.stop&&this.momentum.stop(),this._isClickStopAni=!0,!1):!0},_start:function(t){var e=this,i=t.touches[0];return e.pointX=e.startX=e.sx=i.pageX,e.pointY=e.startY=e.sy=i.pageY,e.isTouchStop=!1,e.isTouchStart=!1,e.isTouchMoved=!1,e.startTime=t.timeStamp||Date.now(),e._stopMomentum()},_move:function(t){if(!this.isTouchStop){var e=this,i=t.touches[0],n=e.startX-i.pageX,r=e.startY-i.pageY,s=t.timeStamp||Date.now();if(e.deltaX=n,e.deltaY=r,e.dx=e.sx-i.pageX,e.dy=e.sy-i.pageY,!e.isTouchStart){var a=Math.abs(n)>=e.minDelta&&Math.abs(n)>Math.abs(r),o=!a;if(!o&&!a)return!1;if(e.isTouchStart=!0,e.isDirectionY=o,e.isDirectionX=a,e.dir=a,e.isInit||(e.options.init&&e.options.init.call(e.ctx),e.isInit=!0),e.options.start.call(e.ctx),e.isTouchStop)return}return e.options.move.call(e.ctx,n,r),e.isTouchMoved=!0,e.isMoveLeft=e.pointX-i.pageX>0?!0:e.pointX==i.pageX?e.isMoveLeft:!1,e.isMoveTop=e.pointY-i.pageY>0?!0:e.pointY==i.pageY?e.isMoveTop:!1,e.pointX=i.pageX,e.pointY=i.pageY,s-e.startTime>300&&(e.startTime=s,e.startX=i.pageX,e.startY=i.pageY,e.options.resetStartTime&&e.options.resetStartTime.call(e.ctx)),!1}},stop:function(){this.isTouchStop=!0},addMomentumOptions:function(t,e,i,n,r,s){return this.momentumOptions.push([t||0,e||0,this.duration,i||0,n||0,r||0,s]),this},_momentum:function(){this.options.momentum&&this.options.momentum.apply(this.ctx,arguments)},_stop:function(){this.momentum=null,this._isClickStopAni=!1,this.trigger("stop")},_end:function(t){var e=this;if((!e.isTouchMoved||e.isTouchStop)&&e._isClickStopAni)return e.momentum.finish(),void(e._isClickStopAni=!1);if(e.isTouchMoved&&(e.isTouchMoved=!1,!e.isTouchStop)){e.isTouchStop=!0,n(t.target).trigger("touchcancel");var a=(t.changedTouches[0],(t.timeStamp||Date.now())-e.startTime);return e.duration=a,300>a||!e.momentum?(e.momentumOptions=[],e.options.beforeMomentum&&e.options.beforeMomentum.call(e.ctx,a),e.momentum=s.momentum(e.momentumOptions,e.options.maxDuration,e._momentum,e.options.ease||"ease",e._stop,e)):e.momentum.finish(),!1}},destory:function(){this.$el.off("touchstart",this._start).off("touchmove",this._move).off("touchend",this._end)}},c});define("widget/scrollview",function(t,e,i){var n=t("$"),s=(t("core/animation"),t("core/event")),a=t("core/touch"),o=function(t){return n('<div class="sl_scroller" style="width:100%;-webkit-transform: translate(0px,0px) translateZ(0);"></div>').append(t.children()).appendTo(t.html(""))},c=function(t,e){e=n.extend({ease:"ease",hScroll:!0,vScroll:!0},e);var i=this;i.options=e,i.$el=n(t).css({overflow:"hidden"}),i.el=i.$el[0],i.$scroller=o(i.$el),i.scroller=i.$scroller[0],i.touch=new a(i.$el,i,i)};c.prototype={off:s.off,on:s.on,trigger:s.trigger,init:function(){var t=this.$scroller.matrix();this.x=-t.tx,this.minX=0,this.y=-t.ty,this.minY=0},start:function(){var t=this,e=t.touch;return t.wrapperW=t.el.clientWidth,t.scrollW=t.scroller.offsetWidth,t.maxX=Math.max(t.scrollW-t.wrapperW,0),t._startLeft=t.startLeft=t.x,t.wrapperH=t.el.clientHeight,t.scrollH=t.scroller.offsetHeight,t.maxY=Math.max(t.scrollH-t.wrapperH,0),t._startTop=t.startTop=t.y,(!t.options.hScroll||t.wrapperW>=t.scrollW)&&e.isDirectionX||(!t.options.vScroll||t.wrapperH>=t.scrollH)&&e.isDirectionY?void e.stop():void 0},stop:function(){console.log(this.$el),this.$el.triggerHandler("scrollStop",[0,this.y])},resetStartTime:function(){this.options.hScroll&&(this.startLeft=this.startLeft+this.touch.deltaX,this._startLeft=this.x),this.options.vScroll&&(this.startTop=this.startTop+this.touch.deltaY,this._startTop=this.y)},move:function(){if(this.options.hScroll){var t=this.startLeft+this.touch.deltaX;(t<this.minX||t>this.maxX)&&(t=this.options.vScroll?t<this.minX?this.minX:this.maxX:t<this.minX?t+(this.minX-t)/2:t+(this.maxX-t)/2),this.x=t}if(this.options.vScroll){var e=this.startTop+this.touch.deltaY;(e<this.minY||e>this.maxY)&&(e=e<this.minY?e+(this.minY-e)/2:e+(this.maxY-e)/2),this.y=e}this.$scroller.css({"-webkit-transform":"translate("+-this.x+"px,"+-this.y+"px) translateZ(0)"})},beforeMomentum:function(){this.touch.addMomentumOptions(this._startLeft,this.x,this.minX,this.maxX,this.wrapperW,this.divisorX).addMomentumOptions(this._startTop,this.y,this.minY,this.maxY,this.wrapperH)},momentum:function(t,e){this.x=t.current,this.y=e.current,this.$scroller.css({"-webkit-transform":"translate("+-this.x+"px,"+-this.y+"px) translateZ(0)"})},destory:function(){this.touch.destory()}},c.addScroller=o,i.exports=c});define("widget/scroll",function(t,e,i){var n=t("$"),r=t("util"),a=(t("animation"),t("./scrollview")),o=function(t){var e=this;if(e.scrollView||0==e.parentNode.scrollTop){var i=t.touches[0],n=e.$.matrix();e.isStart=!1,e.isStop=!1,e.isMoved=!1,e.sy=e.oy=e.pointY=i.pageY,e.sx=i.pageX,e.st=n.ty,e.isLoading=e.isDataLoading}else e.isStop=!0},c=function(t){var e=this;if(!e.isStop){var i=t.touches[0],n=i.pageY-e.sy,r=i.pageX-e.sx;if(e.oy=e.pointY,e.pointY=i.pageY,!e.isStart&&(e.isStart=!0,Math.abs(r)>Math.abs(n)))return void(e.isStop=!0);var s=e.scrollView;return(s?s.y<=0:0==e.parentNode.scrollTop)&&n>0?(e.isMoved=!0,e.refreshAgain=!0,e.ty=e.st+.5*n,e.$.css({"-webkit-transform":"translate(0px,"+e.ty+"px) translateZ(0)"}),this.isLoading||e.$refresh.html(e.ty>70?"释放刷新":"下拉刷新")):e.isStop=!0,e.isStop}},l=function(t){var e=this;if(e.isMoved){var i=t.changedTouches[0],n=e.ty,r=n>70?50:0,a=e.oy-i.pageY,o=function(){e.$.animate({"-webkit-transform":"translate(0px,"+r+"px) translateZ(0)"},300+-1*a,"cubic-bezier(.3,.78,.43,.95)",function(){e.refreshAgain=!1,e.isLoading||0==r||(e.isLoading=e.isDataLoading=!0,e.$refresh.html('<div class="dataloading"></div>'),e.$.triggerHandler("refresh"))})};return e.isMoved=!1,e.isLoading&&!e.isDataLoading&&(r=0),-5>a?e.$.animate({"-webkit-transform":"translate(0px,"+(n-1.5*a)+"px) translateZ(0)"},-1.5*a,"cubic-bezier(.3,.78,.43,.95)",o):o(),!1}},u=function(){var t=this,e=function(){if(t.$refresh.html("下拉刷新"),t.isDataLoading=!1,!t.refreshAgain){var e=t.$.matrix().ty,i=Math.max(e-50,0);t.$.animate({"-webkit-transform":"translate(0px,"+i+"px) translateZ(0)"},400,"cubic-bezier(.3,.78,.43,.95)")}};t.options.refresh(e,function(t){sl.tip("string"==typeof t?t:t.msg),e()})},h=function(t){var e=this,i=t.touches[0],n=+new Date;e.__sy=e.__pointY=e.__startY=i.pageY,e.__sx=i.pageX,e.__hasMomentum=!1,e.__isMoved=!1,e.__isStart=!1,e.__isScroll=n-e.__timestamp<=16},d=function(t){var e=this,i=t.touches[0],n=i.pageY,s=i.pageY-e.__sy,a=i.pageX-e.__sx;return e.__oPointY=e.__pointY,e.__pointY=n,e.__isMoved=!0,!e.__isStart&&(e.__isStart=!0,!e.options.hScroll&&Math.abs(a)>Math.abs(s))?!1:void(r.ios&&e.$refresh&&e.scrollTop<0&&(e.isRefresh=e.scrollTop<-70))},p=function(t){t._stm&&clearTimeout(t._stm),t._stm=setTimeout(function(){t._stm=null,n(t).trigger("scrollStop",[0,t.scrollTop])},80)},f=function(){var t=this;t.__isScroll=!0,t.__timestamp=+new Date,(t.__hasMomentum||r.android)&&p(t)},m=function(t){var e=this,s=(n(e),t.changedTouches[0].pageY),a=Math.abs(e.__oPointY-s);r.ios&&5>a?(e._isStop=!1,p(e),e.__hasMomentum=!1):e.__hasMomentum=!0,t.cancelTap=e.__isScroll,e.isRefresh&&(e.isRefresh=!1,e.$refresh.html('<div class="dataloading"></div>'),e.$scroller.css({"-webkit-transform":"translate(0px,50px) translateZ(0)"}).triggerHandler("refresh"))};e.bind=function(t,e){var i=[];return("string"==typeof t?n(t):t).each(function(){var s,t=n(this).addClass("scrollview");if(e&&e.useScroll||r.android&&parseFloat(r.osVersion<=2.3)?(s=new a(this,e),i.push(s)):(this.__timestamp=0,r.ios?t.css({"-webkit-overflow-scrolling":"touch",overflowY:"scroll"}):r.android&&t.css({overflowY:"scroll"}),t.on("scroll",f).on("touchstart",h).on("touchmove",d).on("touchend",m).each(function(){this._scrollTop=0,this.options=n.extend({hScroll:!1},e)}),i.push({destory:function(){t.off("touchstart",h).off("touchmove",d).off("touchend",m).off("scroll",f)}})),e&&e.refresh){var p=t.children(".sl_scroller"),v=n('<div class="refresh" style="height:50px;text-align:center;line-height:50px;">下拉刷新</div>');p.length||(p=a.addScroller(t));var g=p[0];g.$refresh=v,g.$=p,g.options=e,s&&(g.scrollView=s),p.css({marginTop:-50}).prepend(v).on("touchstart",o).on("touchmove",c).on("touchend",l).on("refresh",u),this.$refresh=v,this.$scroller=p}}),i}});define("widget/tip",function(t,e){var i=t("$"),r=(t("util"),t("core/promise")),s=i('<div class="tip" style="display:none"></div>').on(i.fx.transitionEnd,function(){s.hasClass("tip-hide")&&s.hide()}).appendTo(document.body);e.promise=r.resolve(),e.msec=2e3,e.show=function(){s.hasClass("tip-show")||s.removeClass("tip-hide").show().addClass("tip-show")},e.msg=function(t){var e=this;e.promise.then(function(){return s.html(t),e.show(),setTimeout(function(){e.hide(),e.promise.resolve()},e.msec),this})},e.hide=function(){s.removeClass("tip-show").addClass("tip-hide")},sl.tip=function(t){e.msg(t)}});define("widget/dialog",["$","util","./../core/base","./../core/view"],function(t,e,i){var n=t("$"),r=t("util"),s=t("./../core/view"),a=null,o=s.extend({events:{"tap .js_dialog_btn":"action","tap .js_close_dialog":function(){this.hide()},touchmove:function(t){t.preventDefault()}},className:"dialog",el:"<div></div>",template:r.template('<%if(isShowClose){%><div class="dialog-close js_close_dialog"></div><%}%><%if(isShowTitle){%><div class="dialog-title"><h3 class="js_title"><%=title%></h3></div><%}%><div class="dialog-content js_content"><%=content%></div><div class="dialog-btns"><%for(var i=0,len=buttons.length,button;i<n;i++){button=buttons[i];%><a class="dialog-btn js_dialog_btn<%=button.className?" "+button.className:" "%>"><%=button.text%></a><%}%></div>'),options:{isShowClose:!1,isShowTitle:!0,title:null,content:null,buttons:[]},title:function(t){return"undefined"==typeof t?this.$title.html():(this.$title.html(t),this)},initialize:function(){var t=this,e=r.pick(t.options,["isShowClose","isShowTitle","title","content","buttons"]);t.$el.html(t.template(e)),t.$title=t.$(".js_title"),t.$content=t.$(".js_content")},action:function(t){this.options.buttons[n(t.currentTarget).index()].click.call(this,t)},hide:function(){var t=this;t._visible&&(t._visible=!1,a.hide(),t.$el.css({"-webkit-transform":"scale(1)",opacity:1}).animate({opacity:0,scale:0},300,"ease-out",function(){t.$el.hide(),t.trigger("Hide")}))},show:function(t){var e=this;e._visible||(e._visible=!0,t=n(t),a||(a=n('<div style="position:fixed;top:0px;bottom:0px;right:0px;width:100%;background: #888;opacity: 0.5;z-index:2000;display:none"></div>').appendTo(document.body)),a.show(),null==e.el.parentNode&&e.$el.appendTo(document.body),e.$el.css({"-webkit-transform":"",display:"block",top:"50%"}),e.$el.css({marginTop:this.$el.height()/-2,"-webkit-transform":"scale(0)",opacity:0}).animate({opacity:1,scale:1},300,"ease-out",function(){e.trigger("Show")}))},content:function(t){return"undefined"==typeof t?this.$content:void this.$content.html(t)}}),c=null;sl.prompt=function(t,e,i){e||(e=t,t="请输入"),c?c.title(t):c=new o({title:t,content:'<input type="text" class="prompt-text" /><input type="password" class="prompt-text" />'}),c.$("input.prompt-text").val("").hide().filter('[type="'+(i||"text")+'"]').show(),c.options.onOk=function(){return e.call(this,this.$('input[type="'+(i||"text")+'"].prompt-text').val())},c.options.onCancel=function(){e.call(this)},c.show(),n(window).one("hashchange",function(){c.hide()})};var l=null;return sl.confirm=function(t,e,i,r){var s={};n.isPlainObject(t)?(r=i,i=e,n.extend(s,t)):n.isFunction(e)?(r=i,i=e,s.content=t,s.title="确认提示"):(s.title=t,s.content=e),l?(l.title(s.title),l.$(".dialog-content").html(s.content),l.$(".js_hide").html(s.cancelText||"取消"),l.$(".js_ok").html(s.okText||"确定")):l=new o(s),l.options.onOk=function(){i.call(this)},l.options.onCancel=function(){r&&r.call(this)},l.show(),n(window).one("hashchange",function(){l.hide()})},o});define("widget/loading",["$","util","bridge","./../core/view"],function(t,e,i){var n=t("$"),r=t("util"),a=(t("./../core/view"),t("bridge")),o=[],l=["$el","url","method","headers","dataType","xhrFields","success","complete","pageIndex","pageSize","append","$content","$scroll","checkData","check","hasData","KEY_PAGE","KEY_PAGESIZE","DATAKEY_TOTAL"],c=function(t){n.extend(this,r.pick(t,l)),t.el&&(this.$el=n(t.el)),this.el=this.$el[0],this.params=t.params||{},this.error=t.error||this.showError,this.$content=t.$content||this.$el,this.$scroll=t.$scroll||this.$el,this.$el.on("tap",".js_reload",n.proxy(this.reload,this))};c.prototype={KEY_PAGE:"page",KEY_PAGESIZE:"pageSize",DATAKEY_TOTAL:"total",DATAKEY_PAGENUM:"",method:"GET",dataType:"json",pageIndex:1,pageSize:10,template:'<div class="dataloading"></div>',refresh:'<div class="refreshing"><p class="msg js_msg"></p><p class="loading js_loading"></p></div>',errorTemplate:'<div class="server_error"><i class="msg js_msg"></i><i class="ico_reload js_reload"></i></div>',check:function(t){var e=!(!t||!t.success);return e},hasData:function(t){return t.data&&t.data.length},showMsg:function(t){1==this.pageIndex?(this.$loading.find(".js_msg").show().html(t),this.$loading.show().find(".js_loading").hide()):(this.$refreshing.find(".js_msg").show().html(t),this.$refreshing.show().find(".js_loading").hide())},complete:r.noop,showError:function(t){var e=this;if(e.isError)if(1==this.pageIndex){this.$loading.animate({opacity:0},300,"ease-out",function(){e.$loading.hide().css({opacity:""})});var i=e.$error||(e.$error=n(e.errorTemplate).appendTo(e.$el));i.find(".js_msg").html("string"==typeof t?t:t?t.msg:"加载失败"),i.show()}else e.showMsg('<div class="data-reload js_reload">加载失败，请点击重试<i class="i-refresh"></i></div>')},showLoading:function(){var e,t=this;this.$error&&this.$error.hide(),1==t.pageIndex?(t.$loading||(t.$loading=n(t.template)),t.$loading.css({display:"block"}).appendTo(t.$el),t.$refreshing&&t.$refreshing.hide()):(e=this.$refreshing,e.show().find(".js_msg").html("正在载入..."),e.find(".js_loading").show(),t.$loading&&t.$loading.hide())},hideLoading:function(){this.$error&&this.$error.hide(),this.$refreshing&&this.$refreshing.hide(),this.$loading.hide()},setHeaders:function(t,e){var i;e?(i={})[t]=e:i=t,void 0===this.headers&&(this.headers={});for(var n in i)this.headers[n]=i[n];return this},setParam:function(t,e){var i;e?(i={})[t]=e:i=t;for(var n in i)e=i[n],n==this.KEY_PAGE?this.pageIndex=e:n==this.KEY_PAGESIZE?this.pageSize=e:this.params[n]=e;return this},getParam:function(t,e){return this.params},reload:function(t,e){this.isLoading||this.setParam(this.KEY_PAGE,1).load(t,e)},load:function(t,e){var i=this;if(!i.isLoading){i.isLoading=!0,"function"==typeof t&&(e=t,t=null),i.params[i.KEY_PAGE]=i.pageIndex,i.params[i.KEY_PAGESIZE]=i.pageSize;for(var r=o.length-1;r>=0;r--)o[r].disableAutoRefreshing();t&&t.showLoading===!1||i.showLoading(),i._xhr=n.ajax({url:a.url(i.url),headers:i.headers,xhrFields:i.xhrFields,data:i.params,type:i.method,dataType:i.dataType,error:function(t){i._xhr=null,i.isError=!0,i.isLoading=!1,i.error({msg:"网络错误"},t),e&&e.call(i,{msg:"网络错误"},null)},success:function(t,n,r){i._xhr=null,i.isLoading=!1,!i.check||i.check(t)?(i.hideLoading(),i.checkData===!1||i.hasData(t)?(1!=i.pageIndex&&i.append?i.append(t,n,r):i.success(t,n,r),e&&e.call(i,null,t),i.checkAutoRefreshing(t)):i.dataNotFound(t)):(i.isError=!0,i.isLoading=!1,i.error(t),e&&e.call(i,t,null))},complete:n.proxy(i.complete,i)})}},_refresh:function(){this.abort().load()},dataNotFound:function(t,e){var i=this;i.isError=!0,1==i.pageIndex?i.showError("暂无数据"):setTimeout(function(){i.$refreshing.hide()},3e3)},_scroll:function(t,e,i){var n=this;!n.isLoading&&n._scrollY<i&&i+n.$scroll.height()>=n.$refreshing[0].offsetTop&&n._refresh(),n._scrollY=i},_autoRefreshingEnabled:!1,checkAutoRefreshing:function(t){var e=this,i=e.params;e.append&&(e.DATAKEY_PAGENUM&&t[e.DATAKEY_PAGENUM]&&t[e.DATAKEY_PAGENUM]>i[e.KEY_PAGE]||e.DATAKEY_TOTAL&&t[e.DATAKEY_TOTAL]&&t[e.DATAKEY_TOTAL]>i[e.KEY_PAGE]*i[e.KEY_PAGESIZE])?(e.pageIndex++,e.enableAutoRefreshing()):e.disableAutoRefreshing()},enableAutoRefreshing:function(){(this.$refreshing||(this.$refreshing=n(this.refresh)).appendTo(this.$content)).show();this._autoRefreshingEnabled||(this._autoRefreshingEnabled=!0,this.$scroll.on("scrollStop",n.proxy(this._scroll,this)),this._scrollY=this.el.scrollTop,this.el.scrollTop+this.$scroll.height()>=this.$refreshing[0].offsetTop&&this._refresh())},disableAutoRefreshing:function(){this._autoRefreshingEnabled&&(this._autoRefreshingEnabled=!1,this.$scroll.off("scrollStop",this._scroll),this.$refreshing&&this.$refreshing.hide())},abort:function(){return this._xhr&&(this.isLoad=!1,this._xhr.abort(),this._xhr=null,this.hideLoading()),this},destory:function(){this.abort(),this.disableAutoRefreshing(),this.$el.off("tap",".js_reload",this.reload)}},c.extend=r.extend,i.exports=c});define("widget/extend/loading",function(t,e,i){var n=t("../loading");i.exports=n.extend({KEY_PAGE:"pageNum"})});define("anim/def",function(){return{openEnterAnimationFrom:{translate:"100%,0"},openEnterAnimationTo:{translate:"0,0"},openExitAnimationFrom:{translate:"0,0"},openExitAnimationTo:{translate:"-50%,0"},closeEnterAnimationTo:{translate:"0,0"},closeEnterAnimationFrom:{translate:"-50%,0"},closeExitAnimationFrom:{translate:"0,0"},closeExitAnimationTo:{translate:"100%,0"}}}),define("anim/menu",function(){return{openEnterAnimationFrom:{translate:"-80%,0"},openEnterAnimationTo:{translate:"0,0"},openExitAnimationFrom:{translate:"0,0"},openExitAnimationTo:{translate:"60%,0"},closeEnterAnimationFrom:{translate:"60%,0"},closeEnterAnimationTo:{translate:"0,0"},closeExitAnimationFrom:{translate:"0,0"},closeExitAnimationTo:{translate:"-80%,0"}}});