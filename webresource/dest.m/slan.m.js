!function(e,i){function n(e){return function(i){return{}.toString.call(i)=="[object "+e+"]"}}function m(){return c++}function g(e){return e.match(v)[0]}function f(e){for(e=e.replace(_,"/");e.match(b);)e=e.replace(b,"/");return e=e.replace(p,"$1/")}function w(e){var i=e.length-1,t=e.charAt(i);return"#"===t?e.substring(0,i):".js"===e.substring(i-2)||e.indexOf("?")>0||".css"===e.substring(i-3)||"/"===t?e:e+".js"}function y(e){var t,i=a.paths;return i&&(t=e.match($))&&d(i[t[1]])&&(e=i[t[1]]+t[2]),e}function k(e){var i=a.vars;return i&&e.indexOf("{")>-1&&(e=e.replace(T,function(e,t){return d(i[t])?i[t]:e})),e}function x(e){var i=a.map,t=e;if(i)for(var n=0,s=i.length;s>n;n++){var d=i[n];if(t=r(d)?d(e)||e:e.replace(d[0],d[1]),t!==e)break}return t}function I(e,i){var t,n=e.charAt(0);if(S.test(e))t=e;else if("."===n)t=f((i?g(i):a.cwd)+e);else if("/"===n){var s=a.cwd.match(j);t=s?s[0]+e.substring(1):e}else t=a.base+e;return 0===t.indexOf("//")&&(t=location.protocol+t),t}function C(e,i){if(!e)return"";var t=a.alias&&a.alias[e];t&&d(t)&&(e=t),e=y(e),e=k(e),e=w(e);var n=I(e,i);return n=x(n),!t||W[n]||d(t)||(W[n]={exports:t,status:ee.EXECUTED,exec:ie.prototype.exec}),n}function E(e){return e.hasAttribute?e.src:e.getAttribute("src",4)}function F(e,i,t,a){var n=L.test(e),s=q.createElement(n?"link":"script");t&&(s.charset=t),o(a)||s.setAttribute("crossorigin",a),n?i():B(s,i,n,e),n?(s.rel="stylesheet",s.href=e):(s.async=!0,s.src=e),U=s,O?M.insertBefore(s,O):M.appendChild(s),U=null}function B(e,i,t,n){function d(){e.onload=e.onerror=e.onreadystatechange=null,t||a.debug||M.removeChild(e),e=null,i()}var s="onload"in e;s?(e.onload=d,e.onerror=function(){u("error",{uri:n,node:e}),d()}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&d()}}function H(){if(U)return U;if(R&&"interactive"===R.readyState)return R;for(var e=M.getElementsByTagName("script"),i=e.length-1;i>=0;i--){var t=e[i];if("interactive"===t.readyState)return R=t}}function X(e){var i=[];return e.replace(G,"").replace(z,function(e,t,a){a&&i.push(a)}),i}function ie(e,i){this.uri=e,this.dependencies=i||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}if(!e.seajs){var t=e.seajs={version:"2.2.3"},a=t.data={},s=n("Object"),d=n("String"),l=Array.isArray||n("Array"),r=n("Function"),o=n("Undefined"),c=0,h=a.events={};t.on=function(e,i){var a=h[e]||(h[e]=[]);return a.push(i),t},t.off=function(e,i){if(!e&&!i)return h=a.events={},t;var n=h[e];if(n)if(i)for(var s=n.length-1;s>=0;s--)n[s]===i&&n.splice(s,1);else delete h[e];return t};var u=t.emit=function(e,i){var n,a=h[e];if(a)for(a=a.slice();n=a.shift();)n(i);return t},v=/[^?#]*\//,_=/\/\.\//g,b=/\/[^\/]+\/\.\.\//,p=/([^:\/])\/\//g,$=/^([^\/:]+)(\/.+)$/,T=/{([^{]+)}/g,S=/^\/\/.|:\//,j=/^.*?\/\/.*?\//,q=document,D=g(q.URL),A=q.scripts,P=q.getElementById("seajsnode")||A[A.length-1],N=g(E(P)||D);t.resolve=C;var U,R,M=q.head||q.getElementsByTagName("head")[0]||q.documentElement,O=M.getElementsByTagName("base")[0],L=/\.css(?:\?|$)/i;+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;t.request=F;var Q,z=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,G=/\\\\/g,W=t.cache={},K={},Y={},Z={},ee=ie.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};ie.prototype.resolve=function(){for(var e=this,i=e.dependencies,t=[],a=0,n=i.length;n>a;a++)t[a]=ie.resolve(i[a],e.uri);return t},ie.prototype.load=function(){var e=this;if(!(e.status>=ee.LOADING)){e.status=ee.LOADING;var i=e.resolve();u("load",i);for(var a,t=e._remain=i.length,n=0;t>n;n++)a=ie.get(i[n]),a.status<ee.LOADED?a._waitings[e.uri]=(a._waitings[e.uri]||0)+1:e._remain--;if(0===e._remain)return void e.onload();var s={};for(n=0;t>n;n++)a=W[i[n]],a.status<ee.FETCHING?a.fetch(s):a.status===ee.SAVED&&a.load();for(var d in s)s.hasOwnProperty(d)&&s[d]()}},ie.prototype.onload=function(){var e=this;e.status=ee.LOADED,e.callback&&e.callback();var t,a,i=e._waitings;for(t in i)i.hasOwnProperty(t)&&(a=W[t],a._remain-=i[t],0===a._remain&&a.onload());delete e._waitings,delete e._remain},ie.prototype.fetch=function(e){function l(){t.request(s.requestUri,s.onRequest,s.charset,s.crossorigin)}function o(){delete K[d],Y[d]=!0,Q&&(ie.save(n,Q),Q=null);var e,i=Z[d];for(delete Z[d];e=i.shift();)e.load()}var i=this,n=i.uri;i.status=ee.FETCHING;var s={uri:n};u("fetch",s);var d=s.requestUri||n;return!d||Y[d]?void i.load():K[d]?void Z[d].push(i):(K[d]=!0,Z[d]=[i],u("request",s={uri:n,requestUri:d,onRequest:o,charset:r(a.charset)?a.charset(d):a.charset,crossorigin:r(a.crossorigin)?a.crossorigin(d):a.crossorigin}),void(s.requested||(e?e[s.requestUri]=l:l())))},ie.prototype.exec=function(){function a(e){return ie.get(a.resolve(e)).exec()}var e=this;if(e.status>=ee.EXECUTING)return e.exports;e.status=ee.EXECUTING;var t=e.uri;a.resolve=function(e){return ie.resolve(e,t)},a.async=function(e,i){return ie.use(e,i,t+"_async_"+m()),a};var n=e.factory,s=r(n)?n(a,e.exports={},e):n;return s===i&&(s=e.exports),delete e.factory,e.exports=s,e.status=ee.EXECUTED,u("exec",e),s},ie.resolve=function(e,i){var a={id:e,refUri:i};return u("resolve",a),a.uri||t.resolve(a.id,i)},ie.define=function(e,t,a){var n=arguments.length;1===n?(a=e,e=i):2===n&&(a=t,l(e)?(t=e,e=i):t=i),!l(t)&&r(a)&&(t=X(a.toString()));var s={id:e,uri:ie.resolve(e),deps:t,factory:a};if(!s.uri&&q.attachEvent){var d=H();d&&(s.uri=d.src.replace(/\?.*/g,""))}u("define",s),s.uri?ie.save(s.uri,s):Q=s},ie.save=function(e,i){var t=ie.get(e);t.status<ee.SAVED&&(t.id=i.id||e,t.dependencies=i.deps||[],t.factory=i.factory,t.status=ee.SAVED)},ie.get=function(e,i){return W[e]||(W[e]=new ie(e,i))},ie.use=function(i,t,a){var n=ie.get(a,l(i)?i:[i]);n.callback=function(){for(var i=[],a=n.resolve(),s=0,d=a.length;d>s;s++)i[s]=W[a[s]].exec();t&&t.apply(e,i),delete n.callback},n.load()},ie.preload=function(e){var i=a.preload,t=i.length;t?ie.use(i,function(){i.splice(0,t),ie.preload(e)},a.cwd+"_preload_"+m()):e()},t.use=function(e,i){return ie.preload(function(){ie.use(e,i,a.cwd+"_use_"+m())}),t},ie.define.cmd={},e.define=ie.define,t.Module=ie,a.fetchedList=Y,a.cid=m,t.require=function(e){var i=ie.get(ie.resolve(e));return i.status<ee.EXECUTING&&(i.onload(),i.exec()),i.exports};var te=/^(.+?\/)(\?\?)?(seajs\/)+/;a.base=(N.match(te)||["",N])[1],a.dir=N,a.cwd=D,a.charset="utf-8",a.preload=function(){var e=[],i=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2");return i+=" "+q.cookie,i.replace(/(seajs-\w+)=1/g,function(i,t){e.push(t)}),e}(),t.config=function(e){for(var i in e){var n=e[i],d=a[i];if(d&&s(d))for(var r in n)d[r]=n[r];else l(d)?n=d.concat(n):"base"===i&&("/"!==n.slice(-1)&&(n+="/"),n=I(n)),a[i]=n}return u("config",e),t}}}(this);var Zepto=function(){function A(e){return null==e?String(e):x[$.call(e)]||"object"}function D(e){return"function"==A(e)}function I(e){return null!=e&&e==e.window}function P(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function q(e){return"object"==A(e)}function O(e){return q(e)&&!I(e)&&Object.getPrototypeOf(e)==Object.prototype}function L(e){return"number"==typeof e.length}function M(e){return r.call(e,function(e){return null!=e})}function R(e){return e.length>0?i.fn.concat.apply([],e):e}function U(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function F(e){return e in d?d[e]:d[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function V(e,t){return"number"!=typeof t||c[U(e)]?t:t+"px"}function z(e){var t,i;return o[e]||(t=l.createElement(e),l.body.appendChild(t),i=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==i&&(i="block"),o[e]=i),o[e]}function H(e){return"children"in e?s.call(e.children):i.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function B(i,n,a){for(t in n)a&&(O(n[t])||N(n[t]))?(O(n[t])&&!O(i[t])&&(i[t]={}),N(n[t])&&!N(i[t])&&(i[t]=[]),B(i[t],n[t],a)):n[t]!==e&&(i[t]=n[t])}function Z(e,t){return null==t?i(e):i(e).filter(t)}function J(e,t,i,n){return D(t)?t.call(e,i,n):t}function X(e,t,i){null==i?e.removeAttribute(t):e.setAttribute(t,i)}function G(t,i){var n=t.className,a=n&&n.baseVal!==e;return i===e?a?n.baseVal:n:void(a?n.baseVal=i:t.className=i)}function W(e){var t;try{return e?"true"==e||("false"==e?!1:"null"==e?null:/^0/.test(e)||isNaN(t=Number(e))?/^[\[\{]/.test(e)?i.parseJSON(e):e:t):e}catch(n){return e}}function Y(e,t){t(e);for(var i in e.childNodes)Y(e.childNodes[i],t)}var e,t,i,n,j,S,a=[],s=a.slice,r=a.filter,l=window.document,o={},d={},c={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},u=/^\s*<(\w+|!)[^>]*>/,h=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,m=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,f=/^(?:body|html)$/i,p=/([A-Z])/g,v=["val","css","html","text","data","width","height","offset"],g=["after","prepend","before","append"],b=l.createElement("table"),_=l.createElement("tr"),w={tr:l.createElement("tbody"),tbody:b,thead:b,tfoot:b,td:_,th:_,"*":l.createElement("div")},y=/complete|loaded|interactive/,T=/^[\w-]*$/,x={},$=x.toString,k={},C=l.createElement("div"),E={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},N=Array.isArray||function(e){return e instanceof Array};return k.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var i=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(i)return i.call(e,t);var n,a=e.parentNode,s=!a;return s&&(a=C).appendChild(e),n=~k.qsa(a,t).indexOf(e),s&&C.removeChild(e),n},j=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},S=function(e){return r.call(e,function(t,i){return e.indexOf(t)==i})},k.fragment=function(t,n,a){var r,o,d;return h.test(t)&&(r=i(l.createElement(RegExp.$1))),r||(t.replace&&(t=t.replace(m,"<$1></$2>")),n===e&&(n=u.test(t)&&RegExp.$1),n in w||(n="*"),d=w[n],d.innerHTML=""+t,r=i.each(s.call(d.childNodes),function(){d.removeChild(this)})),O(a)&&(o=i(r),i.each(a,function(e,t){v.indexOf(e)>-1?o[e](t):o.attr(e,t)})),r},k.Z=function(e,t){return e=e||[],e.__proto__=i.fn,e.selector=t||"",e},k.isZ=function(e){return e instanceof k.Z},k.init=function(t,n){var a;if(!t)return k.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&u.test(t))a=k.fragment(t,RegExp.$1,n),t=null;else{if(n!==e)return i(n).find(t);a=k.qsa(l,t)}else{if(D(t))return i(l).ready(t);if(k.isZ(t))return t;if(N(t))a=M(t);else if(q(t))a=[t],t=null;else if(u.test(t))a=k.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==e)return i(n).find(t);a=k.qsa(l,t)}}return k.Z(a,t)},i=function(e,t){return k.init(e,t)},i.extend=function(e){var t,i=s.call(arguments,1);return"boolean"==typeof e&&(t=e,e=i.shift()),i.forEach(function(i){B(e,i,t)}),e},k.qsa=function(e,t){var i,n="#"==t[0],a=!n&&"."==t[0],r=n||a?t.slice(1):t,l=T.test(r);return P(e)&&l&&n?(i=e.getElementById(r))?[i]:[]:1!==e.nodeType&&9!==e.nodeType?[]:s.call(l&&!n?a?e.getElementsByClassName(r):e.getElementsByTagName(t):e.querySelectorAll(t))},i.contains=function(e,t){return e!==t&&e.contains(t)},i.type=A,i.isFunction=D,i.isWindow=I,i.isArray=N,i.isPlainObject=O,i.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},i.inArray=function(e,t,i){return a.indexOf.call(t,e,i)},i.camelCase=j,i.trim=function(e){return null==e?"":String.prototype.trim.call(e)},i.uuid=0,i.support={},i.expr={},i.map=function(e,t){var i,a,s,n=[];if(L(e))for(a=0;a<e.length;a++)i=t(e[a],a),null!=i&&n.push(i);else for(s in e)i=t(e[s],s),null!=i&&n.push(i);return R(n)},i.each=function(e,t){var i,n;if(L(e)){for(i=0;i<e.length;i++)if(t.call(e[i],i,e[i])===!1)return e}else for(n in e)if(t.call(e[n],n,e[n])===!1)return e;return e},i.grep=function(e,t){return r.call(e,t)},window.JSON&&(i.parseJSON=JSON.parse),i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){x["[object "+t+"]"]=t.toLowerCase()}),i.fn={forEach:a.forEach,reduce:a.reduce,push:a.push,sort:a.sort,indexOf:a.indexOf,concat:a.concat,map:function(e){return i(i.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return i(s.apply(this,arguments))},ready:function(e){return y.test(l.readyState)&&l.body?e(i):l.addEventListener("DOMContentLoaded",function(){e(i)},!1),this},get:function(t){return t===e?s.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return a.every.call(this,function(t,i){return e.call(t,i,t)!==!1}),this},filter:function(e){return D(e)?this.not(this.not(e)):i(r.call(this,function(t){return k.matches(t,e)}))},add:function(e,t){return i(S(this.concat(i(e,t))))},is:function(e){return this.length>0&&k.matches(this[0],e)},not:function(t){var n=[];if(D(t)&&t.call!==e)this.each(function(e){t.call(this,e)||n.push(this)});else{var a="string"==typeof t?this.filter(t):L(t)&&D(t.item)?s.call(t):i(t);this.forEach(function(e){a.indexOf(e)<0&&n.push(e)})}return i(n)},has:function(e){return this.filter(function(){return q(e)?i.contains(this,e):i(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!q(e)?e:i(e)},last:function(){var e=this[this.length-1];return e&&!q(e)?e:i(e)},find:function(e){var t,n=this;return t="object"==typeof e?i(e).filter(function(){var e=this;return a.some.call(n,function(t){return i.contains(t,e)})}):1==this.length?i(k.qsa(this[0],e)):this.map(function(){return k.qsa(this,e)})},closest:function(e,t){var n=this[0],a=!1;for("object"==typeof e&&(a=i(e));n&&!(a?a.indexOf(n)>=0:k.matches(n,e));)n=n!==t&&!P(n)&&n.parentNode;return i(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=i.map(n,function(e){return(e=e.parentNode)&&!P(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return Z(t,e)},parent:function(e){return Z(S(this.pluck("parentNode")),e)},children:function(e){return Z(this.map(function(){return H(this)}),e)},contents:function(){return this.map(function(){return s.call(this.childNodes)})},siblings:function(e){return Z(this.map(function(e,t){return r.call(H(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return i.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=z(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=D(e);if(this[0]&&!t)var n=i(e).get(0),a=n.parentNode||this.length>1;return this.each(function(s){i(this).wrapAll(t?e.call(this,s):a?n.cloneNode(!0):n)})},wrapAll:function(e){if(this[0]){i(this[0]).before(e=i(e));for(var t;(t=e.children()).length;)e=t.first();i(e).append(this)}return this},wrapInner:function(e){var t=D(e);return this.each(function(n){var a=i(this),s=a.contents(),r=t?e.call(this,n):e;s.length?s.wrapAll(r):a.append(r)})},unwrap:function(){return this.parent().each(function(){i(this).replaceWith(i(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var n=i(this);(t===e?"none"==n.css("display"):t)?n.show():n.hide()})},prev:function(e){return i(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return i(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(t){var n=this.innerHTML;i(this).empty().append(J(this,e,t,n))})},text:function(t){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t===e?"":""+t})},attr:function(i,n){var a;return"string"==typeof i&&n===e?0==this.length||1!==this[0].nodeType?e:"value"==i&&"INPUT"==this[0].nodeName?this.val():!(a=this[0].getAttribute(i))&&i in this[0]?this[0][i]:a:this.each(function(e){if(1===this.nodeType)if(q(i))for(t in i)X(this,t,i[t]);else X(this,i,J(this,n,e,this.getAttribute(i)))})},removeAttr:function(e){return this.each(function(){1===this.nodeType&&X(this,e)})},prop:function(t,i){return t=E[t]||t,i===e?this[0]&&this[0][t]:this.each(function(e){this[t]=J(this,i,e,this[t])})},data:function(t,i){t="data-"+t.replace(p,"-$1").toLowerCase();var n=this[0];if(n._data_cache||(n._data_cache={}),i===e){var a=n._data_cache[t]||(n._data_cache[t]=W(n.getAttribute(t)));return a}return n._data_cache[t]=i,D(i)||k.isZ(i)?this:this.attr(t,i)},val:function(e){return 0===arguments.length?this[0]&&(this[0].multiple?i(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(t){this.value=J(this,e,t,this.value)})},offset:function(e){if(e)return this.each(function(t){var n=i(this),a=J(this,e,t,n.offset()),s=n.offsetParent().offset(),r={top:a.top-s.top,left:a.left-s.left};"static"==n.css("position")&&(r.position="relative"),n.css(r)});if(0==this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,n){if(arguments.length<2){var a=this[0],s=getComputedStyle(a,"");if(!a)return;if("string"==typeof e)return a.style[j(e)]||s.getPropertyValue(e);if(N(e)){var r={};return i.each(N(e)?e:[e],function(e,t){r[t]=a.style[j(t)]||s.getPropertyValue(t)}),r}}var l="";if("string"==A(e))n||0===n?l=U(e)+":"+V(e,n):this.each(function(){this.style.removeProperty(U(e))});else for(t in e)e[t]||0===e[t]?l+=U(t)+":"+V(t,e[t])+";":this.each(function(){this.style.removeProperty(U(t))});return this.each(function(){this.style.cssText+=";"+l})},index:function(e){return e?this.indexOf(i(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?a.some.call(this,function(e){return this.test(G(e))},F(e)):!1},addClass:function(e){return e?this.each(function(t){n=[];var a=G(this),s=J(this,e,t,a);s.split(/\s+/g).forEach(function(e){i(this).hasClass(e)||n.push(e)},this),n.length&&G(this,a+(a?" ":"")+n.join(" "))}):this},removeClass:function(t){return this.each(function(i){return t===e?G(this,""):(n=G(this),J(this,t,i,n).split(/\s+/g).forEach(function(e){n=n.replace(F(e)," ")}),void G(this,n.trim()))})},toggleClass:function(t,n){return t?this.each(function(a){var s=i(this),r=J(this,t,a,G(this));r.split(/\s+/g).forEach(function(t){(n===e?!s.hasClass(t):n)?s.addClass(t):s.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var i="scrollTop"in this[0];return t===e?i?this[0].scrollTop:this[0].pageYOffset:this.each(i?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var i="scrollLeft"in this[0];return t===e?i?this[0].scrollLeft:this[0].pageXOffset:this.each(i?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),a=f.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(i(e).css("margin-top"))||0,n.left-=parseFloat(i(e).css("margin-left"))||0,a.top+=parseFloat(i(t[0]).css("border-top-width"))||0,a.left+=parseFloat(i(t[0]).css("border-left-width"))||0,{top:n.top-a.top,left:n.left-a.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||l.body;e&&!f.test(e.nodeName)&&"static"==i(e).css("position");)e=e.offsetParent;return e})}},i.fn.detach=i.fn.remove,["width","height"].forEach(function(t){var n=t.replace(/./,function(e){return e[0].toUpperCase()});i.fn[t]=function(a){var s,r=this[0];return a===e?I(r)?r["inner"+n]:P(r)?r.documentElement["scroll"+n]:(s=this.offset())&&s[t]:this.each(function(e){r=i(this),r.css(t,J(this,a,e,r[t]()))})}}),g.forEach(function(e,t){var n=t%2;i.fn[e]=function(){var e,s,a=i.map(arguments,function(t){return e=A(t),"object"==e||"array"==e||null==t?t:k.fragment(t)}),r=this.length>1;return a.length<1?this:this.each(function(e,l){s=n?l:l.parentNode,l=0==t?l.nextSibling:1==t?l.firstChild:2==t?l:null,a.forEach(function(e){if(r)e=e.cloneNode(!0);else if(!s)return i(e).remove();Y(s.insertBefore(e,l),function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},i.fn[n?e+"To":"insert"+(t?"Before":"After")]=function(t){return i(t)[e](this),this}}),k.Z.prototype=i.fn,k.uniq=S,k.deserializeValue=W,i.zepto=k,i}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(e){function u(e){return e._zid||(e._zid=t++)}function h(e,t,i,n){if(t=m(t),t.ns)var a=f(t.ns);return(r[u(e)]||[]).filter(function(e){return!(!e||t.e&&e.e!=t.e||t.ns&&!a.test(e.ns)||i&&u(e.fn)!==u(i)||n&&e.sel!=n)})}function m(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function f(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function p(e,t){return e.del&&!o&&e.e in d||!!t}function v(e){return c[e]||o&&d[e]||e}function g(t,n,a,s,l,o,d){var h=u(t),f=r[h]||(r[h]=[]);n.split(/\s/).forEach(function(n){if("ready"==n)return e(document).ready(a);var r=m(n);r.fn=a,r.sel=l,r.e in c&&(a=function(t){var i=t.relatedTarget;return!i||i!==this&&!e.contains(this,i)?r.fn.apply(this,arguments):void 0}),r.del=o;var u=o||a;r.proxy=function(e){if(e=x(e),!e.isImmediatePropagationStopped()){e.data=s;var n=u.apply(t,e._args==i?[e]:[e].concat(e._args));return n===!1&&(e.preventDefault(),e.stopPropagation()),n}},r.i=f.length,f.push(r),"addEventListener"in t&&t.addEventListener(v(r.e),r.proxy,p(r,d))})}function b(e,t,i,n,a){var s=u(e);(t||"").split(/\s/).forEach(function(t){h(e,t,i,n).forEach(function(t){delete r[s][t.i],"removeEventListener"in e&&e.removeEventListener(v(t.e),t.proxy,p(t,a))})})}function x(t,n){return(n||!t.isDefaultPrevented)&&(n||(n=t),e.each(T,function(e,i){var a=n[e];t[e]=function(){return this[i]=_,a&&a.apply(n,arguments)},t[i]=w}),(n.defaultPrevented!==i?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=_)),t}function $(e){var t,n={originalEvent:e};for(t in e)y.test(t)||e[t]===i||(n[t]=e[t]);return x(n,e)}var i,t=1,n=Array.prototype.slice,a=e.isFunction,s=function(e){return"string"==typeof e},r={},l={},o="onfocusin"in window,d={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};l.click=l.mousedown=l.mouseup=l.mousemove="MouseEvents",e.event={add:g,remove:b},e.proxy=function(t,i){if(a(t)){var n=function(){return t.apply(i,arguments)};return n._zid=u(t),n}if(s(i))return e.proxy(t[i],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,i){return this.on(e,t,i)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,i,n){return this.on(e,t,i,n,1)};var _=function(){return!0},w=function(){return!1},y=/^([A-Z]|returnValue$|layer[XY]$)/,T={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,i){return this.on(t,e,i)},e.fn.undelegate=function(e,t,i){return this.off(t,e,i)},e.fn.live=function(t,i){return e(document.body).delegate(this.selector,t,i),this},e.fn.die=function(t,i){return e(document.body).undelegate(this.selector,t,i),this},e.fn.on=function(t,r,l,o,d){var c,u,h=this;return t&&!s(t)?(e.each(t,function(e,t){h.on(e,r,l,t,d)}),h):(s(r)||a(o)||o===!1||(o=l,l=r,r=i),(a(l)||l===!1)&&(o=l,l=i),o===!1&&(o=w),h.each(function(i,a){d&&(c=function(e){return b(a,e.type,o),o.apply(this,arguments)}),r&&(u=function(t){var i,s=e(t.target).closest(r,a).get(0);return s&&s!==a?(i=e.extend($(t),{currentTarget:s,liveFired:a}),(c||o).apply(s,[i].concat(n.call(arguments,1)))):void 0}),g(a,t,o,l,r,u||c)}))},e.fn.off=function(t,n,r){var l=this;return t&&!s(t)?(e.each(t,function(e,t){l.off(e,n,t)}),l):(s(n)||a(r)||r===!1||(r=n,n=i),r===!1&&(r=w),l.each(function(){b(this,t,r,n)}))},e.fn.trigger=function(t,i){return t=s(t)||e.isPlainObject(t)?e.Event(t):x(t),t._args=i,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,i)})},e.fn.triggerHandler=function(t,i){var n,a;return this.each(function(r,l){n=$(s(t)?e.Event(t):t),n._args=i,n.target=l,e.each(h(l,t.type||t),function(e,t){return a=t.proxy(n),n.isImmediatePropagationStopped()?!1:void 0})}),a},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),e.Event=function(e,t){s(e)||(t=e,e=t.type);var i=document.createEvent(l[e]||"Events"),n=!0;if(t)for(var a in t)"bubbles"==a?n=!!t[a]:i[a]=t[a];return i.initEvent(e,n,!0),x(i)}}(Zepto),function(e){function u(t,i,n){var a=e.Event(i);return e(t).trigger(a,n),!a.isDefaultPrevented()}function h(e,t,n,a){return e.global?u(t||i,n,a):void 0}function m(t){t.global&&0===e.active++&&h(t,null,"ajaxStart")}function f(t){t.global&&!--e.active&&h(t,null,"ajaxStop")}function p(e,t){var i=t.context;return t.beforeSend.call(i,e,t)===!1||h(t,i,"ajaxBeforeSend",[e,t])===!1?!1:void h(t,i,"ajaxSend",[e,t])}function v(e,t,i,n){var a=i.context,s="success";i.success.call(a,e,s,t),n&&n.resolveWith(a,[e,s,t]),h(i,a,"ajaxSuccess",[t,i,e]),b(s,t,i)}function g(e,t,i,n,a){var s=n.context;n.error.call(s,i,t,e),a&&a.rejectWith(s,[i,t,e]),h(n,s,"ajaxError",[i,n,e||t]),b(t,i,n)}function b(e,t,i){var n=i.context;i.complete.call(n,t,e),h(i,n,"ajaxComplete",[t,i]),f(i)}function _(){}function w(e){return e&&(e=e.split(";",2)[0]),e&&(e==d?"html":e==o?"json":r.test(e)?"script":l.test(e)&&"xml")||"text"}function y(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function T(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=y(t.url,t.data),t.data=void 0)}function x(t,i,n,a){return e.isFunction(i)&&(a=n,n=i,i=void 0),e.isFunction(n)||(a=n,n=void 0),{url:t,data:i,success:n,dataType:a}}function k(t,i,n,a){var s,r=e.isArray(i),l=e.isPlainObject(i);e.each(i,function(i,o){s=e.type(o),a&&(i=n?a:a+"["+(l||"object"==s||"array"==s?i:"")+"]"),!a&&r?t.add(o.name,o.value):"array"==s||!n&&"object"==s?k(t,o,n,i):t.add(i,o)})}var n,a,t=0,i=window.document,s=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,r=/^(?:text|application)\/javascript/i,l=/^(?:text|application)\/xml/i,o="application/json",d="text/html",c=/^\s*$/;e.active=0,e.ajaxJSONP=function(n,a){if(!("type"in n))return e.ajax(n);var d,h,s=n.jsonpCallback,r=(e.isFunction(s)?s():s)||"jsonp"+ ++t,l=i.createElement("script"),o=window[r],c=function(t){e(l).triggerHandler("error",t||"abort")},u={abort:c};return a&&a.promise(u),e(l).on("load error",function(t,i){clearTimeout(h),e(l).off().remove(),"error"!=t.type&&d?v(d[0],u,n,a):g(null,i||"error",u,n,a),window[r]=o,d&&e.isFunction(o)&&o(d[0]),o=d=void 0}),p(u,n)===!1?(c("abort"),u):(window[r]=function(){d=arguments},l.src=n.url.replace(/\?(.+)=\?/,"?$1="+r),i.head.appendChild(l),n.timeout>0&&(h=setTimeout(function(){c("timeout")},n.timeout)),u)},e.ajaxSettings={type:"GET",beforeSend:_,success:_,error:_,complete:_,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:o,xml:"application/xml, text/xml",html:d,text:"text/plain"},crossDomain:!0,timeout:0,processData:!0,cache:!0},e.ajax=function(t){var i=e.extend({},t||{}),s=e.Deferred&&e.Deferred();for(n in e.ajaxSettings)void 0===i[n]&&(i[n]=e.ajaxSettings[n]);m(i),i.crossDomain||(i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!=window.location.host),i.url||(i.url=window.location.toString()),T(i),i.cache===!1&&(i.url=y(i.url,"_="+Date.now()));var r=i.dataType,l=/\?.+=\?/.test(i.url);if("jsonp"==r||l)return l||(i.url=y(i.url,i.jsonp?i.jsonp+"=?":i.jsonp===!1?"":"callback=?")),e.ajaxJSONP(i,s);var x,o=i.accepts[r],d={},u=function(e,t){d[e.toLowerCase()]=[e,t]},h=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,f=i.xhr(),b=f.setRequestHeader;if(s&&s.promise(f),i.crossDomain||u("X-Requested-With","XMLHttpRequest"),u("Accept",o||"*/*"),(o=i.mimeType||o)&&(o.indexOf(",")>-1&&(o=o.split(",",2)[0]),f.overrideMimeType&&f.overrideMimeType(o)),(i.contentType||i.contentType!==!1&&i.data&&"GET"!=i.type.toUpperCase())&&u("Content-Type",i.contentType||"application/x-www-form-urlencoded"),i.headers)for(a in i.headers)u(a,i.headers[a]);if(f.setRequestHeader=u,f.onreadystatechange=function(){if(4==f.readyState){f.onreadystatechange=_,clearTimeout(x);var t,n=!1;if(f.status>=200&&f.status<300||304==f.status||0==f.status&&"file:"==h){r=r||w(i.mimeType||f.getResponseHeader("content-type")),t=f.responseText;try{"script"==r?(1,eval)(t):"xml"==r?t=f.responseXML:"json"==r&&(t=c.test(t)?null:e.parseJSON(t))}catch(a){n=a}n?g(n,"parsererror",f,i,s):v(t,f,i,s)}else g(f.statusText||null,f.status?"error":"abort",f,i,s)}},p(f,i)===!1)return f.abort(),g(null,"abort",f,i,s),f;if(i.xhrFields)for(a in i.xhrFields)f[a]=i.xhrFields[a];var $="async"in i?i.async:!0;f.open(i.type,i.url,$,i.username,i.password);for(a in d)b.apply(f,d[a]);return i.timeout>0&&(x=setTimeout(function(){f.onreadystatechange=_,f.abort(),g(null,"timeout",f,i,s)},i.timeout)),f.send(i.data?i.data:null),f},e.get=function(){return e.ajax(x.apply(null,arguments))},e.post=function(){var t=x.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=x.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,i,n){if(!this.length)return this;var l,a=this,r=t.split(/\s/),o=x(t,i,n),d=o.success;return r.length>1&&(o.url=r[0],l=r[1]),o.success=function(t){a.html(l?e("<div>").html(t.replace(s,"")).find(l):t),d&&d.apply(a,arguments)},e.ajax(o),this};var $=encodeURIComponent;e.param=function(e,t){var i=[];return i.add=function(e,t){this.push($(e)+"="+$(t))},k(i,e,t),i.join("&").replace(/%20/g,"+")}}(Zepto),function(e){e.fn.serializeArray=function(){var i,t=[];return e([].slice.call(this.get(0).elements)).each(function(){i=e(this);var n=i.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&("radio"!=n&&"checkbox"!=n||this.checked)&&t.push({name:i.attr("name"),value:i.val()})}),t},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var i=e.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(t,i){return t=t||[],e.extend(t,e.fn),t.selector=i||"",t.__Z=!0,t},isZ:function(t){return"array"===e.type(t)&&"__Z"in t}});try{getComputedStyle(void 0)}catch(t){var i=getComputedStyle;window.getComputedStyle=function(e){try{return i(e)}catch(t){return null}}}}(Zepto),define&&define("zepto",[],function(){return Zepto});!function(e){function o(e,t,i,n){return Math.abs(e-t)>=Math.abs(i-n)?e-t>0?"Left":"Right":i-n>0?"Up":"Down"}function d(){if(s=null,t.last){var i=e.Event("longTap");i.cancelTouch=u,t.el.trigger(i)}}function c(){s&&clearTimeout(s),s=null}function u(){i&&clearTimeout(i),n&&clearTimeout(n),a&&clearTimeout(a),s&&clearTimeout(s),i=n=a=s=null,t={}}function h(e,t){return e.type=="mouse"+t}var i,n,a,s,t={},r=750;e(document).ready(function(){var n,l,p,m=0,f=0,v="ontouchstart"in document?["touchstart","touchmove","touchend","touchcancel"]:["mousedown","mousemove","mouseup","mouseleave"];e(document).on(v[0],function(a){m=f=0,p=h(a,"down")?a:a.touches[0],a.touches&&1===a.touches.length&&t.x2&&(t.x2=void 0,t.y2=void 0),n=Date.now(),l=n-(t.last||n),t.el=e("tagName"in p.target?p.target:p.target.parentNode),i&&clearTimeout(i),t.x1=p.pageX,t.y1=p.pageY,l>0&&250>=l&&(t.isDoubleTap=!0),t.last=n,s=setTimeout(d,r)}).on(v[1],function(e){("mousemove"!=e.type||"last"in t)&&(p="mousemove"==e.type?e:e.touches[0],c(),t.x2=p.pageX,t.y2=p.pageY,m+=Math.abs(t.x1-t.x2),f+=Math.abs(t.y1-t.y2))}).on(v[2],function(n){if(c(),t.x2&&Math.abs(t.x1-t.x2)>30||t.y2&&Math.abs(t.y1-t.y2)>30)a=setTimeout(function(){t.el.trigger("swipe"),t.el.trigger("swipe"+o(t.x1,t.x2,t.y1,t.y2)),t={}},0);else if("last"in t)if(30>m&&30>f&&!n.cancelTap){var s=e.Event("tap");s.cancelTouch=u,t.el.trigger(s),t.isDoubleTap?(t.el&&t.el.trigger("doubleTap"),t={}):i=setTimeout(function(){i=null,t.el&&t.el.trigger("singleTap"),t={}},250)}else t={};m=f=0}).on(v[3],u),e(window).on("scroll",u)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})}(Zepto);!function(e,t){function y(e){return e.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function w(e){return n?n+e:e.toLowerCase()}var n,c,u,h,m,f,p,v,g,b,i="",r={Webkit:"webkit",Moz:"",O:"o"},l=window.document,o=l.createElement("div"),d=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,_={};e.each(r,function(e,a){return o.style[e+"TransitionProperty"]!==t?(i="-"+e.toLowerCase()+"-",n=a,!1):void 0}),c=i+"transform",_[u=i+"transition-property"]=_[h=i+"transition-duration"]=_[f=i+"transition-delay"]=_[m=i+"transition-timing-function"]=_[p=i+"animation-name"]=_[v=i+"animation-duration"]=_[b=i+"animation-delay"]=_[g=i+"animation-timing-function"]="",e.fx={off:n===t&&o.style.transitionProperty===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:i,transitionEnd:w("TransitionEnd"),animationEnd:w("AnimationEnd")},e.fn.animate=function(i,n,a,s,r){return e.isFunction(n)&&(s=n,a=t,n=t),e.isFunction(a)&&(s=a,a=t),e.isPlainObject(n)&&(a=n.easing,s=n.complete,r=n.delay,n=n.duration),n&&(n=("number"==typeof n?n:e.fx.speeds[n]||e.fx.speeds._default)/1e3),r&&(r=parseFloat(r)/1e3),this.anim(i,n,a,s,r)},e.fn.anim=function(i,n,a,s,r){var l,w,$,o={},T="",x=this,k=e.fx.transitionEnd,j=!1;if(n===t&&(n=e.fx.speeds._default/1e3),r===t&&(r=0),e.fx.off&&(n=0),"string"==typeof i)o[p]=i,o[v]=n+"s",o[b]=r+"s",o[g]=a||"linear",k=e.fx.animationEnd;else{w=[];for(l in i)d.test(l)?T+=l+"("+i[l]+") ":(o[l]=i[l],w.push(y(l)));T&&(o[c]=T,w.push(c)),n>0&&"object"==typeof i&&(o[u]=w.join(", "),o[h]=n+"s",o[f]=r+"s",o[m]=a||"linear")}return $=function(t){if("undefined"!=typeof t){if(t.target!==t.currentTarget)return;e(t.target).unbind(k,$)}else e(this).unbind(k,$);j=!0,e(this).css(_),s&&s.call(this)},n>0&&(this.bind(k,$),setTimeout(function(){j||$.call(x)},1e3*n+25)),this.size()&&this.get(0).clientLeft,this.css(o),0>=n&&setTimeout(function(){x.each(function(){$.call(this)})},0),this},o=null}(Zepto);!function(e,t){e.matchMedia=function(){var t=0,i="sl-media-detect",n=e.fx.transitionEnd,a=e.fx.cssPrefix,s=e("<style></style>").append("."+i+"{"+a+"transition: width 0.001ms; width: 0; position: absolute; clip: rect(1px, 1px, 1px, 1px);}\n").appendTo("head");return function(a){var o,d,r=i+t++,l=[],c=1,u=[],h=0,m=function(e,t){-1==u.indexOf(e)&&(u.push(e),s.append("@media "+e+" { #"+r+" { width: "+c+"px; } }\n"),c++,("undefined"==typeof t||t)&&h++)};return m(a,!1),o=e('<div class="'+i+'" id="'+r+'"></div>').appendTo("body").on(n,function(){return h>0?void h--:(d.matches=1===o.width(),void e.each(l,function(t,i){e.isFunction(i)&&i.call(d,d)}))}),d={append:m,matches:1===o.width(),media:a,addListener:function(e){return l.push(e),this},removeListener:function(e){var t=l.indexOf(e);return~t&&l.splice(t,1),this}}}}()}(Zepto);!function(e,t){e.mediaQuery={ortchange:"screen and (width: "+window.innerWidth+"px)"},e(function(){e.matchMedia(e.mediaQuery.ortchange).addListener(function(){e(window).trigger("ortchange")}),e.matchMedia("screen and (height: "+window.innerHeight+"px)").addListener(function(){this.append("screen and (height: "+window.innerHeight+"px)"),e(window).trigger("heightchange")})})}(Zepto);define("util",function(){var d,e=Array.prototype,t=e.slice,i=e.concat,n=navigator.userAgent,a=n.match(/(iPhone|iPad|iPod).*OS\s([\d_]+)/i),s=n.match(/MSIE (\d+)/i),r=n.match(/(Android);?[\s\/]+([\d.]+)?/),o=!!r,l=0;a?d=a[2].split("_"):r?d=r[2].split("."):s&&(d=s[1].split("."));var c={ios:!!a,ie:!!s,android:o,osVersion:d?parseFloat(d[0]+"."+d[1]):0,isInWechat:/micromessenger/i.test(navigator.userAgent),guid:function(){return++l},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},extend:function(e){var t=this,i=function(){t.apply(this,arguments)},n=function(){this.constructor=i};n.prototype=t.prototype,i.prototype=new n;for(var a in e)i.prototype[a]=e[a];for(var a in t)i[a]=t[a];return i},random:function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},log:function(e){this.$log||(this.$log=$('<div style="height:40px;position:fixed;top:0;left:0;right:0;z-index:100000;background:#fff;"></div>').appendTo("body")),this.$log.html(e+"|"+this.$log.html())},indexOf:function(e,t){for(var i="function"==typeof t,n=e.length,a=0;n>a;a++)if(i?t(e[a],a):e[a]==t)return a;return-1},lastIndexOf:function(e,t){for(var i="function"==typeof t,n=e.length-1;n>=0;n--)if(i?t(e[n],n):e[n]==t)return n;return-1},first:function(e,t){for(var i,n=0,a=e.length;a>n;n++)if(i=e[n],t(i,n))return i;return null},find:function(e,t){for(var n,i=[],a=0,s=e.length;s>a;a++)n=e[a],t(n,a)&&i.push(n);return i},select:function(e,t){for(var i=[],n=e.length,a=0;n>a;a++)i.push(t(e[a],a));return i},pick:function(e,n){var s,a={};if(null==e)return a;if("function"==typeof n)for(s in e){var r=e[s];n(r,s,e)&&(a[s]=r)}else for(var o=i.apply([],t.call(arguments,1)),l=0,d=o.length;d>l;l++)s=o[l],s in e&&(a[s]=e[s]);return a},pad:function(e,t){var i="0000000000000000"+e;return i.substr(i.length-(t||2))},formatDate:function(e,t){"string"==typeof e&&/^\/Date\(\d+\)\/$/.test(e)?e=new Function("return new "+e.replace(/\//g,""))():"number"==typeof e&&(e=new Date(e));var i=e.getFullYear()+"",n=e.getMonth()+1,a=e.getDate(),s=e.getHours(),r=e.getMinutes(),o=e.getSeconds(),l=e.getMilliseconds()+"0000",d=this.pad;return(t||"yyyy-MM-dd HH:mm:ss").replace(/\y{4}/,i).replace(/y{2}/,i.substr(2,2)).replace(/M{2}/,d(n)).replace(/M/,n).replace(/d{2,}/,d(a)).replace(/d/,e).replace(/H{2,}/i,d(s)).replace(/H/i,s).replace(/m{2,}/,d(r)).replace(/m/,r).replace(/s{2,}/,d(o)).replace(/s/,o).replace(/f+/,function(e){return l.substr(0,e.length)})},style:function(e){var t=document,i=t.getElementsByTagName("head")[0],n=t.createElement("style");n.type="text/css";try{n.appendChild(t.createTextNode(e))}catch(a){n.styleSheet.cssText=e}return i.appendChild(n),n},template:function(e,t){var i="var __p=[];var $data=obj||{};with($data){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(e,t){return"',"+t.replace(/\\'/,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(e,t){return"');"+t.replace(/\\'/,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+'\');}return __p.join("");',n=new Function("obj",i);return t?n(t):n},encodeHTML:function(e){return(""+e).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#34;").split("'").join("&#39;")},getPath:function(e){return e.replace(/^http\:\/\/[^\/]+|\?.*$/g,"").toLowerCase()},cookie:function(e,t,i,n){if("undefined"==typeof t){var a=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=a?unescape(a[2]):null}if(null===typeof t){if(t=this.cookie(name),null==t)return;i=-1}if(i){var s=new Date;s.setTime(s.getTime()+24*i*60*60*1e3),i=";expires="+s.toGMTString()}document.cookie=e+"="+escape(t)+(i||"")+";path="+(n||"/")},store:window.localStorage?function(e,t){return"undefined"==typeof t?JSON.parse(localStorage.getItem(e)):void(null===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t)))}:function(){return"undefined"==typeof value?JSON.parse(this.cookie(key)):void(null===value?this.cookie(key,null):this.cookie(key,JSON.stringify(value)))},noop:function(){},validateEmail:function(e){return/^[-_a-zA-Z0-9\.]+@([-_a-zA-Z0-9]+\.)+[a-zA-Z0-9]{2,3}$/.test(e)},validateMobile:function(e){return/^1[0-9]{10}$/.test(e)}};return c});define("bridge",function(e,t,i){var n=e("$"),a=e("util"),s=navigator.userAgent,r=a.ios,o=a.android,d=(Array.prototype.slice,n(window)),u=n('meta[name="api-base-url"]').attr("content");window.hybridFunctions={},window.complete=function(){r&&0!=h.length&&(h.shift(),0!=h.length&&(location.href=h.shift()))},window.trigger=window.app_trigger=function(){n.fn.trigger.apply(d,arguments)},window.callJS=function(e){d.trigger(e.method,e.params)};var h=[],m=0,f=function(e,t,i){var a,n={method:e};if(i="function"==typeof t?t:i,t="function"==typeof t?null:t,n.params=t,"function"==typeof i&&(a="hybridCallback"+ ++m,n.callback=a,hybridFunctions[a]=function(){i.apply(null,arguments),delete hybridFunctions[a]}),p.isDevelopment)switch(n.method){case"exitLauncher":hybridFunctions[a]()}else r?alert(JSON.stringify(n)):o&&prompt(JSON.stringify(n))},p={isInApp:/SLApp/.test(s),isAndroid:o,android:o,ios:r,versionName:"1.0",exec:f,exitLauncher:function(e){f("exitLauncher",function(){e&&e()})},tip:function(e){f("tip",e+"")},pickImage:function(e){f("pickImage",e)},takePhoto:function(e){setTimeout(function(){f("takePhoto",e)},0)},queryThumbnailList:function(e){f("queryThumbnailList",e)},pickColor:function(e){f("pickColor",e)},pay:function(e,t){f("pay",e,t)},share:function(){f("share")},isDevelopment:"Win32"==navigator.platform||"Win64"==navigator.platform,url:function(e){return/^http\:\/\//.test(e)?e:u+e},post:function(e,t,i,n){n="function"==typeof i?i:n,i="function"==typeof i?null:i,f("post",{url:this.url(e),files:i,data:t},n)},exit:function(){f("exit")},update:function(e,t,i){f("updateApp",{downloadUrl:e,versionName:t},i)}};p.hasStatusBar=p.isInApp&&a.ios&&a.osVersion>=7;var v=!1;return d.on("back",function(){var e=location.hash;""==e||"#"===e||"/"===e||"#/"===e?v?p.exit():(v=!0,setTimeout(function(){v=!1},2e3),p.tip("再按一次退出程序")):history.back()}),p});define("graphics/matrix2d",function(){function e(e,t,i,n,a,s){this.setValues(e,t,i,n,a,s)}var t=e.prototype;return e.DEG_TO_RAD=Math.PI/180,e.identity=null,t.setValues=function(e,t,i,n,a,s){return this.a=null==e?1:e,this.b=t||0,this.c=i||0,this.d=null==n?1:n,this.tx=a||0,this.ty=s||0,this},t.append=function(e,t,i,n,a,s){var r=this.a,o=this.b,l=this.c,c=this.d;return(1!=e||0!=t||0!=i||1!=n)&&(this.a=r*e+l*t,this.b=o*e+c*t,this.c=r*i+l*n,this.d=o*i+c*n),this.tx=r*a+l*s+this.tx,this.ty=o*a+c*s+this.ty,this},t.prepend=function(e,t,i,n,a,s){var r=this.a,o=this.c,l=this.tx;return this.a=e*r+i*this.b,this.b=t*r+n*this.b,this.c=e*o+i*this.d,this.d=t*o+n*this.d,this.tx=e*l+i*this.ty+a,this.ty=t*l+n*this.ty+s,this},t.appendMatrix=function(e){return this.append(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.prependMatrix=function(e){return this.prepend(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.appendTransform=function(t,i,n,a,s,r,o,l,c){if(s%360)var d=s*e.DEG_TO_RAD,u=Math.cos(d),h=Math.sin(d);else u=1,h=0;return r||o?(r*=e.DEG_TO_RAD,o*=e.DEG_TO_RAD,this.append(Math.cos(o),Math.sin(o),-Math.sin(r),Math.cos(r),t,i),this.append(u*n,h*n,-h*a,u*a,0,0)):this.append(u*n,h*n,-h*a,u*a,t,i),(l||c)&&(this.tx-=l*this.a+c*this.c,this.ty-=l*this.b+c*this.d),this},t.prependTransform=function(t,i,n,a,s,r,o,l,c){if(s%360)var d=s*e.DEG_TO_RAD,u=Math.cos(d),h=Math.sin(d);else u=1,h=0;return(l||c)&&(this.tx-=l,this.ty-=c),r||o?(r*=e.DEG_TO_RAD,o*=e.DEG_TO_RAD,this.prepend(u*n,h*n,-h*a,u*a,0,0),this.prepend(Math.cos(o),Math.sin(o),-Math.sin(r),Math.cos(r),t,i)):this.prepend(u*n,h*n,-h*a,u*a,t,i),this},t.rotate=function(t){t*=e.DEG_TO_RAD;var i=Math.cos(t),n=Math.sin(t),a=this.a,s=this.b;return this.a=a*i+this.c*n,this.b=s*i+this.d*n,this.c=-a*n+this.c*i,this.d=-s*n+this.d*i,this},t.skew=function(t,i){return t*=e.DEG_TO_RAD,i*=e.DEG_TO_RAD,this.append(Math.cos(i),Math.sin(i),-Math.sin(t),Math.cos(t),0,0),this},t.scale=function(e,t){return this.a*=e,this.b*=e,this.c*=t,this.d*=t,this},t.translate=function(e,t){return this.tx+=this.a*e+this.c*t,this.ty+=this.b*e+this.d*t,this},t.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},t.invert=function(){var e=this.a,t=this.b,i=this.c,n=this.d,a=this.tx,s=e*n-t*i;return this.a=n/s,this.b=-t/s,this.c=-i/s,this.d=e/s,this.tx=(i*this.ty-n*a)/s,this.ty=-(e*this.ty-t*a)/s,this},t.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},t.equals=function(e){return this.tx===e.tx&&this.ty===e.ty&&this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d},t.transformPoint=function(e,t,i){return i=i||{},i.x=e*this.a+t*this.c+this.tx,i.y=e*this.b+t*this.d+this.ty,i},t.decompose=function(t){null==t&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var i=Math.atan2(-this.c,this.d),n=Math.atan2(this.b,this.a),a=Math.abs(1-i/n);return 1e-5>a?(t.rotation=n/e.DEG_TO_RAD,this.a<0&&this.d>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=i/e.DEG_TO_RAD,t.skewY=n/e.DEG_TO_RAD),t},t.copy=function(e){return this.setValues(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.clone=function(){return new e(this.a,this.b,this.c,this.d,this.tx,this.ty)},t.toString=function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty+")"},e});define("graphics/tween",function(e,t,i){i.exports={linear:function(e,t,i,n){return i*e/n+t},ease:function(e,t,i,n){return-i*((e=e/n-1)*e*e*e-1)+t},easeIn:function(e,t,i,n){return i*(e/=n)*e+t},easeOut:function(e,t,i,n){return-i*(e/=n)*(e-2)+t},easeInOut:function(e,t,i,n){return(e/=n/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,i,n){return i*(e/=n)*e*e+t},easeOutCubic:function(e,t,i,n){return i*((e=e/n-1)*e*e+1)+t},easeInOutCubic:function(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,i,n){return i*(e/=n)*e*e*e+t},easeOutQuart:function(e,t,i,n){return-i*((e=e/n-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e*e+t:-i/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,i,n){return i*(e/=n)*e*e*e*e+t},easeOutQuint:function(e,t,i,n){return i*((e=e/n-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,i,n){return-i*Math.cos(e/n*(Math.PI/2))+i+t},easeOutSine:function(e,t,i,n){return i*Math.sin(e/n*(Math.PI/2))+t},easeInOutSine:function(e,t,i,n){return-i/2*(Math.cos(Math.PI*e/n)-1)+t},easeInExpo:function(e,t,i,n){return 0==e?t:i*Math.pow(2,10*(e/n-1))+t},easeOutExpo:function(e,t,i,n){return e==n?t+i:i*(-Math.pow(2,-10*e/n)+1)+t},easeInOutExpo:function(e,t,i,n){return 0==e?t:e==n?t+i:(e/=n/2)<1?i/2*Math.pow(2,10*(e-1))+t:i/2*(-Math.pow(2,-10*--e)+2)+t},easeInCirc:function(e,t,i,n){return-i*(Math.sqrt(1-(e/=n)*e)-1)+t},easeOutCirc:function(e,t,i,n){return i*Math.sqrt(1-(e=e/n-1)*e)+t},easeInOutCirc:function(e,t,i,n){return(e/=n/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+t:i/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,i,n,a,s){if(0==e)return t;if(1==(e/=n))return t+i;if(s||(s=.3*n),!a||a<Math.abs(i)){a=i;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(i/a);return-(a*Math.pow(2,10*(e-=1))*Math.sin(2*(e*n-r)*Math.PI/s))+t},easeOutElastic:function(e,t,i,n,a,s){if(0==e)return t;if(1==(e/=n))return t+i;if(s||(s=.3*n),!a||a<Math.abs(i)){a=i;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(i/a);return a*Math.pow(2,-10*e)*Math.sin(2*(e*n-r)*Math.PI/s)+i+t},easeInOutElastic:function(e,t,i,n,a,s){if(0==e)return t;if(2==(e/=n/2))return t+i;if(s||(s=.3*n*1.5),!a||a<Math.abs(i)){a=i;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(i/a);return 1>e?-.5*a*Math.pow(2,10*(e-=1))*Math.sin(2*(e*n-r)*Math.PI/s)+t:a*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*n-r)*Math.PI/s)*.5+i+t},easeInBack:function(e,t,i,n,a){return void 0==a&&(a=1.70158),i*(e/=n)*e*((a+1)*e-a)+t},easeOutBack:function(e,t,i,n,a){return void 0==a&&(a=1.70158),i*((e=e/n-1)*e*((a+1)*e+a)+1)+t},easeInOutBack:function(e,t,i,n,a){return void 0==a&&(a=1.70158),(e/=n/2)<1?i/2*e*e*(((a*=1.525)+1)*e-a)+t:i/2*((e-=2)*e*(((a*=1.525)+1)*e+a)+2)+t},easeInBounce:function(e,t,i,n){return i-Tween.Bounce.easeOut(n-e,0,i,n)+t},easeOutBounce:function(e,t,i,n){return(e/=n)<1/2.75?7.5625*i*e*e+t:2/2.75>e?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,i,n){return n/2>e?.5*Tween.easeInOutBounce(2*e,0,i,n)+t:.5*Tween.easeInOutBounce(2*e-n,0,i,n)+.5*i+t}}});define("core/base",function(e,t,i){Object.create||(Object.create=function(e){var t=function(){};return t.prototype=e,new t}),Date.now||(Date.now=function(){return+new Date});var n=function(){var e=this,t=Array.prototype.slice.call(arguments),i=t.shift();if(i)for(var n in i)e.options[n]=i[n];e.initialize.apply(e,t),e.options.initialize&&e.options.initialize.apply(e,t)};n.prototype={options:{},initialize:function(){}},n.extend=function(e,t){var a,i=this;"function"!=typeof e&&(t=e,e=function(){i.apply(this,arguments)});var s=function(){this.constructor=e};if(s.prototype=i.prototype,e.prototype=new s,a=t.options,"undefined"!=typeof a){for(var r in a)e.prototype.options[r]=a[r];delete t.options}for(var r in t)e.prototype[r]=t[r];return e.__super__=i.prototype,e.extend=n.extend,e},window.sl=window.slan={},i.exports=n});define("core/promise",["./linklist"],function(e,t,i){var n=e("./linklist"),a=Array.prototype.slice,s=/^\$(\d+)$/,r=function(e,t,i){for(var o,n=[],a=0,r=e.length;r>a;a++)o=e[a],n.push("string"==typeof o?s.test(o)?t[parseInt(o.match(s)[1])]:o.replace(/^\$\$/,"$"):o);return n.push(i),n},o=function(e,t,i){if(!(this instanceof o))return new o(e,t,i);var a=this;this.queue=new n,this.state=2,this.resolveSelf=function(){a.resolve.apply(a,arguments)},e&&(this.state=0,this.then(e,t,i))};o.prototype={reject:function(e){this.resolve(e||"unknow error",null)},resolve:function(){var n,s,r,e=this,t=a.call(arguments),i=e.queue.shift();if(i)if(e.state=1,n=i[0],s=i[1],n instanceof o)n.then(e.resolveSelf);else if("function"==typeof n)r=n.apply(s,t),r instanceof o?r!==e&&r.then(e.resolveSelf):e.resolve(null,r);else if(n instanceof Array)for(var l=[],c=[],d=0,u=0,h=n.length;h>u;u++)!function(i,n,a){"function"==typeof i&&(i=i.apply(s,t)),i instanceof o?i.then(function(t,i){t&&(l[n]=t),d++,c[n]=i,d>=a&&e.resolve(l,c)}):(d++,c[n]=i,d>=a&&e.resolve(null,c))}(n[u],u,h);else e.resolve(null,t);else e.state=0;return e},when:function(e,t){return e instanceof Array||(e=[e]),this.queue.append([e,t||this]),1!=this.state&&this.resolve(),this},map:function(e,t,i){var n=this,a=function(){var i=arguments;return n._count=e.length,n.result=[],n.errors=[],e.forEach(function(e,a){e instanceof Array||(e=[e]),t.apply(this,r(e,i,function(e,t){n.next(a,e,t)}))}),n};return n.queue.append([a,i||this]),n},each:function(e,t,i){var n=this,a=function(){return n._count=e.length,n.result=[],n.errors=[],e.forEach(function(e,i){t.apply(this,[i,e])}),n};return n.queue.append([a,i||this]),n},next:function(e,t,i){this._count--,t&&(this.errors[e]=t),this.result[e]=i,this._count<=0&&this.resolve(this.errors.length?this.errors:null,this.result)},bind:function(e){var t=this;return function(){t.then(a.call(arguments),e,this)}},then:function(e,t,i){var a,n=this;return e instanceof Array?(a=t,t=function(){return a.apply(this,r(e,arguments,n.resolveSelf)),n}):(i=t,t=e,e=null),n.queue.append([t,i||this]),n.state||n.resolve(),n}},o.resolve=function(){return(new o).resolve()},i.exports=o});define("core/linklist",function(e,t,i){var n=function(){this._idlePrev=this,this._idleNext=this},a=function(e){return e._idlePrev==e?null:e._idlePrev},s=function(e){e._idleNext&&(e._idleNext._idlePrev=e._idlePrev),e._idlePrev&&(e._idlePrev._idleNext=e._idleNext),e._idleNext=null,e._idlePrev=null};n.prototype={length:0,init:function(e){e={data:e},this.list=e,this.length=1,e._idleNext=e,e._idlePrev=e},get:function(e){var t=null;return this.each(function(i){return e(i)===!0?(t=i,!1):void 0}),t},find:function(e){var t=[];return this.each(function(i){e(i)===!0&&t.push(i)}),t},first:function(){return this._idlePrev!=this?this._idlePrev.data:null},peek:function(){return this._idlePrev==this?null:this._idlePrev},each:function(e){for(var i,t=this._idlePrev;t!=this&&(i=t._idlePrev,e.call(t,t.data)!==!1);)t=i},next:a,append:function(e,t){return t||(e={data:e}),e._idleNext=this._idleNext,this._idleNext._idlePrev=e,e._idlePrev=this,this._idleNext=e,this.length++,e},contains:function(e){var t=!1;return this.each(function(i){return e===i?(t=!0,!1):void 0}),t},shift:function(){var e=this._idlePrev;return e!=this?(this._remove(e),e.data):null},_remove:function(e){0!=this.length&&(this.length--,s(e))},remove:function(e){var t=this;t.each(function(i){return i===e?(t._remove(this),!1):void 0})},isEmpty:function(){return this._idlePrev==this}},i.exports=n});define("core/event",function(e,t,i){function c(e,t,i){(e||"").split(r).forEach(function(e){i(e,t)})}function d(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function u(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function h(e,t,i,n){var a,s;return s=u(t),s.ns&&(a=d(s.ns)),e.filter(function(e){return!(!e||s.e&&e.e!==s.e||s.ns&&!a.test(e.ns)||i&&e.cb!==i&&e.cb._cb!==i||n&&e.ctx!==n)})}function m(e,t){return this instanceof m?(t&&n.extend(this,t),this.type=e,this):new m(e,t)}var n=e("$"),a=e("./base"),s=[].slice,r=/\s+/,o=function(){return!1},l=function(){return!0};return m.prototype={isDefaultPrevented:o,isPropagationStopped:o,preventDefault:function(){this.isDefaultPrevented=l},stopPropagation:function(){this.isPropagationStopped=l}},a.event={createEvent:m,on:function(e,t,i){var a,n=this;return t?(a=this._events||(this._events=[]),c(e,t,function(e,t){var s=u(e);s.cb=t,s.ctx=i,s.ctx2=i||n,s.id=a.length,a.push(s)}),this):this},one:function(e,t,i){var n=this;return t?(c(e,t,function(e,t){var a=function(){return n.off(e,a),t.apply(i||n,arguments)};a._cb=t,n.on(e,a,i)}),this):this},off:function(e,t,i){var n=this._events;return n?e||t||i?(c(e,t,function(e,t){h(n,e,t,i).forEach(function(e){delete n[e.id]})}),this):(this._events=[],this):this},trigger:function(e){var i,n,a,r,o,t=-1;if(!this._events||!e)return this;if("string"==typeof e&&(e=new m(e)),i=s.call(arguments,1),e.args=i,i.unshift(e),n=h(this._events,e.type))for(r=n.length;++t<r;)if((a=e.isPropagationStopped())||!1===(o=n[t]).cb.apply(o.ctx2,i)){a||(e.stopPropagation(),e.preventDefault());break}return this}},a.Event=m,a.event});define("core/view",function(e,t,i){var n=e("$"),a=e("util"),s=e("./base"),r=e("./event"),o=Array.prototype.slice,l=function(){var t,e=this,i=o.call(arguments),s=i.shift();e._bindListenTo=[],n.isPlainObject(s)?(t=s,s=null):t=i.shift(),e.options=n.extend({},e.options,t),e.options.className&&(e.className=e.options.className),e.options.el&&(e.el=e.options.el),e.cid=a.guid(),e.setElement(s||e.el),e.initialize.apply(e,i),e.options.initialize&&e.options.initialize.apply(e,i),e.on("Destroy",e.onDestroy)};l.prototype={options:{},initialize:a.noop,setElement:function(e,t){return e&&(this.$el&&this.undelegateEvents(),this.$el=n(e),this.el=this.$el[0],this.className&&this.$el.addClass(this.className),t!==!1&&this.delegateEvents()),this},on:r.on,one:r.one,off:r.off,trigger:r.trigger,undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},delegateEvents:function(){return this.listen(this.events),this.listen(this.options.events),this},listen:function(e,t){var i=this;if(t){var s=e.split(" "),r=s.shift().replace(/,/g,".delegateEvents"+i.cid+" ");t=n.proxy(n.isFunction(t)?t:i[t],i),s.length>0&&""!==s[0]?i.$el.on(r,s.join(" "),t):i.$el.on(r,t)}else for(var a in e)i.listen(a,e[a]);return i},listenTo:function(e){var t=o.apply(arguments),i=t[t.length-1];return"function"!=typeof e.on&&(e=n(e)),t[0]=e,t[t.length-1]=n.proxy(i,this),this._bindListenTo.push(o.apply(t)),t.shift().on.apply(e,t),this},$:function(e){return this.$el.find(e)},onDestroy:a.noop,destroy:function(){var i,t=(this.$el,this);n.each(this._bindListenTo,function(e,t){i=t.shift(),i.off.apply(i,t)}),t.undelegateEvents(),t.$el.remove(),t.trigger("Destroy")}},l.extend=function(){var a,e=this,t=o.call(arguments),i=t[0];return"function"!=typeof i?(i=null,t.unshift({})):t[0]={},a=n.extend.apply(n,t),i=s.extend.apply(e,i?[i,a]:[a]),i.prototype.events=n.extend({},i.__super__.events,i.prototype.events),i.extend=arguments.callee,i},i.exports=l});define("core/model",function(e,t,i){var n=e("$"),a=e("util"),r=(e("./base"),e("./event")),o=Array.prototype.slice,l={date:a.formatDate,json:function(e){return e instanceof y||e instanceof T?JSON.stringify(e.data):JSON.stringify(e)},join:function(e,t){return console.log(e),e instanceof T?e.data.join(t):e.join(t)},or:function(e,t){return e||t},lowercase:function(e){return e.toLowerCase()},uppercase:function(e){return e.toUpperCase()},concat:function(){return o.call(arguments).join("")},round:function(e){return Math.round(e)},format:function(e){var t=o.call(arguments),i=t[1];return t.splice(1,1),i.replace(/\{(\d+)\}/g,function(e,i){return t[i]})},"case":function(e){for(var t=o.call(arguments,1),i=0,n=t.length;n>i;i+=2)if(e==t[i])return t[i+1];return n%2==0?void 0:t[n-1]},_addListener:function(e,t,i,n,a,s,r){var c,o=!1;if(n&&"number"==typeof n&&(c="_bind_filter"+a.prop+n+"_"+r,t[c]?(c="_bind_filter"+a.prop+"_"+r,n[c]||(n[c]=o=!0)):t[c]=o=!0,o)){s=s.split(".");var d=s.pop();(s.length<=0?e:e.get(s)).on("change"+(d?":"+d:""),function(){t._setProp(n,a.prop,a.filter(l,t,t.data[i]))})}}},c=/\s*\|\s*([a-zA-Z_0-9]+)((?:\s*(?:\:|;)\s*([a-zA-Z_0-9\.-]+|\'[^\']*?\'))*)/g,d=/\s*\:\s*([a-zA-Z_0-9\.-]+|\'[^\']*?\')/g,u=function(e){return"if(el)Filter._addListener("+e+",model,key,el,self,"},h=function(e,t){var r,o,l,n="",a="var self=this;",s=0;return e.replace(c,function(e,i,c){n+="value=Filter."+i+"(value",c.replace(d,function(e,i){"'"==i[0]||/^((-)*\d+|true|false|undefined|null)$/.test(i)?n+=","+i:(r=i.split("."),o=r.shift(),!t||o!=t.alias&&!(l=t.modelAlias[o])?(n+=",model.root.data."+i,a+=u("model.root")+'"'+i+'",'+s++ +");"):i==t.alias?(n+=",model.data",a+=u("model.parent")+"model._key,"+s++ +");"):o==t.alias?(n+=",model.data"+i.substr(t.alias.length),a+=u("model")+'"'+i.substr(t.alias.length+1)+'",'+s++ +");"):(i=r.join("."),n+=',(function(){parent=model.parent.parent;while(parent){if( parent.key=="'+l+'^child"){'+u("parent")+'"'+i+'",'+s++ +"); return parent.data."+i+"; } parent=parent.parent.parent; } })()"))}),n+=");"}),n+="return value;",new Function("Filter","model","value","key","el",a+n)},f=/([a-zA-Z_0-9]+)\s+in\s+([a-zA-Z_0-9]+(?:\.[a-zA-Z_0-9]+){0,})(?:\s*\|\s*filter\s*\:\s*([a-zA-Z_0-9\.]+)(?:\s*\:\s*([a-zA-Z_0-9\.]+)){0,1}){0,1}(?:\s*\|\s*orderBy\s*\:\s*([a-zA-Z_0-9\.]+)(?:\s*\:\s*([a-zA-Z_0-9\.]+)){0,1}){0,1}/g,p=/\b([a-zA-Z_0-9-\.]+)\s*\:\s*([a-zA-Z_0-9]+)((?:\.[a-zA-Z_0-9]+)*)((?:\s*\|\s*[a-zA-Z_0-9]+(?:\s*\:\s*(?:[a-zA-Z_0-9\.-]+|'[^']*'))*)*)(\s|,|$)/g,m=/\b([a-zA-Z\s]+)\s*\:\s*([a-zA-Z_0-9]+)((?:\.[a-zA-Z_0-9]+)*)(\s|,|$)/g,v=function(e,t){return e.filter(t).add(e.find(t))},g=function(e,t){var i=t.split("."),n=i.shift();if(n==e.alias)return{collection:e.collectionName,variable:i.join(".")};var a=e.modelAlias[n];return a?{collection:a,variable:i.join(".")}:void 0},b=function(e){this.count=0,this.repeats={},this.bindings={},this.events=[],this.eventNames=[],this.eventid=0,this.scan(e)};b.prototype.scan=function(e){var o,l,i=this.repeats,a=this.bindings,s=this.events,r=this.eventNames,c=this.count,d=this.eventid;v(e,"[sn-repeat]").each(function(){l=n(this);var e=this,t=this.getAttribute("sn-repeat"),a=l.parents("[sn-repeat-alias]"),s={};a.each(function(){s[this.getAttribute("sn-repeat-alias")]=this.getAttribute("sn-repeat-name")}),t.replace(f,function(t,n,a,r,l,c,d){var f,p,u=a.split("."),h=u.length;1!==h&&(f=u[0],p=s[f],p&&(u[0]=p+"^child",a=u.join("."))),e.setAttribute("sn-repeat-alias",n),e.setAttribute("sn-repeat-name",a);var m=document.createElement("script");m.setAttribute("type","text/placeholder");var v,g={orderBy:c,reverse:d,filterName:r,comparator:l,collectionName:a,alias:n,modelAlias:s,template:e};1==h&&(g.placeHolder=m),o=i[a],o?v=a+"_"+o.push(g):(i[a]=[g],v=a+"_1"),g.placeHolderName=v,m.setAttribute("sn-placeholder",v),e.parentNode.insertBefore(m,e)})}).remove();for(var b in i)for(var y,_=i[b],w=0,x=_.length;x>w;w++)y=_[w],l=n(y.template),v(l,"[sn-binding],[sn-model],[sn-on]").each(function(){var e=this,t=this.getAttribute("sn-binding"),i=this.getAttribute("sn-model"),n=this.getAttribute("sn-on");if(e.setAttribute("sn-id",++c),i&&(i=g(y,i),i&&(this.setAttribute("sn-collection",i.collection),this.setAttribute("sn-model",i.variable))),n){this.setAttribute("sn-on",d);var u=s[d];n.replace(m,function(e,t,i,n){-1==r.indexOf(t)&&(r[r.length]=t),u||(u=s[d]={});var a=i+n;u[t]=g(y,a)||a}),d++}t&&t.replace(p,function(e,t,i,n,s){i==y.alias?i=b+"^child"+n:(alias=y.modelAlias[i],alias&&(i=alias+"^child"+n)),s&&(t={prop:t,filter:h(s,y)});var r=a[i];r||(r=a[i]=[]),r.push({el:c,prop:t})})});v(e,"[sn-binding],[sn-on]").each(function(){var n,e=this.getAttribute("sn-binding"),t=this.getAttribute("sn-on"),i=this;if(e&&e.replace(p,function(e,t,s,r,o){s+=r,o&&(t={prop:t,filter:h(o)}),n=a[s],n||(n=a[s]=[]),n.push({el:i,prop:t})}),t){this.setAttribute("sn-on",d);var o=s[d];t.replace(m,function(e,t,i,n){-1==r.indexOf(t)&&(r[r.length]=t),o||(o=s[d]={}),o[t]=i+n}),d++}})};var _=function(e,t,i){var s;if(0==t.indexOf("style."))(s={})[t.substr(6)]=i,n(e).css(s);else switch(t){case"text":e.innerHTML=a.encodeHTML(i);break;case"html":e.innerHTML=i;break;case"display":e.style.display=i?"block"==i||"inline"==i||"inline-block"==i?i:"":"none";break;case"value":e.value=i;break;case"style":n(e).css(i);break;case"class":e.className="string"!=typeof i&&i?l.join(i," "):i;break;default:null===i||void 0===i?e.removeAttribute(t):e.setAttribute(t,i)}},y=function(e,t,i,n){if(e&&!this.created){var a={};if(this.$el=n,this.model=a,this._key=t,this.root=this,this.data={},i instanceof y)this.parent=i,this.key=i.key?i.key+"."+t:t,this.root=i.root;else{if(!(i instanceof T))throw new Error("Model's parent mast be Collection or Model");this.parent=i,this.key=i.key+"^child",this.root=i.root}this.set(e),i.data[t]=this.data,this.created=!0}};y.prototype={constructor:y,one:r.one,on:r.on,off:r.off,trigger:r.trigger,_redraw:function(){var e;for(var t in this.model)e=this.model[t],e instanceof y||e instanceof T?e._redraw():this._syncView(t,e)},_syncView:function(e,t){var n,a,s,e,r,i=this.root.finder.bindings[e&&this.key?this.key+"."+e:this.key||e];if(i)for(var o=0,c=i.length;c>o;o++)n=i[o],a=n.el,s=n.prop,"string"!=typeof s?(r=s.filter(l,this,t,e,a),s=s.prop):r=t,this._setProp(a,s,r);return this},_syncOwnView:function(){return this.root!=this&&(this._syncView("",this.data),this.created&&this.parent instanceof y&&this.parent.trigger("change:"+this._key,this.data),this.parent.needUpdateView&&this.parent._syncOwnView()),this},_setProp:function(e,t,i){"number"==typeof e?v(this.$el,'[sn-id="'+e+'"]').each(function(){_(this,t,i)}):_(e,t,i)},get:function(e){if("string"==typeof e&&-1!=e.indexOf(".")&&(e=e.split(".")),n.isArray(e)){for(var t=this,i=0,a=e.length;a>i;i++)if(t instanceof y)t=t.model[e[i]];else{if(!(t instanceof T))return null;t=t.models[e[i]]}return t}return this.model[e]},set:function(e,t){var a,s,r,i=this,o=this.model;if(i.needUpdateView=!1,n.isPlainObject(e))r=e;else{if("undefined"==typeof t)return t=e,e="",this.parent&&(this.parent.data[this.parent.models.indexOf(this)]=t),this.data=t,void this._syncOwnView();(r={})[e]=t}var c,d,l=[],s=!1;for(var u in r)this.data[u]=r[u];for(var u in r)if(a=o[u],d=r[u],a!==d){var h=u.split(".");if(h.length>1){e=h.pop(),o=this;for(var m,f=0,p=h.length;p>f;f++)if(u=h[f],m=o,o instanceof y)o=o.model[u],o||(o=m.model[u]=new y({},u,m,m.$el),m.data[u]=o.data);else if(o instanceof T&&(o=o.models[u],!o))throw new Error("[Collection index is bigger than length!]");o.set(e,d)}else if(a instanceof y)a.set(d);else if(a instanceof T){if(!n.isArray(d))throw new Error("[Array to "+typeof d+" error]不可改变"+u+"的数据类型");a.set(d)}else n.isPlainObject(d)?o[u]=new y(d,u,this,this.$el):n.isArray(d)?(o[u]=new T,l.push(u)):(this.data[u]=d,o[u]=d,this._syncView(u,d),this.created&&this.trigger("change:"+u,d));s||(s=!0)}for(var f=0,p=l.length;p>f;f++)e=l[f],c=o[e],o[e].constructor(this.data[e],e,this);return s&&this.root!=this&&this._syncOwnView(),i.needUpdateView=!0,this},toJSON:function(){return n.extend(!0,{},this.data)}};var w=function(e,t){"string"==typeof t&&(t=t.split("."));for(var i=0,n=t.length;n>i;i++)e=e[t[i]];return e},x=function(e,t){this.list=[],this.collection=t,n.extend(this,e),!this.placeHolder&&t.parent.$el&&(this.placeHolder=t.parent.$el.find('[sn-placeholder="'+this.placeHolderName+'"]')[0])};x.prototype={filter:function(e){var t=this.filterName,i=this.comparator,n=!0;if(t){if(t=this.getValue(t),!t)return!0;switch("true"==i&&(i=!0),typeof t){case"function":n=t(e);break;case"object":var a;for(var s in e)a=e[s];break;case"string":break;default:n=e}}return n},sort:function(e,t){t!=this.reverse},getValue:function(e){var t=e.split("."),i=this.modelAlias[t[0]];return i?void 0:w(this.collection.root.data,e)},get:function(e){for(var t=this.list.length-1;t>=0;t--)if(this.list[t].model==e)return this.list[t]},add:function(e,t,i){var r=(this.list,this.orderBy,this.reverse,{model:e,el:t});this.list.push(r),this.filter(e.data)&&(this.fragment?this.fragment.appendChild(t):this.placeHolder.parentNode.insertBefore(t,this.placeHolder))},remove:function(e){for(var t=this.list.length-1;t>=0;t--)if(this.list[t].model==e){this.list.splice(t,1);break}}};var T=function(e,t,i){if(e){this.models=[],this.data=[],this.key=t,this._key=t,this.repeats=[],this.parent=i,i.key&&(this.key=i.key+"."+this.key),this.root=i.root;var s,n=this.root.finder.repeats[this.key];if(n)for(var r=0,o=n.length;o>r;r++)s=new x(n[r],this),this.repeats.push(s);this.set(e)}};T.prototype={constructor:T,model:y,forEach:function(e){for(var t,n=0,a=this.models.length;a>n;n++)t=this.models[n],e.call(this,t,n)},_redraw:function(){for(var e=0,t=this.models.length;t>e;e++){if(model=this.models[e],this.repeats)for(var i,e=0,t=this.repeats.length;t>e;e++)if(i=this.repeats[e],!i.get(model)){var a=item.template.cloneNode(!0);n(a);a.snModel=model,i.add(model,a),model.$el.push(a)}model._redraw()}},append:function(e){this.fragment(function(){for(var t=0,i=e.length;i>t;t++)this.add(e[t],!0)})},add:function(e,t){this.needUpdateView=!1;var i,a=new this.model,s=this.data.length;if(this.models[s]=a,this.data[s]=e,this.repeats)for(var r,o=0,l=this.repeats.length;l>o;o++){r=this.repeats[o];var c=r.template.cloneNode(!0),d=n(c);c.snModel=a,r.add(a,c),i=i?i.add(d):d}return a.constructor(e,s,this,i),t||this._syncOwnView(),this.needUpdateView=!0,a},_syncOwnView:function(){return this.parent._syncView(this._key,this.data),this.created&&this.parent.trigger("change:"+this._key,this.data),this.parent.needUpdateView&&this.parent._syncOwnView(),this},fragment:function(e){for(var t=0,i=this.repeats.length;i>t;t++)this.repeats[t].fragment=document.createDocumentFragment();e.call(this);for(var n,t=0,i=this.repeats.length;i>t;t++)n=this.repeats[t],n.placeHolder.parentNode.insertBefore(n.fragment,n.placeHolder),n.fragment=null},set:function(e){this.needUpdateView=!1,this.fragment(function(){var t,i=e.length,n=this.models.length;if(n>i)for(var a=n-1;a>=i;a--)this.remove(a,!0);for(var a=0;i>a;a++)t=e[a],n>a?this.models[a].set(t):this.add(t,!0)}),this.needUpdateView=!0},get:function(e){return this.models[e]},remove:function(e,t){var i,n;if("number"!=typeof e&&(e=this.models.indexOf(e)),this.repeats){for(var a=0,s=this.repeats.length;s>a;a++)i=this.repeats[a],n=i.list[e].el,n.parentNode.removeChild(n),i.list.splice(e,1);this.models.splice(e,1),this.data.splice(e,1),t||this._syncOwnView()}}};var $=function(e,t){e&&(this.created||(this.data={},this.events=[],this.root=this,this.model={},this.key="",this.load(e),this.set(t),this.created=!0))};$.prototype=Object.create(y.prototype),n.extend($.prototype,{constructor:$,load:function(e){return this.finder=new b(e),this.$el=e.on("input change","[sn-model]",n.proxy(this._inputChange,this)),this.bindEvents(),this},handleEvent:function(e){var r,t=e.currentTarget,i=e.type,a=t.getAttribute("sn-on"),s=this.finder.events[a];if(s){r=s[i];var o,l,c;"string"==typeof r?(c=r,r=this.get(r),o=this):(o=n(t).closest('[sn-repeat-name="'+r.collection+'"]')[0].snModel,c=r.variable,r=o.get(c)),l=c.lastIndexOf("."),r&&r.call((-1==l?o:o.get(c.substr(0,l))).data,e)}},bindEvents:function(){for(var t=0,i=this.finder.eventNames.length;i>t;t++){var a=this.finder.eventNames[t];-1==this.events.indexOf(a)&&(this.$el.on(a,"[sn-on]",n.proxy(this.handleEvent,this)),this.events[this.events.length]=a)}},scan:function(e){this.finder.scan(e),this._redraw(),this.bindEvents()},append:function(e,t){t?e=this.$el.find(e):(t=e,e=this.$el),e.append(t),this.scan(t)},prepend:function(e,t){t?e=this.$el.find(e):(t=e,e=this.$el),e.prepend(t),this.scan(t)},before:function(e,t){this.$el.find(e).before(t),this.scan(t)},after:function(e,t){this.$el.find(e).after(t),this.scan(t)},_inputChange:function(e){var t=e.currentTarget,i=t.getAttribute("sn-model"),a=t.getAttribute("sn-collection");a?n(t).closest('[sn-repeat-name="'+a+'"]')[0].snModel.set(i,t.value):this.set(i,t.value)},destory:function(){this.$el.off("input change","[sn-model]",this._inputChange)}}),$.extend=y.extend=T.extend=a.extend,t.ViewModel=$,t.filter=t.Filter=l});define("core/page",function(e,t,i){e("../widget/tip");var n=e("$"),a=e("util"),r=(e("./base"),e("./view")),o=e("./promise"),c=(e("../widget/dialog"),a.noop),u=(a.indexOf,Array.prototype.slice),h=a.getPath,f=r.extend({options:{route:null},application:null,el:'<div class="view"></div>',_setRoute:function(e){this.route=e,this.hash=e.hash,this.url=e.url,this.path=e.path,this._queries=this.queries,this.queries=n.extend({},e.queries)},queryString:function(e,t){if("undefined"==typeof t)return this.route.queries[e];null===t||t===!1||""===t?delete this.route.queries[e]:this.route.queries[e]=t||"";var i=n.param(this.route.queries);this.application.to(this.route.path+(i?"?"+i:""))},loadTemplate:function(){var e=this,t=1,i=function(){t--,0==t&&(e.$el.html(e.razor.html(e.data)).appendTo(e.application.$el),e.trigger("Create"),e._promise.resolve())};return e.route.api&&(t++,n.ajax({url:e.route.api,type:"GET",dataType:"json",success:function(t){e.data=t,i(t)},error:function(e){i({success:!1,content:e.responseText})}})),seajs.use(e.route.template,function(t){e.razor=t,i()}),e._promise},initialize:function(){var e=this,t=o.resolve();e._promise=t,e.className=e.el.className,e._setRoute(e.options.route),e.application=e.options.application,e.on("Start",e.onStart),e.on("Resume",e.onResume),e.on("Show",e.onShow),e.on("Pause",e.onPause),e.on("QueryChange",e.onQueryChange),e.on("QueryChange",e.checkQuery),e.$el.data("path")||(e.$el.data("url",e.url).data("path",e.path),t.then(e.loadTemplate,e)),t.then(e.onCreate,e).then(function(){e.trigger("Start"),e.checkQuery()})},onCreate:c,onStart:c,onResume:c,onShow:c,onStop:c,onRestart:c,onPause:c,onQueryChange:c,then:function(e){return this._promise.then(e,this),this},_queryActions:{},checkQuery:function(){var s,e=this,t=e.queries,i=e._queries,a=e._queryActions;a&&n.each(a,function(e,n){if(s=t[e]||"",s&&!i||i&&s!=i[e]){var a=n.cls[n.map[s]].__query_action;a.apply(n.cls,a.__arguments),a.__arguments=void 0}})},bindQueryAction:function(e,t,i){var r,s=this;return n.each(i,function(i,n){r=function(){var n=u.apply(arguments),a=arguments.callee.__query_action;s.queryString(e)==i?a.apply(t,n):(a.__arguments=n,s.queryString(e,i))},r.__query_action=t[n],t[n]=r}),this._queryActions[e]={cls:t,map:i},this},onResult:function(e,t){this.listenTo(this.application,e,t)},setResult:function(){this.application.trigger.apply(this.application,arguments)},compareUrl:function(e){return h(e)===this.route.path.toLowerCase()},back:function(e){this.application.to(e)},forward:function(e){this.application.to(e)}});sl.Page=f,i.exports=f});define("core/route",function(e,t,i){var n=function(e){return(e.replace(/^#+|\/$/,"")||"/").toLowerCase()},a=function(e,t){var n,a,s,r,o,l,i=[];for(var c in e){if(n=e[c],a=[],l="^(?:/{0,1})"+c.replace(/(\/|^|\?)\{((?:.+?\{[^\}]+\}){0,}[^\}]*)\}/g,function(e,t,i){return o=i.split(":"),o.length>1&&(a.push(o.shift()),i=o.join(":")),t+"("+i+")"})+"$","string"==typeof n)throw new Error("Route options error");s=n.root||"/",r="/"!=s?s.replace(/^\//,"")+"/":"",i.push({regex:new RegExp(l),parts:a,template:r+n.template,view:r+n.controller,api:n.api,root:s})}this.isDebug=t!==!1,this.routes=i};a.prototype.match=function(e){var r,l,c,t=null,i={},a=e=n(e),s=e.indexOf("?"),o=this.routes;-1!=s?(r=e.substr(s+1),e=e.substr(0,s),r.replace(/(?:^|&)([^=&]+)=([^&]*)/g,function(e,t,n){return i[t]=decodeURIComponent(n),""})):r="";for(var d=0,u=o.length;u>d;d++)if(l=o[d],c=l.regex?e.match(l.regex):null){t={path:c[0],url:a,hash:"#"+a,root:l.root,template:l.template,"package":this.isDebug?!1:"/"==l.root?"controller":l.root.replace(/^\//,"")+"/controller",view:l.view,data:{},queryString:r,queries:i};for(var h=0,f=l.parts.length;f>h;h++)t.data[l.parts[h]]=c[h+1];l.api&&(t.api=l.api.replace(/\{([^\}]+?)\}/g,function(e,i){return t.data[i]}));break}return t},a.standardizeHash=n,i.exports=a});define("core/animation",function(t,e){for(var i=t("$"),n=t("./linklist"),a=t("graphics/matrix2d"),s=t("graphics/tween"),r=["webkit"],o=0;o<r.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[r[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r[o]+"CancelAnimationFrame"]||window[r[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(function(){t(currTime+timeToCall)},16.7)},window.cancelAnimationFrame=function(t){clearTimeout(t)});var l=new n,c=!0,d=i.fx.cssPrefix+"transform",u={opacity:1},f=/(\d+\.\d+|\d+)\%/g,p=/translate\((\-{0,1}\d+(?:\.\d+){0,1}(?:\%|px){0,1})\s*\,\s*(\-{0,1}\d+(?:\.\d+){0,1}(?:\%|px){0,1})\)/,m=/matrix\((\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\)/,v=/(translate|skew|rotate|scale|matrix)\(([^\)]+)\)/g,g=/matrix\([^\)]+\)\s*$/,_=function(t){if(t){t instanceof Array||(t=[t]);for(var e=0,i=t.length;i>e;e++)"string"==typeof t[e]&&(t[e]=s[t[e].replace(/\-([a-z])/g,function(t,e){return e.toUpperCase()})])}else t=[s.easeOut];return t},b=function(t){var e=[];return i.each(t,function(t,i){e.push(isNaN(parseFloat(i))?0:parseFloat(i))}),e},y=function(t,e,i){return parseFloat(t)+(parseFloat(e)-parseFloat(t))*i},w=function(t){var e=new a;return t.replace(v,function(t,i,n){e["matrix"==i?"append":i].apply(e,b(n.split(",")))}),e},x=function(t){var n,s,e={};return i.each(t,function(t,i){/matrix|translate|skew|rotate|scale|invert/.test(t)?("translate"===t?i=(e[d]||"")+" "+t+"("+i+")":(s||(s=new a),n=e[d]||"",i=s["matrix"==t?"append":t].apply(s,b(i.split(","))).toString(),i=g.test(n)?n.replace(g,i):n+" "+i),t=d):"transform"===t&&(t=d,s=null),e[t]=i}),{css:e,matrix:s}};e.transform=x,i.fn.transform=function(t){return this.css(x(t).css),this},i.fn.matrix=function(t){return t instanceof a?(this.css(d,t.toString()),this):w(getComputedStyle(this[0],null)[d])};var T=function(){if(l.length){c=!1;for(var t,e,i,r,s=(+new Date,l._idlePrev);s!=l;){if(r=s._idlePrev,first=s.data,t=Date.now()-first.startTime,i=[],e=first.ease,t<=first.duration){for(var o=0,d=e.length;d>o;o++)i.push(e[o](t,first.from,first.to-first.from,first.duration)/100);first.step.apply(first,i)}else{for(var u=first.to/100,o=0,d=e.length;d>o;o++)i.push(u);first.step.apply(first,i),l._remove(s),first.finish&&first.finish(u)}s=r}requestAnimationFrame(T)}else c=!0},$=function(t){return t.startTime=Date.now(),t.ease=_(t.ease),t.stop=function(){l.remove(t)},void 0===t.from&&(t.from=0),void 0===t.to&&(t.to=100),t.duration||(t.duration=300),t},k=function(t){for(var e=0,i=t.length;i>e;e++)l.append($(t[e]));c&&T()},S=function(t){var e,n,a,s,r;this.el.each(function(){if(e=this._animationStyle,n=this._originStyle,0==t)r=n;else if(1>t){r={};for(var o in e)if(s=e[o],a=n[o],o==d){var l=a.match(m)||["",1,0,0,1,0,0],h=w(s);h.a=y(l[1],h.a,t),h.b=y(l[2],h.b,t),h.c=y(l[3],h.c,t),h.d=y(l[4],h.d,t),h.tx=y(l[5],h.tx,t),h.ty=y(l[6],h.ty,t),r[o]=h.toString()}else isNaN(parseFloat(s))?r[o]=s:(a=isNaN(parseFloat(a))?u[o]||0:parseFloat(a),r[o]=y(a,s,t))}else r=e;i(this).css(r)}),this._step&&this._step(t)},A=function(t){1==t&&this.el.css(this.css),this._finish&&this._finish(t)},j=function(t){for(var e,n,s,l=0,c=t.length;c>l;l++)e=t[l],e.css&&(s=x(e.css),e.matrix=s.matrix,e.css=s.css,n=e.el=i(e.el),"object"==typeof e.start&&n.transform(e.start),n.each(function(){var t=this,n={},a={},s=getComputedStyle(t,null);i.each(e.css,function(e,i){"string"==typeof i&&(e==d?i=i.replace(p,function(e,i,n){return"translate("+(-1!==i.indexOf("%")?t.offsetWidth*parseFloat(i)/100:parseFloat(i))+"px,"+(-1!==n.indexOf("%")?t.offsetHeight*parseFloat(n)/100:parseFloat(n))+"px)"}):/^(top|margin(-t|T)op)$/.test(e)?i=i.replace(f,function(e){return t.parentNode.offsetHeight*parseFloat(e)/100+"px"}):/^(left|margin(-l|L)eft|padding(-l|L)eft|padding(-t|T)op)$/.test(e)&&(i=i.replace(f,function(e){return t.parentNode.offsetWidth*parseFloat(e)/100+"px"}))),a[e]=s[e],n[e]=i}),t._animationStyle=n,t._originStyle=a}),e._step=e.step,e.step=S,e._finish=e.finish,e.finish=A);return t},E=function(t){i.isArray(t)||(t=[t]),j(t),this.list=t};E.prototype.step=function(t){for(var e,i=this.list,n=0,a=i.length;a>n;n++)e=i[n],e.from=t,e.step(t/100);return this},E.prototype.animate=function(t,e,i){for(var n,a=this.list,s=0,r=a.length;r>s;s++)n=a[s],n.duration=t,n.to=e,n.finish=n.start=void 0;return n.finish=i,k(a),this},e.Animation=E,e.parallel=function(t){k(j(t))},e.animate=function(){var t=Array.prototype.slice.call(arguments),e={},i=0,n=t[i++];return"function"==typeof n?e.step=n:(e.el=n,e.css=t[i++]),e.duration=t[i++],e.ease=t[i++],e.finish=t[i],k([e]),e};var M={step:function(t){for(var n,e=0,i=this.momentums.length;i>e;e++)n=this.momentums[e],n.current=n.start+(n.result-n.start)*t;this.momentumStep.apply(this.ctx,this.momentums)},finish:function(){this.bounce()},bounce:function(){for(var e,i,s,t=0,n=0,a=this.momentums.length;a>n;n++)s=this.momentums[n],i=s.current<s.min?s.min:s.current>s.max?s.max:s.current,i!=s.current?(s.start=s.current,s.result=i,t++):s.divisor&&i%s.divisor!=0&&(e=s.divisor,s.start=s.current,s.result=e/2>i%e?i-i%e:i-i%e+e,t++);0==t?this.end.call(this.ctx):(this.duration=400,k([this]))}},C=function(t,e,i,n,a,s,r){var m,v,o=e-t,l=a-e,c=e-n,d=6e-4,u=Math.abs(o)/i,h=u*u/(2*d),f=0,p=0;return s=r||s,o>0&&h>l?(p=s/(6/(h/u*d))/2,l+=p,u=u*l/h,h=l):0>o&&h>c&&(p=s/(6/(h/u*d))/2,c+=p,u=u*c/h,h=c),h*=0>o?-1:1,p*=0>o?-1:1,f=u/d,v=e+h,0!=p&&(m=.15/(p/h),m>1&&(h-=p,p/=m,h+=p,v=e+h)),n>e&&n>v||e>a&&v>a?(h=0,f=0,outside=0,v=e):(r&&0==p&&(v=v%r==0?v:r/2>v%r?v-v%r:v-v%r+r,v=v>a?a:n>v?n:v,300>f&&(f=300),h=v-e),r&&f>400&&(f=400)),{dist:h,time:Math.round(f),outside:p,result:v,current:e,start:e,max:a,min:n,divisor:r}};e.momentum=function(t,e,n,a,s,r){var o=[],l={},c=0;if("number"==typeof t[0])t=[t];else if(!t.length)return void s.call(r);for(var h,d=0,u=t.length;u>d;d++)h=C.apply(this,t[d]),0!=h.dist&&(c=Math.max(c,h.time)),o.push(h);for(var h,d=0,u=o.length;u>d;d++)h=o[d],0!=h.outside&&(h.result=h.result-h.outside+400*h.outside/c);return i.extend(l,M,{ctx:r||l,momentums:o,momentumStep:n,duration:c,ease:a,end:s}),0!=c?(e&&l.duration>e&&(l.duration=e),k([l])):l.bounce(),l}});define("core/master",function(t,e,i){var a=(t("$"),t("util")),s=t("./route"),r=a.getPath,o={checkQueryString:function(t,e){t.route.url!=e.url&&(t._setRoute(e),t.trigger("QueryChange"))},mapRoute:function(t,e){return this.route=new s(t,e),this},skip:0,_currentActivity:null,_activities:{},set:function(t,e){this._activities[r(t)]=e},get:function(t,e){var i=this,n="string"==typeof t?i.route.match(t):t;if(n){var a=r(n.path),s=this._activities[a];null==s?!function(t){n["package"]?seajs.use(n["package"]+".js?v"+sl.buildVersion,t):t()}(function(){seajs.use(n.view,function(t){var o,r={application:i,route:n};null!=t?(o=i.$el.find('[data-path="'+n.path+'"]'),o.length&&(r.el=o),s=new t(r),i.set(a,s),s.then(function(){e.call(i,s,n)})):(i.skip++,location.hash=i._currentActivity.url)})}):e.call(i,s,n)}},remove:function(t){this._activities[r(t)]=void 0}};i.exports=o});define("core/app",function(t,e,i){var n=t("$"),a=t("util"),s=t("bridge"),o=(t("./base"),t("./view")),l=t("./master"),c=t("./animation"),d=t("./linklist"),u=t("./promise"),h=t("./touch"),f=t("./route"),v=(t("./activity"),a.noop,a.lastIndexOf),b=(Array.prototype.slice,a.getPath,f.standardizeHash),y=l.checkQueryString,w=function(e,i,a,s){s||(s=(e?a:i).toggleAnim);var r=t("anim/"+s),o=e?"open":"close",l="ease-out",c=n.extend({},r[o+"EnterAnimationFrom"]),d=n.extend({},r[o+"ExitAnimationFrom"]);return c.zIndex=e?r.openEnterZIndex:r.closeEnterZIndex,c.display="block",d.zIndex=e?r.openExitZIndex:r.closeExitZIndex,[{el:a.$el,start:c,css:r[o+"EnterAnimationTo"],ease:l},{el:i.$el,start:d,css:r[o+"ExitAnimationTo"],ease:l}]},x=function(t,e){t.startExit(),t.$el.siblings('.view:not([data-path="'+e.path+'"])').hide(),null===e.el.parentNode&&e.$el.appendTo(t.application.el)},T=function(t){t.touch=new h(t.el,{start:function(){var e,i,t=this,n=t.touch.dx;if(t.touch.isDirectionY||t.swiperPromise)return void t.touch.stop();t.width=window.innerWidth;var a=t._currentActivity,s=t.isSwipeLeft=n>0;t.swiper=null,e=s?a.swipeLeftForwardAction?(i=!0,a.swipeLeftForwardAction):(i=!1,a.swipeLeftBackAction):a.swipeRightForwardAction?(i=!0,a.swipeRightForwardAction):(i=!1,a.swipeRightBackAction),e||(s&&"Left"==a.referrerDir?e=a.referrer:s||"Left"==a.referrerDir||(e=a.referrer),i=!1),e?(t.swiperPromise=new u,t.mask.show(),t.get(e,function(e){x(a,e),t.isSwipeOpen=i,t.swiper=new c.Animation(w(i,a,e)),t.swipeActivity=e,t.swiperPromise.resolve()})):t.swiperPromise=null},move:function(t){var i,e=this,n=e.touch.dx;e.swiperPromise&&e.swiperPromise.then(function(){return e.isSwipeLeft&&0>n||!e.isSwipeLeft&&n>0?void e.swiper.step(0):(i=100*Math.abs(n)/e.width,void e.swiper.step(i))},e)},stop:function(){var t=this;t.isCancelSwipe=t.touch.isMoveLeft!==t.isSwipeLeft||Math.abs(t.touch.dx)<=10,t.swiperPromise&&t.swiperPromise.then(function(){t.queue([200,t.isCancelSwipe?0:100,function(){var e=t.swipeActivity,i=t._currentActivity;t.isCancelSwipe?(i.isPrepareExitAnimation=!1,i.$el.addClass("active"),e.$el.remove(),t.mask.hide()):(t._currentActivity=t.swipeActivity,t.navigate(e.url),e.finishEnterAnimation(),t.isSwipeOpen?(e.referrer=i.url,e.referrerDir=t.isSwipeLeft?"Right":"Left",i.trigger("Pause")):i.destroy()),t.turning()}],t.swiper.animate,t.swiper),t.swiperPromise=null})}},t)},k=o.extend(l,{events:{"tap,click a[href]:not(.js-link-default)":function(t){var e=this,i=n(t.currentTarget);if(/http\:|javascript\:|mailto\:/.test(i.attr("href")))i.addClass("js-link-default");else if(t.preventDefault(),"tap"==t.type){var a=i.attr("href");/^#/.test(a)||(a="#"+a),null!=i.attr("forward")?e.forward(a):null!=i.attr("back")?e.back(a):e.to(a)}return!1},"tap [data-back]":function(t){this.back(n(t.currentTarget).attr("data-back"))},"tap [data-forward]":function(t){this.forward(n(t.currentTarget).attr("data-forward"))},"focus input":function(t){this.activeInput=t.target}},_history:[],_historyCursor:-1,isHistoryBack:!1,el:'<div class="screen" style="position:fixed;top:0px;bottom:0px;right:0px;width:100%;background:rgba(0,0,0,0);z-index:2000;display:none"></div><div class="viewport"></div><canvas class="imagecanvas"></canvas>',backGesture:!0,initialize:function(){var t=this,e="tap click touchend touchmove touchstart";t._queue=new d,t.mask=n(t.$el[0]).off(e).on(e,!1),t.el=t.$el[1],t.canvas=t.$el[2],t.backGesture&&T(this)},start:function(){var e=this,i=n(window),r=location.hash||"/";s.hasStatusBar&&a.style("header{border-top-width:20px;border-top-style:solid;box-sizing:content-box !important;}header~.main{margin-top:20px;}"),e.$el.appendTo(document.body),e.$el=n(e.el),e.hash=r=b(r),e.queue([r,function(n){n.$el.appendTo(e.el),e._currentActivity=n,e._history.push(n.url),e._historyCursor++,n.$el.transform(t("anim/"+n.toggleAnim).openEnterAnimationTo),n.then(function(){n.$el.addClass("active"),n.trigger("Resume").trigger("Show"),e.trigger("start"),e.turning()}),i.on("hashchange",function(){r=e.hash=b(location.hash);var t=v(e._history,r),i=(e._skipRecordHistory||-1==t)&&!e.isHistoryBack;e._skipRecordHistory!==!0?-1==t?e.isHistoryBack?e._history.splice(e._historyCursor,0,r):(e._history.push(r),e._historyCursor++):(e._history.length=t+1,e._historyCursor=t):e._skipRecordHistory=!1,0==e.skip?e[i?"forward":"back"](r):e.skip>0?e.skip--:e.skip=0,e.isHistoryBack=!1})}],e.get,e),n(window).on("load",function(){location.hash||(location.hash="/")})},_queue:null,queue:function(t,e,i){var n=this._queue;"function"==typeof t&&(i=e,e=t,t=void 0),n.append({context:i,fn:e,args:t}),1==n.length&&e.apply(i,t)},turning:function(){var t=this._queue;t.length&&(t.shift(),t.length&&(t=t.first(),t.fn.apply(t.context,t.args)))},_animationTo:function(t,e,i,n,a){var s=this,r=s._currentActivity,o="string"==typeof t?s.route.match(t):t;if(t=o.url,e||(e=300),t!=b(location.hash)&&1==s._queue.length){var l=s._queue.first().args;l&&l[0]===t&&s.navigate(t)}return r.path==o.path?(y(r,o),void s.turning()):void s.get(o,function(l){if(l.path==r.path)return y(l,o),void s.turning();s._currentActivity=l,x(r,l),l.then(function(){l.trigger("Resume")});var f,d="open"==n,u="ease-out",h=w(d,r,l,i);d&&(l.referrer=r.url,l.referrerDir=r.swipeRightForwardAction==t?"Left":"Right");for(var p=!1,m=function(){p||(p=!0,clearTimeout(v),a&&a(l),l.finishEnterAnimation(),s.turning())},v=setTimeout(m,e+100),g=0,_=h.length;_>g;g++)f=h[g],f.ease=u,f.duration=e,f.el.css(c.transform(f.start).css).animate(f.css,e,u,m)})},to:function(t){this.queue(function(){this._navigate(t),this.turning()},this)},_navigate:function(t,e){t=b(t);var i=this,n=v(i._history,t);e===!0&&i.skip++,-1==n?(i._history.splice(i._historyCursor+1,0,t),i._history.length=i._historyCursor+2,i._historyCursor++,i._skipRecordHistory=!0,location.hash=t):(n!=i._historyCursor&&history.go(n-i._historyCursor),e===!0&&(i._history.length=n+1,i._historyCursor=n))},navigate:function(t){this._navigate(t,!0)},forward:function(t,e,i){var n=this.route.match(t);n&&this.queue([n.url],function(){var n=this._currentActivity;this._animationTo(t,e,i,"open",function(){n.trigger("Pause")})},this)},back:function(t,e,i){var n=this.route.match(t);n&&this.queue([n.url],function(){var t=this,a=t._currentActivity;n?("string"==typeof e&&(i=e,e=null),t._animationTo(n,e,i,"close",function(){a.destroy()})):(a.startExit(),t.isHistoryBack=!0,history.back(),t.turning())},this)}});return k});define("core/activity",function(t,e,i){var n=t("./page"),a=t("util"),s=t("../widget/scroll"),o=(Array.prototype.slice,n.extend({toggleAnim:"def",onHtmlLoad:function(){var t=this;if(!t.swipeRightBackAction){var e=t.$("header [data-back]");e.length&&(t.swipeRightBackAction=e.attr("data-back")||"/")}t._scrolls=s.bind(t.$(".scrollview"))},onLoad:a.noop,initialize:function(){this.on("Create",this.onHtmlLoad),this.one("Show",this.onLoad),this.on("Destroy",this._onDestroy),n.prototype.initialize.apply(this,arguments)},_onDestroy:function(){this._scrolls&&$.each(this._scrolls,function(t,e){e.destory()}),this.application.remove(this.url)},isExiting:!1,startExit:function(){var t=this;if(!t.isExiting){t.isExiting=!0;var e=t.application;e.activeInput&&(e.activeInput.blur(),e.activeInput=null),t.$el.removeClass("active"),e.mask.show()}},finishEnterAnimation:function(){var t=this;t.application.mask.hide(),t.isExiting=!1,t.then(function(){t.$el.addClass("active"),t.trigger("Show")})},redirect:function(t){var e=this,i=e.application;i.get(t,function(t,n){t.el.className=t.className+" active",i.$el.append(t.$el),i._currentActivity=t,e.$el.remove(),e.trigger("Pause"),t.then(function(){t.trigger("Resume"),t.trigger("Show")})})},prompt:function(t,e,i,n){n="function"!=typeof i?i:n,i="function"==typeof e?e:i,e="function"==typeof e?"":e,!this._prompt&&(this._prompt=this.createDialog({content:'<input type="text" class="prompt-text" />',buttons:[{text:"取消",click:function(){this.hide()}},{text:"确认",click:function(){this.hide(),this.ok&&this.ok(this.$(".prompt-text").val())}}]}));var a=this._prompt;a.title(t||"请输入").show(n),a.$(".prompt-text").val(e).focus(),a.ok=$.proxy(i,this)},createDialog:function(t){var e=this,i=new Dialog(t);return e.bindQueryAction("dialog",i,{show:"show","":"hide"}),i},forward:function(t,e,i){this.application.forward(t,e,i)},back:function(t,e,i){this.application.back(t,e,i)}}));return o});define("core/touch",function(t,e,i){var n=t("$"),s=(t("util"),t("animation")),r=t("./event"),l=(Array.prototype.slice,function(t,e,i){var a=this,s=n(t);a.$el=s,a.el=s[0],a.options=e||{},a.ctx=i||a,s.on("touchstart",n.proxy(a._start,a)).on("touchmove",n.proxy(a._move,a)).on("touchend",n.proxy(a._end,a)),a.options.stop&&a.on("stop",a.options.stop,a.ctx)});return l.prototype={minDelta:0,on:r.on,trigger:r.trigger,_stopMomentum:function(){return this.momentum?(this.momentum.stop&&this.momentum.stop(),this._isClickStopAni=!0,!1):!0},_start:function(t){var e=this,i=t.touches[0];return e.pointX=e.startX=e.sx=i.pageX,e.pointY=e.startY=e.sy=i.pageY,e.isTouchStop=!1,e.isTouchStart=!1,e.isTouchMoved=!1,e.startTime=t.timeStamp||Date.now(),e._stopMomentum()},_move:function(t){if(!this.isTouchStop){var e=this,i=t.touches[0],n=e.startX-i.pageX,a=e.startY-i.pageY,s=t.timeStamp||Date.now();if(e.deltaX=n,e.deltaY=a,e.dx=e.sx-i.pageX,e.dy=e.sy-i.pageY,!e.isTouchStart){var r=Math.abs(n)>=e.minDelta&&Math.abs(n)>Math.abs(a),o=!r;if(!o&&!r)return!1;if(e.isTouchStart=!0,e.isDirectionY=o,e.isDirectionX=r,e.dir=r,e.isInit||(e.options.init&&e.options.init.call(e.ctx),e.isInit=!0),e.options.start.call(e.ctx),e.isTouchStop)return}return e.options.move.call(e.ctx,n,a),e.isTouchMoved=!0,e.isMoveLeft=e.pointX-i.pageX>0?!0:e.pointX==i.pageX?e.isMoveLeft:!1,e.isMoveTop=e.pointY-i.pageY>0?!0:e.pointY==i.pageY?e.isMoveTop:!1,e.pointX=i.pageX,e.pointY=i.pageY,s-e.startTime>300&&(e.startTime=s,e.startX=i.pageX,e.startY=i.pageY,e.options.resetStartTime&&e.options.resetStartTime.call(e.ctx)),!1}},stop:function(){this.isTouchStop=!0},addMomentumOptions:function(t,e,i,n,a,s){return this.momentumOptions.push([t||0,e||0,this.duration,i||0,n||0,a||0,s]),this},_momentum:function(){this.options.momentum&&this.options.momentum.apply(this.ctx,arguments)},_stop:function(){this.momentum=null,this._isClickStopAni=!1,this.trigger("stop")},_end:function(t){var e=this;if((!e.isTouchMoved||e.isTouchStop)&&e._isClickStopAni)return e.momentum.finish(),void(e._isClickStopAni=!1);if(e.isTouchMoved&&(e.isTouchMoved=!1,!e.isTouchStop)){e.isTouchStop=!0,n(t.target).trigger("touchcancel");var r=(t.changedTouches[0],(t.timeStamp||Date.now())-e.startTime);return e.duration=r,300>r||!e.momentum?(e.momentumOptions=[],e.options.beforeMomentum&&e.options.beforeMomentum.call(e.ctx,r),e.momentum=s.momentum(e.momentumOptions,e.options.maxDuration,e._momentum,e.options.ease||"ease",e._stop,e)):e.momentum.finish(),!1}},destory:function(){this.$el.off("touchstart",this._start).off("touchmove",this._move).off("touchend",this._end)}},l});define("widget/scrollview",function(t,e,i){var n=t("$"),a=(t("core/animation"),t("core/event")),r=t("core/touch"),o=function(t){return n('<div class="sl_scroller" style="width:100%;"></div>').append(t.children()).appendTo(t.html(""))},l=function(t,e){e=n.extend({ease:"ease",hScroll:!0,vScroll:!0},e);var i=this;i.options=e,i.$el=n(t).css({overflow:"hidden"}),i.el=i.$el[0],i.$scroller=o(i.$el),i.scroller=i.$scroller[0],i.touch=new r(i.$el,i,i)};l.prototype={off:a.off,on:a.on,trigger:a.trigger,init:function(){var t=this.$scroller.matrix();this.x=-t.tx,this.minX=0,this.y=-t.ty,this.minY=0},start:function(){var t=this,e=t.touch;return t.wrapperW=t.el.clientWidth,t.scrollW=t.scroller.offsetWidth,t.maxX=Math.max(t.scrollW-t.wrapperW,0),t._startLeft=t.startLeft=t.x,t.wrapperH=t.el.clientHeight,t.scrollH=t.scroller.offsetHeight,t.maxY=Math.max(t.scrollH-t.wrapperH,0),t._startTop=t.startTop=t.y,(!t.options.hScroll||t.wrapperW>=t.scrollW)&&e.isDirectionX||(!t.options.vScroll||t.wrapperH>=t.scrollH)&&e.isDirectionY?void e.stop():void 0},stop:function(){console.log(this.$el),this.$el.triggerHandler("scrollStop",[0,this.y])},resetStartTime:function(){this.options.hScroll&&(this.startLeft=this.startLeft+this.touch.deltaX,this._startLeft=this.x),this.options.vScroll&&(this.startTop=this.startTop+this.touch.deltaY,this._startTop=this.y)},move:function(){if(this.options.hScroll){var t=this.startLeft+this.touch.deltaX;(t<this.minX||t>this.maxX)&&(t=this.options.vScroll?t<this.minX?this.minX:this.maxX:t<this.minX?t+(this.minX-t)/2:t+(this.maxX-t)/2),this.x=t}if(this.options.vScroll){var e=this.startTop+this.touch.deltaY;(e<this.minY||e>this.maxY)&&(e=e<this.minY?e+(this.minY-e)/2:e+(this.maxY-e)/2),this.y=e}this.$scroller.css({"-webkit-transform":"translate("+-this.x+"px,"+-this.y+"px) translateZ(0)"})},beforeMomentum:function(){this.touch.addMomentumOptions(this._startLeft,this.x,this.minX,this.maxX,this.wrapperW,this.divisorX).addMomentumOptions(this._startTop,this.y,this.minY,this.maxY,this.wrapperH)},momentum:function(t,e){this.x=t.current,this.y=e.current,this.$scroller.css({"-webkit-transform":"translate("+-this.x+"px,"+-this.y+"px) translateZ(0)"})},destory:function(){this.touch.destory()}},l.addScroller=o,i.exports=l});define("widget/scroll",function(t,e,i){var n=t("$"),s=t("util"),r=(t("animation"),t("./scrollview")),o=function(t){var e=this;if(e.scrollView||0==e.parentNode.scrollTop){var i=t.touches[0],n=e.$.matrix();e.isStart=!1,e.isStop=!1,e.isMoved=!1,e.sy=e.oy=e.pointY=i.pageY,e.sx=i.pageX,e.st=n.ty,e.isLoading=e.isDataLoading}else e.isStop=!0},l=function(t){var e=this;if(!e.isStop){var i=t.touches[0],n=i.pageY-e.sy,s=i.pageX-e.sx;if(e.oy=e.pointY,e.pointY=i.pageY,!e.isStart&&(e.isStart=!0,Math.abs(s)>Math.abs(n)))return void(e.isStop=!0);var a=e.scrollView;return(a?a.y<=0:0==e.parentNode.scrollTop)&&n>0?(e.isMoved=!0,e.refreshAgain=!0,e.ty=e.st+.5*n,e.$.css({"-webkit-transform":"translate(0px,"+e.ty+"px) translateZ(0)"}),this.isLoading||e.$refresh.html(e.ty>70?"释放刷新":"下拉刷新")):e.isStop=!0,e.isStop}},c=function(t){var e=this;if(e.isMoved){var i=t.changedTouches[0],n=e.ty,s=n>70?50:0,r=e.oy-i.pageY,o=function(){e.$.animate({"-webkit-transform":"translate(0px,"+s+"px) translateZ(0)"},300+-1*r,"cubic-bezier(.3,.78,.43,.95)",function(){e.refreshAgain=!1,e.isLoading||0==s||(e.isLoading=e.isDataLoading=!0,e.$refresh.html('<div class="dataloading"></div>'),e.$.triggerHandler("refresh"))})};return e.isMoved=!1,e.isLoading&&!e.isDataLoading&&(s=0),-5>r?e.$.animate({"-webkit-transform":"translate(0px,"+(n-1.5*r)+"px) translateZ(0)"},-1.5*r,"cubic-bezier(.3,.78,.43,.95)",o):o(),!1}},d=function(){var t=this,e=function(){if(t.$refresh.html("下拉刷新"),t.isDataLoading=!1,!t.refreshAgain){var e=t.$.matrix().ty,i=Math.max(e-50,0);t.$.animate({"-webkit-transform":"translate(0px,"+i+"px) translateZ(0)"},400,"cubic-bezier(.3,.78,.43,.95)")}};t.options.refresh.call(this,e,function(t){sl.tip("string"==typeof t?t:t.msg),e()})},u=function(t){var e=this,i=t.touches[0],n=+new Date;e.__sy=e.__pointY=e.__startY=i.pageY,e.__sx=i.pageX,e.__hasMomentum=!1,e.__isMoved=!1,e.__isStart=!1,e.__isScroll=n-e.__timestamp<=16},h=function(t){var e=this,i=t.touches[0],n=i.pageY,a=i.pageY-e.__sy,r=i.pageX-e.__sx;return e.__oPointY=e.__pointY,e.__pointY=n,e.__isMoved=!0,!e.__isStart&&(e.__isStart=!0,!e.options.hScroll&&Math.abs(r)>Math.abs(a))?!1:void(s.ios&&e.$refresh&&e.scrollTop<0&&(e.isRefresh=e.scrollTop<-70))},p=function(t){t._stm&&clearTimeout(t._stm),t._stm=setTimeout(function(){t._stm=null,n(t).trigger("scrollStop",[0,t.scrollTop])},80)},f=function(){var t=this;t.__isScroll=!0,t.__timestamp=+new Date,(t.__hasMomentum||s.android)&&p(t)},m=function(t){var e=this,a=(n(e),t.changedTouches[0].pageY),r=Math.abs(e.__oPointY-a);s.ios&&5>r?(e._isStop=!1,p(e),e.__hasMomentum=!1):e.__hasMomentum=!0,t.cancelTap=e.__isScroll,e.isRefresh&&(e.isRefresh=!1,e.$refresh.html('<div class="dataloading"></div>'),e.$scroller.css({"-webkit-transform":"translate(0px,50px) translateZ(0)"}).triggerHandler("refresh"))};e.bind=function(t,e){var i=[];return("string"==typeof t?n(t):t).each(function(){var a,t=n(this).addClass("scrollview");if(e&&e.useScroll||s.android&&parseFloat(s.osVersion<=2.3)?(a=new r(this,e),i.push(a)):(this.__timestamp=0,s.ios?t.css({"-webkit-overflow-scrolling":"touch",overflowY:"scroll"}):s.android&&t.css({overflowY:"scroll"}),t.on("scroll",f).on("touchstart",u).on("touchmove",h).on("touchend",m).each(function(){this._scrollTop=0,this.options=n.extend({hScroll:!1},e)}),i.push({destory:function(){t.off("touchstart",u).off("touchmove",h).off("touchend",m).off("scroll",f)}})),e&&e.refresh){var p=t.children(".sl_scroller"),v=n('<div class="refresh" style="height:50px;text-align:center;line-height:50px;">下拉刷新</div>');p.length||(p=r.addScroller(t));var g=p[0];g.$refresh=v,g.$=p,g.options=e,a&&(g.scrollView=a),p.css({marginTop:-50}).prepend(v).on("touchstart",o).on("touchmove",l).on("touchend",c).on("refresh",d),this.$refresh=v,this.$scroller=p}}),i}});define("widget/tip",function(t,e){var i=t("$"),s=(t("util"),t("core/promise")),a=i('<div class="tip" style="display:none"></div>').on(i.fx.transitionEnd,function(){a.hasClass("tip-hide")&&a.hide()}).appendTo(document.body);e.promise=s.resolve(),e.msec=2e3,e.show=function(){a.hasClass("tip-show")||a.removeClass("tip-hide").show().addClass("tip-show")},e.msg=function(t){var e=this;e.promise.then(function(){return a.html(t),e.show(),setTimeout(function(){e.hide(),e.promise.resolve()},e.msec),this})},e.hide=function(){a.removeClass("tip-show").addClass("tip-hide")},sl.tip=function(t){e.msg(t)}});define("widget/dialog",["$","util","./../core/base","./../core/view"],function(t,e,i){var n=t("$"),s=t("util"),a=t("./../core/view"),r=null,o=a.extend({events:{"tap .js_dialog_btn":"action","tap .js_close_dialog":function(){this.hide()},touchmove:function(t){t.preventDefault()}},className:"dialog",el:"<div></div>",template:s.template('<%if(isShowClose){%><div class="dialog-close js_close_dialog"></div><%}%><%if(isShowTitle){%><div class="dialog-title"><h3 class="js_title"><%=title%></h3></div><%}%><div class="dialog-content js_content"><%=content%></div><div class="dialog-btns"><%for(var i=0,len=buttons.length,button;i<n;i++){button=buttons[i];%><a class="dialog-btn js_dialog_btn<%=button.className?" "+button.className:" "%>"><%=button.text%></a><%}%></div>'),options:{isShowClose:!1,isShowTitle:!0,title:null,content:null,buttons:[]},title:function(t){return"undefined"==typeof t?this.$title.html():(this.$title.html(t),this)},initialize:function(){var t=this,e=s.pick(t.options,["isShowClose","isShowTitle","title","content","buttons"]);t.$el.html(t.template(e)),t.$title=t.$(".js_title"),t.$content=t.$(".js_content")},action:function(t){this.options.buttons[n(t.currentTarget).index()].click.call(this,t)},hide:function(){var t=this;t._visible&&(t._visible=!1,r.hide(),t.$el.css({"-webkit-transform":"scale(1)",opacity:1}).animate({opacity:0,scale:0},300,"ease-out",function(){t.$el.hide(),t.trigger("Hide")}))},show:function(t){var e=this;e._visible||(e._visible=!0,t=n(t),r||(r=n('<div style="position:fixed;top:0px;bottom:0px;right:0px;width:100%;background: #888;opacity: 0.5;z-index:2000;display:none"></div>').appendTo(document.body)),r.show(),null==e.el.parentNode&&e.$el.appendTo(document.body),e.$el.css({"-webkit-transform":"",display:"block",top:"50%"}),e.$el.css({marginTop:this.$el.height()/-2,"-webkit-transform":"scale(0)",opacity:0}).animate({opacity:1,scale:1},300,"ease-out",function(){e.trigger("Show")}))},content:function(t){return"undefined"==typeof t?this.$content:void this.$content.html(t)}}),l=null;sl.prompt=function(t,e,i){e||(e=t,t="请输入"),l?l.title(t):l=new o({title:t,content:'<input type="text" class="prompt-text" /><input type="password" class="prompt-text" />'}),l.$("input.prompt-text").val("").hide().filter('[type="'+(i||"text")+'"]').show(),l.options.onOk=function(){return e.call(this,this.$('input[type="'+(i||"text")+'"].prompt-text').val())},l.options.onCancel=function(){e.call(this)},l.show(),n(window).one("hashchange",function(){l.hide()})};var c=null;return sl.confirm=function(t,e,i,s){var a={};n.isPlainObject(t)?(s=i,i=e,n.extend(a,t)):n.isFunction(e)?(s=i,i=e,a.content=t,a.title="确认提示"):(a.title=t,a.content=e),c?(c.title(a.title),c.$(".dialog-content").html(a.content),c.$(".js_hide").html(a.cancelText||"取消"),c.$(".js_ok").html(a.okText||"确定")):c=new o(a),c.options.onOk=function(){i.call(this)},c.options.onCancel=function(){s&&s.call(this)},c.show(),n(window).one("hashchange",function(){c.hide()})},o});define("widget/loading",["$","util","bridge","./../core/view"],function(t,e,i){var n=t("$"),s=t("util"),r=(t("./../core/view"),t("bridge")),o=[],l=["$el","url","method","headers","dataType","xhrFields","success","complete","pageIndex","pageSize","append","$content","$scroll","checkData","check","hasData","KEY_PAGE","KEY_PAGESIZE","DATAKEY_TOTAL"],c=function(t){n.extend(this,s.pick(t,l)),t.el&&(this.$el=n(t.el)),this.el=this.$el[0],this.params=t.params||{},this.error=t.error||this.showError,this.$content=t.$content||this.$el,this.$scroll=t.$scroll||this.$el,this.$el.on("tap",".js_reload",n.proxy(this.reload,this))};c.prototype={KEY_PAGE:"page",KEY_PAGESIZE:"pageSize",DATAKEY_TOTAL:"total",DATAKEY_PAGENUM:"",method:"GET",dataType:"json",pageIndex:1,pageSize:10,template:'<div class="dataloading"></div>',refresh:'<div class="refreshing"><p class="msg js_msg"></p><p class="loading js_loading"></p></div>',errorTemplate:'<div class="server_error"><i class="msg js_msg"></i><i class="ico_reload js_reload"></i></div>',check:function(t){var e=!(!t||!t.success);return e},hasData:function(t){return t.data&&t.data.length},showMsg:function(t){1==this.pageIndex?(this.$loading.find(".js_msg").show().html(t),this.$loading.show().find(".js_loading").hide()):(this.$refreshing.find(".js_msg").show().html(t),this.$refreshing.show().find(".js_loading").hide())},complete:s.noop,showError:function(t){var e=this;if(1==this.pageIndex){this.$loading.animate({opacity:0},300,"ease-out",function(){e.$loading.hide().css({opacity:""})});var i=e.$error||(e.$error=n(e.errorTemplate).appendTo(e.$el));"string"==typeof t&&(t={msg:t,showReload:!0});var s=i.find(".js_reload");t.showReload?s.show():s.hide(),i.find(".js_msg").html(t.msg||"加载失败"),i.show()}else e.showMsg('<div class="data-reload js_reload">加载失败，请点击重试<i class="i-refresh"></i></div>')},showLoading:function(){var e,t=this;this.$error&&this.$error.hide(),1==t.pageIndex?(t.$loading||(t.$loading=n(t.template)),t.$loading.css({display:"block"}).appendTo(t.$el),t.$refreshing&&t.$refreshing.hide()):(e=this.$refreshing,e.show().find(".js_msg").html("正在载入..."),e.find(".js_loading").show(),t.$loading&&t.$loading.hide())},hideLoading:function(){this.$error&&this.$error.hide(),this.$refreshing&&this.$refreshing.hide(),this.$loading.hide()},setHeaders:function(t,e){var i;e?(i={})[t]=e:i=t,void 0===this.headers&&(this.headers={});for(var n in i)this.headers[n]=i[n];return this},setParam:function(t,e){var i;e?(i={})[t]=e:i=t;for(var n in i)e=i[n],n==this.KEY_PAGE?this.pageIndex=e:n==this.KEY_PAGESIZE?this.pageSize=e:this.params[n]=e;return this},getParam:function(t,e){return this.params},reload:function(t,e){this.isLoading||this.setParam(this.KEY_PAGE,1).load(t,e)},load:function(t,e){var i=this;if(!i.isLoading){i.isLoading=!0,"function"==typeof t&&(e=t,t=null),i.params[i.KEY_PAGE]=i.pageIndex,i.params[i.KEY_PAGESIZE]=i.pageSize;for(var s=o.length-1;s>=0;s--)o[s].disableAutoRefreshing();t&&t.showLoading===!1||i.showLoading(),i._xhr=n.ajax({url:r.url(i.url),headers:i.headers,xhrFields:i.xhrFields,data:i.params,type:i.method,dataType:i.dataType,error:function(t){i._xhr=null,i.isLoading=!1,i.error({msg:"网络错误"},t),e&&e.call(i,{msg:"网络错误"},null)},success:function(t,n,s){i._xhr=null,i.isLoading=!1,!i.check||i.check(t)?(i.hideLoading(),i.checkData===!1||i.hasData(t)?(1!=i.pageIndex&&i.append?i.append(t,n,s):i.success(t,n,s),e&&e.call(i,null,t),i.checkAutoRefreshing(t)):i.dataNotFound(t)):(i.isLoading=!1,i.error(t),e&&e.call(i,t,null))},complete:n.proxy(i.complete,i)})}},_refresh:function(){this.abort().load()},dataNotFound:function(t,e){var i=this;1==i.pageIndex?i.showError("暂无数据"):setTimeout(function(){i.$refreshing.hide()},3e3)},_scroll:function(t,e,i){var n=this;!n.isLoading&&n._scrollY<i&&i+n.$scroll.height()>=n.$refreshing[0].offsetTop&&n._refresh(),n._scrollY=i},_autoRefreshingEnabled:!1,checkAutoRefreshing:function(t){var e=this,i=e.params;e.append&&(e.DATAKEY_PAGENUM&&t[e.DATAKEY_PAGENUM]&&t[e.DATAKEY_PAGENUM]>i[e.KEY_PAGE]||e.DATAKEY_TOTAL&&t[e.DATAKEY_TOTAL]&&t[e.DATAKEY_TOTAL]>i[e.KEY_PAGE]*i[e.KEY_PAGESIZE])?(e.pageIndex++,e.enableAutoRefreshing()):e.disableAutoRefreshing()},enableAutoRefreshing:function(){(this.$refreshing||(this.$refreshing=n(this.refresh)).appendTo(this.$content)).show();this._autoRefreshingEnabled||(this._autoRefreshingEnabled=!0,this.$scroll.on("scrollStop",n.proxy(this._scroll,this)),this._scrollY=this.el.scrollTop,this.el.scrollTop+this.$scroll.height()>=this.$refreshing[0].offsetTop&&this._refresh())},disableAutoRefreshing:function(){this._autoRefreshingEnabled&&(this._autoRefreshingEnabled=!1,this.$scroll.off("scrollStop",this._scroll),this.$refreshing&&this.$refreshing.hide())},abort:function(){return this._xhr&&(this.isLoad=!1,this._xhr.abort(),this._xhr=null,this.hideLoading()),this},destory:function(){this.abort(),this.disableAutoRefreshing(),this.$el.off("tap",".js_reload",this.reload)}},c.extend=s.extend,i.exports=c});define("widget/extend/loading",function(t,e,i){var n=t("../loading");i.exports=n.extend({KEY_PAGE:"pageNum"})});define("widget/extend/wxshare",function(t,e,i){var n=t("$"),s=t("bridge");t("util");i.exports=function(t){seajs.use("http://res.wx.qq.com/open/js/jweixin-1.0.0.js",function(e){n.post(s.url("/user/share_weixin"),{url:location.href.replace(/#.+/,"")},function(i){e.config({debug:!1,appId:i.appId,timestamp:i.tm,nonceStr:i.nonceStr,signature:i.sign,jsApiList:["onMenuShareAppMessage","onMenuShareTimeline","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]}),e.ready(function(){var i={title:t.shareTitle,desc:t.shareContent,link:location.href,imgUrl:"http://m.linshi.biz/upload/share.png",trigger:function(t){},success:function(t){},cancel:function(t){},fail:function(t){}};e.onMenuShareTimeline(i),e.onMenuShareAppMessage(i),e.onMenuShareQQ(i),e.onMenuShareWeibo(i),e.onMenuShareQZone(i)})},"json")})}});define("anim/def",function(){return{openEnterZIndex:2,closeEnterZIndex:1,openExitZIndex:1,closeExitZIndex:3,openEnterAnimationFrom:{translate:"99%,0"},openEnterAnimationTo:{translate:"0,0"},openExitAnimationFrom:{translate:"0,0"},openExitAnimationTo:{translate:"-50%,0"},closeEnterAnimationTo:{translate:"0,0"},closeEnterAnimationFrom:{translate:"-50%,0"},closeExitAnimationFrom:{translate:"0,0"},closeExitAnimationTo:{translate:"100%,0"}}}),define("anim/menu",function(){return{openEnterZIndex:1,closeEnterZIndex:2,openExitZIndex:3,closeExitZIndex:1,openEnterAnimationFrom:{translate:"-80%,0"},openEnterAnimationTo:{translate:"0,0"},openExitAnimationFrom:{translate:"0,0"},openExitAnimationTo:{translate:"70%,0",scale:".8,.8"},closeEnterAnimationFrom:{translate:"70%,0",scale:".8,.8"},closeEnterAnimationTo:{translate:"0,0",scale:"1,1"},closeExitAnimationFrom:{translate:"0,0"},closeExitAnimationTo:{translate:"-80%,0"}}}),define("anim/dialog",function(){return{openEnterZIndex:2,closeEnterZIndex:1,openExitZIndex:1,closeExitZIndex:3,openEnterAnimationFrom:{scale:".3,.3",opacity:0},openEnterAnimationTo:{scale:"1,1",opacity:1},openExitAnimationFrom:{},openExitAnimationTo:{},closeEnterAnimationFrom:{scale:"1,1",translate:"0,0"},closeEnterAnimationTo:{},closeExitAnimationFrom:{scale:"1,1",opacity:1},closeExitAnimationTo:{scale:".3,.3",opacity:0}}});